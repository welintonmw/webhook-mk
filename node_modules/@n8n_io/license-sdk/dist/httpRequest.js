"use strict";var a=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var m=Object.prototype.hasOwnProperty;var f=(t,s)=>{for(var e in s)a(t,e,{get:s[e],enumerable:!0})},d=(t,s,e,n)=>{if(s&&typeof s=="object"||typeof s=="function")for(let o of x(s))!m.call(t,o)&&o!==e&&a(t,o,{get:()=>s[o],enumerable:!(n=g(s,o))||n.enumerable});return t};var _=t=>d(a({},"__esModule",{value:!0}),t);var T={};f(T,{default:()=>P,postRequest:()=>l});module.exports=_(T);var r=require("undici"),y=require("url");function p(t){let s=process.env[t];return s?new r.ProxyAgent(s):null}var c=p("http_proxy_license_server")||p("http_proxy"),h=p("https_proxy_license_server")||p("https_proxy"),w={...c?{"http:":c}:{},...h?{"https:":h}:{}},b=(process.env.no_proxy??"").split(",").map(t=>t.trim()),A=(0,r.getGlobalDispatcher)();(0,r.setGlobalDispatcher)(new class extends r.Dispatcher{dispatch(t,s){if(t.origin){let{host:e,protocol:n}=typeof t.origin=="string"?new y.URL(t.origin):t.origin;if(!b.some(o=>o.startsWith(".")?e.endsWith(o):e===o)){let o=w[n];o&&o.dispatch(t,s)}}return A.dispatch(t,s)}});async function l(t,s,e={}){let n=new AbortController,o=setTimeout(()=>{n.abort()},e.timeoutInMs??3e4);try{let i=await(0,r.fetch)(t,{method:"post",body:JSON.stringify(s),headers:{"Content-Type":"application/json"},signal:n.signal}),u=await i.json();return{status:i.status,data:u}}catch(i){throw new Error("Connection Error",{cause:i})}finally{clearTimeout(o)}}var P={postRequest:l};0&&(module.exports={postRequest});
//# sourceMappingURL=httpRequest.js.map