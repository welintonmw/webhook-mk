"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.router = void 0;
const channel = require("./channel");
const message = require("./message");
const reaction = require("./reaction");
const user = require("./user");
async function router() {
    const items = this.getInputData();
    const operationResult = [];
    for (let i = 0; i < items.length; i++) {
        const resource = this.getNodeParameter('resource', i);
        let operation = this.getNodeParameter('operation', i);
        if (operation === 'del') {
            operation = 'delete';
        }
        else if (operation === 'desactive') {
            operation = 'deactive';
        }
        const mattermost = {
            resource,
            operation,
        };
        try {
            if (mattermost.resource === 'channel') {
                operationResult.push(...await channel[mattermost.operation].execute.call(this, i));
            }
            else if (mattermost.resource === 'message') {
                operationResult.push(...await message[mattermost.operation].execute.call(this, i));
            }
            else if (mattermost.resource === 'reaction') {
                operationResult.push(...await reaction[mattermost.operation].execute.call(this, i));
            }
            else if (mattermost.resource === 'user') {
                operationResult.push(...await user[mattermost.operation].execute.call(this, i));
            }
        }
        catch (err) {
            if (this.continueOnFail()) {
                operationResult.push({ json: this.getInputData(i)[0].json, error: err });
            }
            else {
                throw err;
            }
        }
    }
    return operationResult;
}
exports.router = router;
//# sourceMappingURL=router.js.map