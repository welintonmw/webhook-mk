import type { Entry as LdapUser } from 'ldapts';
import { Cipher } from 'n8n-core';
import type { RunningMode } from '../databases/entities/AuthProviderSyncHistory';
import { SettingsRepository } from '../databases/repositories/settings.repository';
import { InternalHooks } from '../InternalHooks';
import { Logger } from '../Logger';
import type { LdapConfig } from './types';
export declare class LdapService {
    private readonly logger;
    private readonly internalHooks;
    private readonly settingsRepository;
    private readonly cipher;
    private client;
    private syncTimer;
    config: LdapConfig;
    constructor(logger: Logger, internalHooks: InternalHooks, settingsRepository: SettingsRepository, cipher: Cipher);
    init(): Promise<void>;
    loadConfig(): Promise<LdapConfig>;
    updateConfig(ldapConfig: LdapConfig): Promise<void>;
    setConfig(ldapConfig: LdapConfig): void;
    private setGlobalLdapConfigVariables;
    private setLdapLoginEnabled;
    private getClient;
    private bindAdmin;
    searchWithAdminBinding(filter: string): Promise<LdapUser[]>;
    validUser(dn: string, password: string): Promise<void>;
    findAndAuthenticateLdapUser(loginId: string, password: string, loginIdAttribute: string, userFilter: string): Promise<LdapUser | undefined>;
    testConnection(): Promise<void>;
    private scheduleSync;
    runSync(mode: RunningMode): Promise<void>;
    stopSync(): void;
    private getUsersToProcess;
    private getUsersToCreate;
    private getUsersToUpdate;
    private getUsersToDisable;
}
