{"version":3,"file":"debug.js","sources":["../../../src/debug.ts"],"sourcesContent":["import type { Event, EventHint, EventProcessor, Hub, Integration } from '@sentry/types';\nimport { consoleSandbox } from '@sentry/utils';\n\ninterface DebugOptions {\n  /** Controls whether console output created by this integration should be stringified. Default: `false` */\n  stringify?: boolean;\n  /** Controls whether a debugger should be launched before an event is sent. Default: `false` */\n  debugger?: boolean;\n}\n\n/**\n * Integration to debug sent Sentry events.\n * This integration should not be used in production\n */\nexport class Debug implements Integration {\n  /**\n   * @inheritDoc\n   */\n  public static id: string = 'Debug';\n\n  /**\n   * @inheritDoc\n   */\n  public name: string;\n\n  private readonly _options: DebugOptions;\n\n  public constructor(options?: DebugOptions) {\n    this.name = Debug.id;\n\n    this._options = {\n      debugger: false,\n      stringify: false,\n      ...options,\n    };\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public setupOnce(_addGlobalEventProcessor: (eventProcessor: EventProcessor) => void, getCurrentHub: () => Hub): void {\n    const client = getCurrentHub().getClient();\n\n    if (client && client.on) {\n      client.on('beforeSendEvent', (event: Event, hint?: EventHint) => {\n        if (this._options.debugger) {\n          // eslint-disable-next-line no-debugger\n          debugger;\n        }\n\n        /* eslint-disable no-console */\n        consoleSandbox(() => {\n          if (this._options.stringify) {\n            console.log(JSON.stringify(event, null, 2));\n            if (hint && Object.keys(hint).length) {\n              console.log(JSON.stringify(hint, null, 2));\n            }\n          } else {\n            console.log(event);\n            if (hint && Object.keys(hint).length) {\n              console.log(hint);\n            }\n          }\n        });\n        /* eslint-enable no-console */\n      });\n    }\n  }\n}\n"],"names":[],"mappings":";;AAUA;AACA;AACA;AACA;AACA,MAAA,KAAA,EAAA;AACA;AACA;AACA;AACA,GAAA,OAAA,YAAA,GAAA,CAAA,IAAA,CAAA,EAAA,GAAA,QAAA,CAAA;AACA;AACA;AACA;AACA;;AAKA,GAAA,WAAA,CAAA,OAAA,EAAA;AACA,IAAA,IAAA,CAAA,IAAA,GAAA,KAAA,CAAA,EAAA,CAAA;AACA;AACA,IAAA,IAAA,CAAA,QAAA,GAAA;AACA,MAAA,QAAA,EAAA,KAAA;AACA,MAAA,SAAA,EAAA,KAAA;AACA,MAAA,GAAA,OAAA;AACA,KAAA,CAAA;AACA,GAAA;AACA;AACA;AACA;AACA;AACA,GAAA,SAAA,CAAA,wBAAA,EAAA,aAAA,EAAA;AACA,IAAA,MAAA,MAAA,GAAA,aAAA,EAAA,CAAA,SAAA,EAAA,CAAA;AACA;AACA,IAAA,IAAA,MAAA,IAAA,MAAA,CAAA,EAAA,EAAA;AACA,MAAA,MAAA,CAAA,EAAA,CAAA,iBAAA,EAAA,CAAA,KAAA,EAAA,IAAA,KAAA;AACA,QAAA,IAAA,IAAA,CAAA,QAAA,CAAA,QAAA,EAAA;AACA;AACA,UAAA,SAAA;AACA,SAAA;AACA;AACA;AACA,QAAA,cAAA,CAAA,MAAA;AACA,UAAA,IAAA,IAAA,CAAA,QAAA,CAAA,SAAA,EAAA;AACA,YAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,SAAA,CAAA,KAAA,EAAA,IAAA,EAAA,CAAA,CAAA,CAAA,CAAA;AACA,YAAA,IAAA,IAAA,IAAA,MAAA,CAAA,IAAA,CAAA,IAAA,CAAA,CAAA,MAAA,EAAA;AACA,cAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,SAAA,CAAA,IAAA,EAAA,IAAA,EAAA,CAAA,CAAA,CAAA,CAAA;AACA,aAAA;AACA,WAAA,MAAA;AACA,YAAA,OAAA,CAAA,GAAA,CAAA,KAAA,CAAA,CAAA;AACA,YAAA,IAAA,IAAA,IAAA,MAAA,CAAA,IAAA,CAAA,IAAA,CAAA,CAAA,MAAA,EAAA;AACA,cAAA,OAAA,CAAA,GAAA,CAAA,IAAA,CAAA,CAAA;AACA,aAAA;AACA,WAAA;AACA,SAAA,CAAA,CAAA;AACA;AACA,OAAA,CAAA,CAAA;AACA,KAAA;AACA,GAAA;AACA,CAAA,CAAA,KAAA,CAAA,YAAA,EAAA;;;;"}