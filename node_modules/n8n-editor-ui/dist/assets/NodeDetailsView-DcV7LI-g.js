const __vite__fileDeps=["assets/RunDataTable-BVAuNDP9.js","assets/pinia-sugP77Im.js","assets/n8n-4UEsHtUL.js","assets/axios-Mm4CS0gO.js","assets/esprima-next-nhoSXAeq.js","assets/luxon-CLwAIbs0.js","assets/vendor-Dv5OeN6t.js","assets/lodash-es-CZ1inz46.js","assets/n8n-C4uNEd0H.css","assets/index-1OxaEeO3.js","assets/flatted-DN8lQ2XG.js","assets/@vueuse/core-BBHtM40w.js","assets/@n8n/permissions-BxxteU-C.js","assets/dateformat-CIxnBJXX.js","assets/vue-i18n-Delvyc9x.js","assets/uuid-SoommWqA.js","assets/@n8n/codemirror-lang-sql-DBO6T13I.js","assets/@lezer/common-B6ct0j_v.js","assets/prettier-bS6l4Vb1.js","assets/@jsplumb/util-DS-9vq_E.js","assets/@jsplumb/core-CVBraiyY.js","assets/@jsplumb/common-CF-b-6-M.js","assets/@jsplumb/connector-bezier-BGU0Ovbw.js","assets/@jsplumb/browser-ui-BVF2KoJK.js","assets/codemirror-lang-html-n8n-CWDO6_kP.js","assets/@n8n/codemirror-lang-Dl0FW_KM.js","assets/fast-json-stable-stringify-BOfzoJX1.js","assets/timeago.js-CiyKClrF.js","assets/qrcode.vue-BGkPba5A.js","assets/vue3-touch-events-mV0oX_Sl.js","assets/chart.js-343vZi4M.js","assets/index-BhLXy8h2.css","assets/TextWithHighlights-kUoC0rXY.js","assets/TextWithHighlights-LQXtj-tI.css","assets/file-saver-By8WREO3.js","assets/vue-json-pretty-Cqx2Hpq3.js","assets/dateFormatter-CfbOITvW.js","assets/RunDataAi-C3XiqNZa.js","assets/RunDataAi-BTTIiRHW.css","assets/useWorkflowActivate-npf1npdP.js","assets/RunDataTable-c_Qq72Kl.css","assets/RunDataJson-CMcOD-78.js","assets/RunDataJson-BUkdekuh.css","assets/RunDataSchema-CF4YH-8y.js","assets/RunDataSchema-DTHG8F2X.css","assets/RunDataSearch-DwB8g_cE.js","assets/RunDataSearch-DPX1pnw0.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{b as ht,_ as Z,N as me,am as Wn,o as mt,m as Gt,at as Un,h as Ke,p as Xe,au as Ln,av as Hn,aw as qn,a7 as zn,ax as xn,ay as Ot,j as Kt,k as gt,az as Fn,e as Ae,ac as jn}from"./n8n-4UEsHtUL.js";import{m as fe,s as Xt}from"./pinia-sugP77Im.js";import{ao as Pe,K as ae,j as re,dw as Jt,cV as Yn,dx as Gn,cX as Qt,x as Be,a3 as We,G as Zt,aK as en,q as vt,u as Ue,dy as Vt,dz as Kn,ca as Qe,aV as Ze,a4 as ce,ap as Le,d as tn,an as At,a6 as Ve,aL as Xn,H as nn,e as Ie,as as on,c7 as sn,z as Jn,A as an,dA as Qn,dB as Zn,aP as eo,aR as to,aq as no,dC as oo,dD as Se,dE as Bt,bK as so,dF as Wt,X as Oe,dG as Ut,l as rn,dH as ln,dI as io,dJ as ao,dK as ro,dL as lo,n as uo,dM as po,dN as co,cq as Lt,dO as Ht,dP as ho,dl as mo,a$ as et,dQ as qt,dR as go,dS as vo,dT as zt,ay as yo,dU as fo,dV as wo,aT as dn,dW as bo,dX as ko,c$ as To,dY as Do,ar as dt,V as No,C as _o,b as So,dZ as $o,N as Co,d_ as Po,E as Io}from"./index-1OxaEeO3.js";import{G as J,r as K,e as I,ag as v,l as o,m as c,p as s,U as p,I as h,O as u,S as b,T as r,M as D,R as y,a8 as xt,a2 as Ce,n as Eo,aH as nt,F as ie,a7 as ue,aw as Ro,ax as Mo,d as $e,aq as Oo,J as ke,P as de,K as Vo,V as pe,H as ne,a5 as Ao,Q as un,b as yt,y as pn,u as x,X as Bo,aK as He,aM as Je,a9 as ft,aR as Wo,W as Uo}from"./vendor-Dv5OeN6t.js";import{g as ye,s as Ne,A as ut,e as Lo,y as Ho}from"./lodash-es-CZ1inz46.js";import{F as pt}from"./file-saver-By8WREO3.js";import{V as qo}from"./vue-json-pretty-Cqx2Hpq3.js";import{a as zo}from"./dateFormatter-CfbOITvW.js";import xo from"./RunDataAi-C3XiqNZa.js";import{u as Fo}from"./useWorkflowActivate-npf1npdP.js";const tt=ht(),jo=J({__name:"NodeTitle",props:{modelValue:{default:""},nodeType:{default:void 0},readOnly:{type:Boolean,default:!1}},emits:["update:model-value"],setup(e,{emit:t}){const n=e,i=t,l=K(!1),w=K(""),k=K(),d=I(()=>!n.readOnly&&window===window.parent);async function m(){w.value=n.modelValue,l.value=!0,await Eo(),k.value&&k.value.focus()}function C(){w.value.trim()!==""&&i("update:model-value",w.value.trim()),l.value=!1}return(f,N)=>{const E=v("n8n-text"),O=v("n8n-input"),_=v("n8n-button"),B=v("font-awesome-icon"),S=v("n8n-popover");return o(),c("span",{class:h(f.$style.container),"data-test-id":"node-title-container",onClick:m},[s("span",{class:h(f.$style.iconWrapper)},[p(Pe,{"node-type":f.nodeType,size:18},null,8,["node-type"])],2),p(S,{placement:"right",width:"200",visible:l.value,disabled:!d.value},{reference:u(()=>[s("div",{class:h({[f.$style.title]:!0,[f.$style.hoverable]:d.value})},[b(r(f.modelValue)+" ",1),s("div",{class:h(f.$style.editIconContainer)},[d.value?(o(),D(B,{key:0,class:h(f.$style.editIcon),icon:"pencil-alt"},null,8,["class"])):y("",!0)],2)],2)]),default:u(()=>[s("div",{class:h(f.$style.editContainer),onKeydown:[xt(C,["enter"]),N[2]||(N[2]=Ce(()=>{},["stop"])),N[3]||(N[3]=xt(P=>l.value=!1,["esc"]))]},[p(E,{bold:!0,color:"text-base",tag:"div"},{default:u(()=>[b(r(f.$locale.baseText("ndv.title.renameNode")),1)]),_:1}),p(O,{ref_key:"input",ref:k,modelValue:w.value,"onUpdate:modelValue":N[0]||(N[0]=P=>w.value=P),size:"small","data-test-id":"node-rename-input"},null,8,["modelValue"]),s("div",{class:h(f.$style.editButtons)},[p(_,{type:"secondary",size:"small",label:f.$locale.baseText("ndv.title.cancel"),onClick:N[1]||(N[1]=P=>l.value=!1)},null,8,["label"]),p(_,{type:"primary",size:"small",label:f.$locale.baseText("ndv.title.rename"),onClick:C},null,8,["label"])],2)],34)]),_:1},8,["visible","disabled"])],2)}}}),Yo="_container_9bi3m_1",Go="_title_9bi3m_11",Ko="_hoverable_9bi3m_19",Xo="_editIcon_9bi3m_22",Jo="_iconWrapper_9bi3m_26",Qo="_editIconContainer_9bi3m_39",Zo="_editButtons_9bi3m_45",es="_editContainer_9bi3m_53",ts={container:Yo,title:Go,hoverable:Ko,editIcon:Xo,iconWrapper:Jo,editIconContainer:Qo,editButtons:Zo,editContainer:es},ns={$style:ts},os=Z(jo,[["__cssModules",ns]]),ss=J({__name:"NodeSettingsTabs",props:{modelValue:{default:"params"},nodeType:{default:void 0},pushRef:{default:""}},emits:["update:model-value"],setup(e,{emit:t}){const n=e,i=t,l=We(),w=ae(),k=re(),d=Be(),m=Zt(),C=I(()=>w.activeNode),f=I(()=>{const S=n.nodeType;return S?Jt(S.name):!1}),N=I(()=>{var S;return((S=n.nodeType)==null?void 0:S.name.split(".")[0])??""}),E=I(()=>{var F,G,oe,L;const S=n.nodeType;if(!S)return"";if(S.documentationUrl&&S.documentationUrl.startsWith("http"))return S.documentationUrl;const P=new URLSearchParams({utm_source:"n8n_app",utm_medium:"node_settings_modal-credential_link",utm_campaign:S.name}),$=(L=(oe=(G=(F=S.codex)==null?void 0:F.resources)==null?void 0:G.primaryDocumentation)==null?void 0:oe[0])==null?void 0:L.url;return $?`${$}?${P.toString()}`:f.value?`${Yn}${N.value}`:`${Gn}?${P.toString()}`}),O=I(()=>{const S=[{label:d.baseText("nodeSettings.parameters"),value:"params"},{label:d.baseText("nodeSettings.settings"),value:"settings"}];return f.value&&S.push({icon:"cube",value:"communityNode",align:"right",tooltip:d.baseText("generic.communityNode.tooltip",{interpolate:{docUrl:Qt,packageName:N.value}})}),E.value&&S.push({label:d.baseText("nodeSettings.docs"),value:"docs",href:E.value,align:"right"}),S});function _(S){var P;S==="docs"&&n.nodeType&&(l.run("dataDisplay.onDocumentationUrlClick",{nodeType:n.nodeType,documentationUrl:E.value}),m.track("User clicked ndv link",{node_type:(P=C.value)==null?void 0:P.type,workflow_id:k.workflowId,push_ref:n.pushRef,pane:me.Main,type:"docs"})),S==="settings"&&n.nodeType&&m.track("User viewed node settings",{node_type:n.nodeType.name,workflow_id:k.workflowId}),(S==="settings"||S==="params")&&i("update:model-value",S)}function B(S,P){S==="communityNode"&&P.target.localName==="a"&&m.track("user clicked cnr docs link",{source:"node details view"})}return(S,P)=>{const $=v("N8nTabs");return o(),D($,{options:O.value,"model-value":S.modelValue,"onUpdate:modelValue":_,onTooltipClick:B},null,8,["options","model-value"])}}}),is=J({name:"NodeWebhooks",props:["node","nodeType"],setup(){const e=nt(),t=en(),n=vt({router:e});return{clipboard:t,workflowHelpers:n,...Ue()}},data(){return{isMinimized:this.nodeType&&!Vt.includes(this.nodeType.name),showUrlFor:"test"}},computed:{isProductionOnly(){return this.nodeType&&Kn.includes(this.nodeType.name)},urlOptions(){return[...this.isProductionOnly?[]:[{label:this.baseText.testUrl,value:"test"}],{label:this.baseText.productionUrl,value:"production"}]},visibleWebhookUrls(){return this.webhooksNode.filter(e=>typeof e.ndvHideUrl=="string"?!this.workflowHelpers.getWebhookExpressionValue(e,"ndvHideUrl"):!e.ndvHideUrl)},webhooksNode(){return this.nodeType===null||this.nodeType.webhooks===void 0?[]:this.nodeType.webhooks.filter(e=>e.restartWebhook!==!0)},baseText(){switch(this.nodeType.name){case Ze:return{toggleTitle:this.$locale.baseText("nodeWebhooks.webhookUrls.chatTrigger"),clickToDisplay:this.$locale.baseText("nodeWebhooks.clickToDisplayWebhookUrls.formTrigger"),clickToHide:this.$locale.baseText("nodeWebhooks.clickToHideWebhookUrls.chatTrigger"),clickToCopy:this.$locale.baseText("nodeWebhooks.clickToCopyWebhookUrls.chatTrigger"),testUrl:this.$locale.baseText("nodeWebhooks.testUrl"),productionUrl:this.$locale.baseText("nodeWebhooks.productionUrl"),copyTitle:this.$locale.baseText("nodeWebhooks.showMessage.title.chatTrigger"),copyMessage:this.$locale.baseText("nodeWebhooks.showMessage.message.chatTrigger")};case Qe:return{toggleTitle:this.$locale.baseText("nodeWebhooks.webhookUrls.formTrigger"),clickToDisplay:this.$locale.baseText("nodeWebhooks.clickToDisplayWebhookUrls.formTrigger"),clickToHide:this.$locale.baseText("nodeWebhooks.clickToHideWebhookUrls.formTrigger"),clickToCopy:this.$locale.baseText("nodeWebhooks.clickToCopyWebhookUrls.formTrigger"),testUrl:this.$locale.baseText("nodeWebhooks.testUrl"),productionUrl:this.$locale.baseText("nodeWebhooks.productionUrl"),copyTitle:this.$locale.baseText("nodeWebhooks.showMessage.title.formTrigger"),copyMessage:this.$locale.baseText("nodeWebhooks.showMessage.message.formTrigger")};default:return{toggleTitle:this.$locale.baseText("nodeWebhooks.webhookUrls"),clickToDisplay:this.$locale.baseText("nodeWebhooks.clickToDisplayWebhookUrls"),clickToHide:this.$locale.baseText("nodeWebhooks.clickToHideWebhookUrls"),clickToCopy:this.$locale.baseText("nodeWebhooks.clickToCopyWebhookUrls"),testUrl:this.$locale.baseText("nodeWebhooks.testUrl"),productionUrl:this.$locale.baseText("nodeWebhooks.productionUrl"),copyTitle:this.$locale.baseText("nodeWebhooks.showMessage.title"),copyMessage:void 0}}}},watch:{node(){this.isMinimized=!Vt.includes(this.nodeType.name)}},methods:{copyWebhookUrl(e){const t=this.getWebhookUrlDisplay(e);this.clipboard.copy(t),this.showMessage({title:this.baseText.copyTitle,message:this.baseText.copyMessage,type:"success"}),this.$telemetry.track("User copied webhook URL",{pane:"parameters",type:`${this.showUrlFor} url`})},getWebhookUrlDisplay(e){return this.node?this.workflowHelpers.getWebhookUrl(e,this.node,this.isProductionOnly?"production":this.showUrlFor):""},isWebhookMethodVisible(e){try{const t=this.workflowHelpers.getWebhookExpressionValue(e,"httpMethod",!1);if(Array.isArray(t)&&t.length!==1)return!1}catch{}return typeof e.ndvHideMethod=="string"?!this.workflowHelpers.getWebhookExpressionValue(e,"ndvHideMethod"):!e.ndvHideMethod},getWebhookHttpMethod(e){const t=this.workflowHelpers.getWebhookExpressionValue(e,"httpMethod",!1);return Array.isArray(t)?t[0]:t}}}),wt=e=>(Ro("data-v-36c5dbc7"),e=e(),Mo(),e),as={key:0,class:"webhooks"},rs=["title"],ls={key:0,class:"node-webhooks"},ds={key:0,class:"url-selection"},us={key:0,class:"webhook-wrapper"},ps={class:"http-field"},cs={class:"http-method"},hs=wt(()=>s("br",null,null,-1)),ms={class:"url-field"},gs=["onClick"],vs=wt(()=>s("br",null,null,-1)),ys={key:1,class:"webhook-wrapper"},fs={class:"url-field-full-width"},ws=["onClick"],bs=wt(()=>s("br",null,null,-1));function ks(e,t,n,i,l,w){const k=v("font-awesome-icon"),d=v("n8n-radio-buttons"),m=v("el-col"),C=v("el-row"),f=v("n8n-tooltip"),N=v("el-collapse-transition");return e.webhooksNode.length&&e.visibleWebhookUrls.length>0?(o(),c("div",as,[s("div",{class:h(["clickable headline",{expanded:!e.isMinimized}]),title:e.isMinimized?e.baseText.clickToDisplay:e.baseText.clickToHide,onClick:t[0]||(t[0]=E=>e.isMinimized=!e.isMinimized)},[p(k,{icon:"angle-right",class:"minimize-button minimize-icon"}),b(" "+r(e.baseText.toggleTitle),1)],10,rs),p(N,null,{default:u(()=>[e.isMinimized?y("",!0):(o(),c("div",ls,[e.isProductionOnly?y("",!0):(o(),c("div",ds,[p(C,null,{default:u(()=>[p(m,{span:24},{default:u(()=>[p(d,{modelValue:e.showUrlFor,"onUpdate:modelValue":t[1]||(t[1]=E=>e.showUrlFor=E),options:e.urlOptions},null,8,["modelValue","options"])]),_:1})]),_:1})])),(o(!0),c(ie,null,ue(e.visibleWebhookUrls,(E,O)=>(o(),D(f,{key:O,class:"item",content:e.baseText.clickToCopy,placement:"left"},{default:u(()=>[e.isWebhookMethodVisible(E)?(o(),c("div",us,[s("div",ps,[s("div",cs,[b(r(e.getWebhookHttpMethod(E)),1),hs])]),s("div",ms,[s("div",{class:"webhook-url left-ellipsis clickable",onClick:_=>e.copyWebhookUrl(E)},[b(r(e.getWebhookUrlDisplay(E)),1),vs],8,gs)])])):(o(),c("div",ys,[s("div",fs,[s("div",{class:"webhook-url left-ellipsis clickable",onClick:_=>e.copyWebhookUrl(E)},[b(r(e.getWebhookUrlDisplay(E)),1),bs],8,ws)])]))]),_:2},1032,["content"]))),128))]))]),_:1})])):y("",!0)}const Ts=Z(is,[["render",ks],["__scopeId","data-v-36c5dbc7"]]),Ds=["data-test-id"],Ns=["textContent"],_s=["onClick"],Ss=["onClick"],$s=["data-node-name"],Cs=["onClick"],Ps=J({__name:"NDVSubConnections",props:{rootNode:{}},emits:["switchSelectedNode","openConnectionNodeCreator"],setup(e,{expose:t,emit:n}){const i=e,l=re(),w=ce(),k=Le(),{debounce:d}=tn(),m=n,C=K([]),f=K([]),N=K(!1),E=I(()=>w.getNodeType(i.rootNode.type,i.rootNode.typeVersion)),O=I(()=>l.getNodeByName(i.rootNode.name)),_=I(()=>l.getCurrentWorkflow()),B=I(()=>{const T=k.getNodeIssues(E.value,i.rootNode,_.value,["typeUnknown","parameters","credentials","execution"]);return(T==null?void 0:T.input)??{}}),S=I(()=>C.value.reduce((T,U)=>{const Y=oe(_.value.getParentNodes(i.rootNode.name,U.type));return{...T,[U.type]:Y}},{}));function P(T){return C.value.find(U=>U.type===T)}function $(T){const U=P(T);return(U==null?void 0:U.maxConnections)!==1}function F(T){return $(T)&&!f.value.includes(T)}function G(T,U){$(T)&&(U?f.value=[...f.value,T]:f.value=f.value.filter(Y=>Y!==T))}function oe(T){return T.map(U=>{const Y=l.getNodeByName(U);if(Y){const Q=w.getNodeType(Y.type);if(Q){const te=k.getNodeIssues(Q,Y,_.value),q=te?Wn(te,Y):"";return{node:Y,nodeType:Q,issues:q}}}return null}).filter(U=>U!==null)}function L(T){return N.value&&(B.value[T]??[]).length>0}function a(T){return typeof T=="string"?!1:"type"in T}function R(){return!E.value||!i.rootNode?[]:mt(_.value,i.rootNode,E.value).filter(Y=>a(Y)?Y.type!=="main":!1)}function A(T,U){if($(U)&&!f.value.includes(U)){G(U,!0);return}m("switchSelectedNode",T)}function V(T){const U=S.value[T];if($(T)&&!f.value.includes(T)&&U.length>=1){G(T,!0);return}m("openConnectionNodeCreator",i.rootNode.name,T)}function z(){N.value=!1,setTimeout(()=>{N.value=!0},0)}return $e(O,d(()=>setTimeout(()=>{f.value=[],C.value=R()},0),{debounceTime:1e3}),{immediate:!0}),t({showNodeInputsIssues:z}),(T,U)=>{const Y=v("n8n-icon-button"),Q=v("n8n-tooltip"),te=Oo("on-click-outside");return o(),c("div",{class:h(T.$style.container)},[s("div",{class:h(T.$style.connections),style:ke(`--possible-connections: ${C.value.length}`)},[(o(!0),c(ie,null,ue(C.value,q=>(o(),c("div",{key:q.type,"data-test-id":`subnode-connection-group-${q.type}`},[s("div",{class:h(T.$style.connectionType)},[s("span",{class:h({[T.$style.connectionLabel]:!0,[T.$style.hasIssues]:L(q.type)}),textContent:r(`${q.displayName}${q.required?" *":""}`)},null,10,Ns),de((o(),c("div",{class:h({[T.$style.connectedNodesWrapper]:!0,[T.$style.connectedNodesWrapperExpanded]:f.value.includes(q.type)}),style:ke(`--nodes-length: ${S.value[q.type].length}`),onClick:X=>G(q.type,!0)},[!(S.value[q.type].length>=1)||q.maxConnections!==1?(o(),c("div",{key:0,class:h({[T.$style.plusButton]:!0,[T.$style.hasIssues]:L(q.type)}),onClick:X=>V(q.type)},[p(Q,{placement:"top",teleported:!0,offset:10,"show-after":300,disabled:F(q.type)&&S.value[q.type].length>=1},{content:u(()=>[b(" Add "+r(q.displayName)+" ",1),L(q.type)?(o(),D(At,{key:0,title:`${T.$locale.baseText("node.issues")}:`,items:B.value[q.type]},null,8,["title","items"])):y("",!0)]),default:u(()=>[p(Y,{size:"medium",icon:"plus",type:"tertiary","data-test-id":`add-subnode-${q.type}`},null,8,["data-test-id"])]),_:2},1032,["disabled"])],10,Ss)):y("",!0),S.value[q.type].length>0?(o(),c("div",{key:1,class:h({[T.$style.connectedNodes]:!0,[T.$style.connectedNodesMultiple]:S.value[q.type].length>1})},[(o(!0),c(ie,null,ue(S.value[q.type],(X,M)=>(o(),c("div",{key:X.node.name,class:h({[T.$style.nodeWrapper]:!0,[T.$style.hasIssues]:X.issues}),"data-test-id":"floating-subnode","data-node-name":X.node.name,style:ke(`--node-index: ${M}`)},[(o(),D(Q,{key:X.node.name,placement:"top",teleported:!0,offset:10,"show-after":300,disabled:F(q.type)},{content:u(()=>[b(r(X.node.name)+" ",1),X.issues?(o(),D(At,{key:0,title:`${T.$locale.baseText("node.issues")}:`,items:X.issues},null,8,["title","items"])):y("",!0)]),default:u(()=>[s("div",{class:h(T.$style.connectedNode),onClick:W=>A(X.node.name,q.type)},[p(Pe,{"node-type":X.nodeType,"node-name":X.node.name,"tooltip-position":"top",size:20,circle:""},null,8,["node-type","node-name"])],10,Cs)]),_:2},1032,["disabled"]))],14,$s))),128))],2)):y("",!0)],14,_s)),[[te,()=>G(q.type,!1)]])],2)],8,Ds))),128))],6)],2)}}}),Is="_container_tfxh3_18",Es="_connections_tfxh3_26",Rs="_connectionType_tfxh3_38",Ms="_connectionLabel_tfxh3_45",Os="_hasIssues_tfxh3_51",Vs="_connectedNodesWrapper_tfxh3_55",As="_plusButton_tfxh3_63",Bs="_connectedNodesWrapperExpanded_tfxh3_81",Ws="_connectedNodesMultiple_tfxh3_87",Us="_connectedNode_tfxh3_55",Ls="_connectedNodes_tfxh3_55",Hs="_nodeWrapper_tfxh3_125",qs={container:Is,connections:Es,connectionType:Rs,connectionLabel:Ms,hasIssues:Os,connectedNodesWrapper:Vs,plusButton:As,"horizontal-shake":"_horizontal-shake_tfxh3_1",connectedNodesWrapperExpanded:Bs,connectedNodesMultiple:Ws,connectedNode:Us,connectedNodes:Ls,nodeWrapper:Hs},zs={$style:qs},xs=Z(Ps,[["__cssModules",zs]]),Ft="N8N_NODE_TEST_STEP_POPUP_COUNT",jt=10,Fs=3e3,js=J({inheritAttrs:!1,props:{nodeName:{type:String,required:!0},disabled:{type:Boolean,default:!1},label:{type:String},type:{type:String},size:{type:String},transparent:{type:Boolean,default:!1},telemetrySource:{type:String},hideIcon:{type:Boolean},tooltip:{type:String}},emits:["stopExecution","execute"],setup(e){const t=nt(),i=re().getNodeByName(e.nodeName),l=Ve(i),w=We(),{runWorkflow:k,stopCurrentExecution:d}=Xn({router:t});return{externalHooks:w,pinnedData:l,runWorkflow:k,stopCurrentExecution:d,lastPopupCountUpdate:0,...Ue(),...nn()}},computed:{...fe(ce,ae,re,Ie),node(){return this.workflowsStore.getNodeByName(this.nodeName)},nodeType(){return this.node?this.nodeTypesStore.getNodeType(this.node.type,this.node.typeVersion):null},nodeRunning(){var t,n;const e=this.workflowsStore.executedNode;return this.workflowRunning&&(this.workflowsStore.isNodeExecuting(((t=this.node)==null?void 0:t.name)??"")||e===((n=this.node)==null?void 0:n.name))},workflowRunning(){return this.uiStore.isActionActive("workflowRunning")},isTriggerNode(){return this.node?this.nodeTypesStore.isTriggerNode(this.node.type):!1},isManualTriggerNode(){return!!(this.nodeType&&this.nodeType.name===on)},isChatNode(){return!!(this.nodeType&&this.nodeType.name===Ze)},isChatChild(){return this.workflowsStore.checkIfNodeHasChatParent(this.nodeName)},isFormTriggerNode(){return!!(this.nodeType&&this.nodeType.name===Qe)},isPollingTypeNode(){var e;return!!((e=this.nodeType)!=null&&e.polling)},isScheduleTrigger(){var e;return!!((e=this.nodeType)!=null&&e.group.includes("schedule"))},isWebhookNode(){return!!(this.nodeType&&this.nodeType.name===sn)},isListeningForEvents(){const e=this.workflowsStore.executionWaitingForWebhook,t=this.workflowsStore.executedNode;return!!this.node&&!this.node.disabled&&this.isTriggerNode&&e&&(!t||t===this.nodeName)},isListeningForWorkflowEvents(){return this.nodeRunning&&this.isTriggerNode&&!this.isScheduleTrigger&&!this.isManualTriggerNode},hasIssues(){var e;return!!((e=this.node)!=null&&e.issues&&(this.node.issues.parameters||this.node.issues.credentials))},disabledHint(){var e;if(this.isListeningForEvents)return"";if(this.isTriggerNode&&((e=this.node)!=null&&e.disabled))return this.$locale.baseText("ndv.execute.nodeIsDisabled");if(this.isTriggerNode&&this.hasIssues){const t=this.ndvStore.activeNode;return t&&t.name!==this.nodeName?this.$locale.baseText("ndv.execute.fixPrevious"):this.$locale.baseText("ndv.execute.requiredFieldsMissing")}return this.workflowRunning&&!this.nodeRunning?this.$locale.baseText("ndv.execute.workflowAlreadyRunning"):""},tooltipText(){return this.disabledHint?this.disabledHint:this.tooltip&&!this.loading&&this.testStepButtonPopupCount()<jt?this.tooltip:""},buttonLabel(){var e;return this.isListeningForEvents||this.isListeningForWorkflowEvents?this.$locale.baseText("ndv.execute.stopListening"):this.label?this.label:this.isChatNode?this.$locale.baseText("ndv.execute.testChat"):this.isWebhookNode?this.$locale.baseText("ndv.execute.listenForTestEvent"):this.isFormTriggerNode?this.$locale.baseText("ndv.execute.testStep"):this.isPollingTypeNode||(e=this.nodeType)!=null&&e.mockManualExecution?this.$locale.baseText("ndv.execute.fetchEvent"):this.$locale.baseText("ndv.execute.testNode")},loading(){return this.nodeRunning&&!this.isListeningForEvents&&!this.isListeningForWorkflowEvents}},methods:{async stopWaitingForWebhook(){try{await this.workflowsStore.removeTestWebhook(this.workflowsStore.workflowId)}catch(e){this.showError(e,this.$locale.baseText("ndv.execute.stopWaitingForWebhook.error"));return}},testStepButtonPopupCount(){return Number(localStorage.getItem(Ft))},onMouseOver(){const e=this.testStepButtonPopupCount();if(e<jt&&!this.disabledHint&&this.tooltipText){const t=Date.now();(!this.lastPopupCountUpdate||t-this.lastPopupCountUpdate>=Fs)&&(localStorage.setItem(Ft,`${e+1}`),this.lastPopupCountUpdate=t)}},async onClick(){if(this.isChatNode||this.isChatChild&&this.ndvStore.isNDVDataEmpty("input"))this.ndvStore.setActiveNodeName(null),Jn.emit("openChat");else if(this.isListeningForEvents)await this.stopWaitingForWebhook();else if(this.isListeningForWorkflowEvents)await this.stopCurrentExecution(),this.$emit("stopExecution");else{let e=!1;if(this.pinnedData.hasData.value&&(e=await this.confirm(this.$locale.baseText("ndv.pinData.unpinAndExecute.description"),this.$locale.baseText("ndv.pinData.unpinAndExecute.title"),{confirmButtonText:this.$locale.baseText("ndv.pinData.unpinAndExecute.confirm"),cancelButtonText:this.$locale.baseText("ndv.pinData.unpinAndExecute.cancel")})===an,e&&this.node&&this.pinnedData.unsetData("unpin-and-execute-modal")),!this.pinnedData.hasData.value||e){const t={node_type:this.nodeType?this.nodeType.name:null,workflow_id:this.workflowsStore.workflowId,source:this.telemetrySource,push_ref:this.ndvStore.pushRef};this.$telemetry.track("User clicked execute node button",t),await this.externalHooks.run("nodeExecuteButton.onClick",t),await this.runWorkflow({destinationNode:this.nodeName,source:"RunData.ExecuteNodeButton"}),this.$emit("execute")}}}}});function Ys(e,t,n,i,l,w){const k=v("n8n-button"),d=v("n8n-tooltip");return o(),c("div",null,[p(d,{placement:"right",disabled:!e.tooltipText},{content:u(()=>[s("div",null,r(e.tooltipText),1)]),default:u(()=>[s("div",null,[p(k,Vo(e.$attrs,{loading:e.loading,disabled:e.disabled||!!e.disabledHint,label:e.buttonLabel,type:e.type,size:e.size,icon:!e.isListeningForEvents&&!e.hideIcon?"flask":void 0,"transparent-background":e.transparent,title:!e.isTriggerNode&&!e.tooltipText?e.$locale.baseText("ndv.execute.testNode.description"):"",onMouseover:e.onMouseOver,onClick:e.onClick}),null,16,["loading","disabled","label","type","size","icon","transparent-background","title","onMouseover","onClick"])])]),_:1},8,["disabled"])])}const bt=Z(js,[["render",Ys]]),Gs=J({name:"NodeSettings",components:{NodeTitle:os,NodeCredentials:Qn,ParameterInputList:Zn,NodeSettingsTabs:ss,NodeWebhooks:Ts,NDVSubConnections:xs,NodeExecuteButton:bt},setup(){const e=Le(),t=We(),{showMessage:n}=Ue();return{externalHooks:t,nodeHelpers:e,showMessage:n}},computed:{...fe(no,ce,ae,Ie,to,re,eo),isReadOnly(){return this.readOnly||this.hasForeignCredential},isExecutable(){if(this.nodeType&&this.node){const e=this.workflowsStore.getCurrentWorkflow(),t=e.getNode(this.node.name),n=mt(e,t,this.nodeType);if(!Gt(n).includes(me.Main)&&!this.isTriggerNode)return!1}return this.executable||this.hasForeignCredential},nodeTypeName(){if(this.nodeType){const e=this.$locale.shortNodeType(this.nodeType.name);return this.$locale.headerText({key:`headers.${e}.displayName`,fallback:this.nodeType.name})}return""},nodeTypeVersions(){return this.node?this.nodeTypesStore.getNodeVersions(this.node.type):[]},latestVersion(){return Math.max(...this.nodeTypeVersions)},isLatestNodeVersion(){var e;return!((e=this.node)!=null&&e.typeVersion)||this.latestVersion===this.node.typeVersion},executeButtonTooltip(){return this.node&&this.isLatestNodeVersion&&this.inputSize>1&&!Un(this.node.type,this.node.parameters)?this.$locale.baseText("nodeSettings.executeButtonTooltip.times",{interpolate:{inputSize:this.inputSize}}):""},nodeVersionTag(){return!this.nodeType||this.nodeType.hidden?this.$locale.baseText("nodeSettings.deprecated"):this.isLatestNodeVersion?this.$locale.baseText("nodeSettings.latest"):this.$locale.baseText("nodeSettings.latestVersion",{interpolate:{version:this.latestVersion.toString()}})},nodeTypeDescription(){var e;if((e=this.nodeType)!=null&&e.description){const t=this.$locale.shortNodeType(this.nodeType.name);return this.$locale.headerText({key:`headers.${t}.description`,fallback:this.nodeType.description})}else return this.$locale.baseText("nodeSettings.noDescriptionFound")},headerStyle(){return this.node?{"background-color":this.node.color}:{}},node(){return this.ndvStore.activeNode},parametersSetting(){return this.parameters.filter(e=>e.isNodeSetting)},parametersNoneSetting(){return this.parameters.filter(e=>!e.isNodeSetting)},parameters(){var e;return this.nodeType===null?[]:((e=this.nodeType)==null?void 0:e.properties)??[]},outputPanelEditMode(){return this.ndvStore.outputPanelEditMode},isCommunityNode(){return!!this.node&&Jt(this.node.type)},isTriggerNode(){return!!this.node&&this.nodeTypesStore.isTriggerNode(this.node.type)},workflowOwnerName(){return this.workflowsEEStore.getWorkflowOwnerName(`${this.workflowsStore.workflowId}`)},hasForeignCredential(){return this.foreignCredentials.length>0},usedCredentials(){return Object.values(this.workflowsStore.usedCredentials).filter(e=>{var t;return Object.values(((t=this.node)==null?void 0:t.credentials)||[]).find(n=>n.id===e.id)})},credentialOwnerName(){const e=this.usedCredentials?Object.values(this.usedCredentials).find(t=>t.id===this.foreignCredentials[0]):void 0;return this.credentialsStore.getCredentialOwnerName(e)}},props:{eventBus:{type:Object},dragging:{type:Boolean},pushRef:{type:String},nodeType:{type:Object},readOnly:{type:Boolean,default:!1},foreignCredentials:{type:Array,default:()=>[]},blockUI:{type:Boolean,default:!1},executable:{type:Boolean,default:!0},inputSize:{type:Number,default:0}},data(){return{nodeValid:!0,nodeColor:null,openPanel:"params",nodeValues:{color:"#ff0000",alwaysOutputData:!1,executeOnce:!1,notesInFlow:!1,onError:"stopWorkflow",retryOnFail:!1,maxTries:3,waitBetweenTries:1e3,notes:"",parameters:{}},nodeValuesInitialized:!1,nodeSettings:[],COMMUNITY_NODES_INSTALLATION_DOCS_URL:Qt,CUSTOM_NODES_DOCS_URL:oo,MAIN_NODE_PANEL_WIDTH:Se,hiddenIssuesInputs:[]}},watch:{node(){this.setNodeValues()}},mounted(){var e;this.populateHiddenIssuesSet(),this.populateSettings(),this.setNodeValues(),(e=this.eventBus)==null||e.on("openSettings",this.openSettings),this.nodeHelpers.updateNodeParameterIssues(this.node,this.nodeType),Bt.on("setHttpNodeParameters",this.setHttpNodeParameters)},beforeUnmount(){var e;(e=this.eventBus)==null||e.off("openSettings",this.openSettings),Bt.off("setHttpNodeParameters",this.setHttpNodeParameters)},methods:{setHttpNodeParameters(e){var t;try{this.valueChanged({node:(t=this.node)==null?void 0:t.name,name:"parameters",value:e})}catch{}},onSwitchSelectedNode(e){this.$emit("switchSelectedNode",e)},onOpenConnectionNodeCreator(e,t){this.$emit("openConnectionNodeCreator",e,t)},populateHiddenIssuesSet(){!this.node||!this.workflowsStore.isNodePristine(this.node.name)||(this.hiddenIssuesInputs.push("credentials"),this.parametersNoneSetting.forEach(e=>{this.hiddenIssuesInputs.push(e.name)}),this.workflowsStore.setNodePristine(this.node.name,!1))},populateSettings(){this.isExecutable&&!this.isTriggerNode&&this.nodeSettings.push({displayName:this.$locale.baseText("nodeSettings.alwaysOutputData.displayName"),name:"alwaysOutputData",type:"boolean",default:!1,noDataExpression:!0,description:this.$locale.baseText("nodeSettings.alwaysOutputData.description")},{displayName:this.$locale.baseText("nodeSettings.executeOnce.displayName"),name:"executeOnce",type:"boolean",default:!1,noDataExpression:!0,description:this.$locale.baseText("nodeSettings.executeOnce.description")},{displayName:this.$locale.baseText("nodeSettings.retryOnFail.displayName"),name:"retryOnFail",type:"boolean",default:!1,noDataExpression:!0,description:this.$locale.baseText("nodeSettings.retryOnFail.description")},{displayName:this.$locale.baseText("nodeSettings.maxTries.displayName"),name:"maxTries",type:"number",typeOptions:{minValue:2,maxValue:5},default:3,displayOptions:{show:{retryOnFail:[!0]}},noDataExpression:!0,description:this.$locale.baseText("nodeSettings.maxTries.description")},{displayName:this.$locale.baseText("nodeSettings.waitBetweenTries.displayName"),name:"waitBetweenTries",type:"number",typeOptions:{minValue:0,maxValue:5e3},default:1e3,displayOptions:{show:{retryOnFail:[!0]}},noDataExpression:!0,description:this.$locale.baseText("nodeSettings.waitBetweenTries.description")},{displayName:this.$locale.baseText("nodeSettings.onError.displayName"),name:"onError",type:"options",options:[{name:this.$locale.baseText("nodeSettings.onError.options.stopWorkflow.displayName"),value:"stopWorkflow",description:this.$locale.baseText("nodeSettings.onError.options.stopWorkflow.description")},{name:this.$locale.baseText("nodeSettings.onError.options.continueRegularOutput.displayName"),value:"continueRegularOutput",description:this.$locale.baseText("nodeSettings.onError.options.continueRegularOutput.description")},{name:this.$locale.baseText("nodeSettings.onError.options.continueErrorOutput.displayName"),value:"continueErrorOutput",description:this.$locale.baseText("nodeSettings.onError.options.continueErrorOutput.description")}],default:"stopWorkflow",noDataExpression:!0,description:this.$locale.baseText("nodeSettings.onError.description")}),this.nodeSettings.push({displayName:this.$locale.baseText("nodeSettings.notes.displayName"),name:"notes",type:"string",typeOptions:{rows:5},default:"",noDataExpression:!0,description:this.$locale.baseText("nodeSettings.notes.description")},{displayName:this.$locale.baseText("nodeSettings.notesInFlow.displayName"),name:"notesInFlow",type:"boolean",default:!1,noDataExpression:!0,description:this.$locale.baseText("nodeSettings.notesInFlow.description")})},onParameterBlur(e){this.hiddenIssuesInputs=this.hiddenIssuesInputs.filter(t=>t!==e)},onWorkflowActivate(){this.hiddenIssuesInputs=[],this.$emit("activate")},onNodeExecute(){var e;this.hiddenIssuesInputs=[],(e=this.$refs.subConnections)==null||e.showNodeInputsIssues(),this.$emit("execute")},setValue(e,t){const n=e.split(".");let i=n.pop(),l=!1;if(i!==void 0&&i.includes("[")){const w=i.match(/(.*)\[(\d+)\]$/);w&&(n.push(w[1]),i=w[2],l=!0)}if(n.length===0)if(t===null){if(i){const{[i]:w,...k}=this.nodeValues;this.nodeValues=k}}else this.nodeValues={...this.nodeValues,[i]:t};else if(t===null){let w=ye(this.nodeValues,n.join("."));if(i&&!Array.isArray(w)){const{[i]:k,...d}=w;w=d}if(l&&Array.isArray(w)&&w.length===0&&(i=n.pop(),w=ye(this.nodeValues,n.join(".")),i)){const{[i]:k,...d}=w;w=d}}else typeof t=="object"?Ne(ye(this.nodeValues,n.join(".")),i,Ke(t)):Ne(ye(this.nodeValues,n.join(".")),i,t);this.nodeValues={...this.nodeValues}},credentialSelected(e){this.workflowsStore.updateNodeProperties(e);const t=this.workflowsStore.getNodeByName(e.name);t&&this.nodeHelpers.updateNodeCredentialIssues(t),this.externalHooks.run("nodeSettings.credentialSelected",{updateInformation:e})},nameChanged(e){this.node&&this.historyStore.pushCommandToUndo(new so(this.node.name,e)),this.valueChanged({value:e,name:"name"})},valueChanged(e){var l,w,k;let t;e.hasOwnProperty("value")?t=e.value:t=ye(this.nodeValues,e.name);const n=e.node||((l=this.node)==null?void 0:l.name);if(!n)return;const i=this.workflowsStore.getNodeByName(n);if(i!==null)if(e.name==="onError"&&this.$emit("redrawRequired"),e.name==="name"){const d={value:t,oldValue:n,name:e.name};this.$emit("valueChanged",d)}else if(e.name==="parameters"){const d=this.nodeTypesStore.getNodeType(i.type,i.typeVersion);if(!d)return;let m=Xe(d.properties,i.parameters,!1,!1,i);const C=Object.assign({},m);if(m=Ke(m),e.value&&typeof e.value=="object")for(const f of Object.keys(e.value)){t=e.value[f];const N=f.split(".").slice(1).join("."),E=N.match(/(.*)\[(\d+)\]$/);if(e[f]===void 0&&E!==null){const O=E[1],_=E[2],B=ye(m,O);Array.isArray(B)&&(B.splice(parseInt(_,10),1),Ne(m,O,B))}else t===void 0?ut(m,N):Ne(m,N,t);this.externalHooks.run("nodeSettings.valueChanged",{parameterPath:N,newValue:t,parameters:this.parameters,oldNodeParameters:C})}m=Xe(d.properties,m,!0,!1,i);for(const f of Object.keys(m))m&&m[f]!==null&&m[f]!==void 0&&this.setValue(`parameters.${f}`,m[f]);if(m){const f={name:i.name,value:m};this.workflowsStore.setNodeParameters(f),this.nodeHelpers.updateNodeParameterIssuesByName(i.name),this.nodeHelpers.updateNodeCredentialIssuesByName(i.name)}}else if(e.name.startsWith("parameters.")){const d=this.nodeTypesStore.getNodeType(i.type,i.typeVersion);if(!d)return;e.type&&this.workflowsStore.nodeHasOutputConnection(i.name)&&((w=Wt[d.name])!=null&&w.eventTypes.includes(e.type))&&((k=Wt[d.name])!=null&&k.parameterPaths.includes(e.name))&&(this.workflowsStore.removeAllNodeConnection(i,{preserveInputConnections:!0}),this.showMessage({type:"warning",title:this.$locale.baseText("nodeSettings.outputCleared.title"),message:this.$locale.baseText("nodeSettings.outputCleared.message")}));let m=Xe(d.properties,i.parameters,!1,!1,i);const C=Object.assign({},m);m=Ke(m);const f=e.name.split(".").slice(1).join("."),N=f.match(/(.*)\[(\d+)\]$/);if(e.value===void 0&&N!==null){const O=N[1],_=N[2],B=ye(m,O);Array.isArray(B)&&(B.splice(parseInt(_,10),1),Ne(m,O,B))}else t===void 0?ut(m,f):Ne(m,f,t),this.removeMismatchedOptionValues(d,m,{name:f,value:t});m=Xe(d.properties,m,!0,!1,i);for(const O of Object.keys(m))m&&m[O]!==null&&m[O]!==void 0&&this.setValue(`parameters.${O}`,m[O]);const E={name:i.name,value:m};this.workflowsStore.setNodeParameters(E),this.externalHooks.run("nodeSettings.valueChanged",{parameterPath:f,newValue:t,parameters:this.parameters,oldNodeParameters:C}),this.nodeHelpers.updateNodeParameterIssuesByName(i.name),this.nodeHelpers.updateNodeCredentialIssuesByName(i.name),this.$telemetry.trackNodeParametersValuesChange(d.name,e)}else{this.nodeValues={...this.nodeValues,[e.name]:t};const d={name:i.name,key:e.name,value:t};this.workflowsStore.setNodeValue(d)}},removeMismatchedOptionValues(e,t,n){e.properties.forEach(i=>{var m,C;const l=i.displayOptions;if(!(t!=null&&t.hasOwnProperty(i.name))||!l||!i.options)return;const w=(m=l.show)==null?void 0:m[n.name],k=(C=l.hide)==null?void 0:C[n.name];if(w===void 0&&k===void 0)return;let d=!0;Ln(i.options)||Hn(i.options)?d=Object.keys(t).every(f=>(i.options??[]).find(N=>N.name===f)!==void 0):qn(i.options)&&(d=!!i.options.find(f=>f.value===t[i.name])),!d&&zn(t,i,this.node)&&ut(t,i.name)})},setNodeValues(){if(!this.node){this.nodeValuesInitialized=!0;return}if(this.nodeType!==null){this.nodeValid=!0;const e=[];this.node.color&&(e.push("color"),this.nodeValues={...this.nodeValues,color:this.node.color}),this.node.notes&&(e.push("notes"),this.nodeValues={...this.nodeValues,notes:this.node.notes}),this.node.alwaysOutputData&&(e.push("alwaysOutputData"),this.nodeValues={...this.nodeValues,alwaysOutputData:this.node.alwaysOutputData}),this.node.executeOnce&&(e.push("executeOnce"),this.nodeValues={...this.nodeValues,executeOnce:this.node.executeOnce}),this.node.continueOnFail&&(e.push("onError"),this.nodeValues={...this.nodeValues,onError:"continueRegularOutput"}),this.node.onError&&(e.push("onError"),this.nodeValues={...this.nodeValues,onError:this.node.onError}),this.node.notesInFlow&&(e.push("notesInFlow"),this.nodeValues={...this.nodeValues,notesInFlow:this.node.notesInFlow}),this.node.retryOnFail&&(e.push("retryOnFail"),this.nodeValues={...this.nodeValues,retryOnFail:this.node.retryOnFail}),this.node.maxTries&&(e.push("maxTries"),this.nodeValues={...this.nodeValues,maxTries:this.node.maxTries}),this.node.waitBetweenTries&&(e.push("waitBetweenTries"),this.nodeValues={...this.nodeValues,waitBetweenTries:this.node.waitBetweenTries});for(const t of this.nodeSettings)e.includes(t.name)||(this.nodeValues={...this.nodeValues,[t.name]:t.default});this.nodeValues={...this.nodeValues,parameters:Ke(this.node.parameters)}}else this.nodeValid=!1;this.nodeValuesInitialized=!0},onMissingNodeTextClick(e){e.target.localName==="a"&&this.$telemetry.track("user clicked cnr browse button",{source:"cnr missing node modal"})},onMissingNodeLearnMoreLinkClick(){var e,t;this.$telemetry.track("user clicked cnr docs link",{source:"missing node modal source",package_name:(e=this.node)==null?void 0:e.type.split(".")[0],node_type:(t=this.node)==null?void 0:t.type})},onStopExecution(){this.$emit("stopExecution")},openSettings(){this.openPanel="settings"},onTabSelect(e){this.openPanel=e}}}),Ks="_header_1pn0y_1",Xs="_warningIcon_1pn0y_5",Js="_descriptionContainer_1pn0y_10",Qs={header:Ks,warningIcon:Xs,descriptionContainer:Js},Zs={class:"header-side-menu"},ei={key:1},ti={key:0,class:"node-is-not-valid"},ni={class:"missingNodeTitleContainer mt-s mb-xs"},oi={class:"mb-l"},si=["href"],ii=["href","textContent"],ai={key:1,class:"node-parameters-wrapper","data-test-id":"node-parameters"},ri={key:1,class:"no-parameters"},li={key:2,class:"parameter-item parameter-notice","data-test-id":"node-parameters-http-notice"},di={class:"node-version","data-test-id":"node-version"};function ui(e,t,n,i,l,w){var F,G;const k=v("NodeTitle"),d=v("NodeExecuteButton"),m=v("NodeSettingsTabs"),C=v("font-awesome-icon"),f=v("n8n-text"),N=v("i18n-t"),E=v("n8n-link"),O=v("n8n-notice"),_=v("NodeWebhooks"),B=v("NodeCredentials"),S=v("ParameterInputList"),P=v("NDVSubConnections"),$=v("n8n-block-ui");return o(),c("div",{class:h({"node-settings":!0,dragging:e.dragging}),onKeydown:t[0]||(t[0]=Ce(()=>{},["stop"]))},[s("div",{class:h(e.$style.header)},[s("div",Zs,[e.node?(o(),D(k,{key:0,class:"node-name","model-value":e.node.name,"node-type":e.nodeType,"read-only":e.isReadOnly,"onUpdate:modelValue":e.nameChanged},null,8,["model-value","node-type","read-only","onUpdate:modelValue"])):y("",!0),e.isExecutable?(o(),c("div",ei,[!e.blockUI&&e.node&&e.nodeValid?(o(),D(d,{key:0,"data-test-id":"node-execute-button","node-name":e.node.name,disabled:e.outputPanelEditMode.enabled&&!e.isTriggerNode,tooltip:e.executeButtonTooltip,size:"small","telemetry-source":"parameters",onExecute:e.onNodeExecute,onStopExecution:e.onStopExecution},null,8,["node-name","disabled","tooltip","onExecute","onStopExecution"])):y("",!0)])):y("",!0)]),e.node&&e.nodeValid?(o(),D(m,{key:0,"model-value":e.openPanel,"node-type":e.nodeType,"push-ref":e.pushRef,"onUpdate:modelValue":e.onTabSelect},null,8,["model-value","node-type","push-ref","onUpdate:modelValue"])):y("",!0)],2),e.node&&!e.nodeValid?(o(),c("div",ti,[s("p",{class:h(e.$style.warningIcon)},[p(C,{icon:"exclamation-triangle"})],2),s("div",ni,[p(f,{size:"large",color:"text-dark",bold:""},{default:u(()=>[b(r(e.$locale.baseText("nodeSettings.communityNodeUnknown.title")),1)]),_:1})]),e.isCommunityNode?(o(),c("div",{key:0,class:h(e.$style.descriptionContainer)},[s("div",oi,[p(N,{keypath:"nodeSettings.communityNodeUnknown.description",tag:"span",onClick:e.onMissingNodeTextClick},{action:u(()=>[s("a",{href:`https://www.npmjs.com/package/${e.node.type.split(".")[0]}`,target:"_blank"},r(e.node.type.split(".")[0]),9,si)]),_:1},8,["onClick"])]),p(E,{to:e.COMMUNITY_NODES_INSTALLATION_DOCS_URL,onClick:e.onMissingNodeLearnMoreLinkClick},{default:u(()=>[b(r(e.$locale.baseText("nodeSettings.communityNodeUnknown.installLink.text")),1)]),_:1},8,["to","onClick"])],2)):(o(),D(N,{key:1,keypath:"nodeSettings.nodeTypeUnknown.description",tag:"span"},{action:u(()=>[s("a",{href:e.CUSTOM_NODES_DOCS_URL,target:"_blank",textContent:r(e.$locale.baseText("nodeSettings.nodeTypeUnknown.description.customNode"))},null,8,ii)]),_:1}))])):y("",!0),e.node&&e.nodeValid?(o(),c("div",ai,[e.hasForeignCredential?(o(),D(O,{key:0,content:e.$locale.baseText("nodeSettings.hasForeignCredential",{interpolate:{owner:e.credentialOwnerName}})},null,8,["content"])):y("",!0),de(s("div",null,[p(_,{node:e.node,"node-type":e.nodeType},null,8,["node","node-type"]),e.nodeValuesInitialized?(o(),D(S,{key:0,parameters:e.parametersNoneSetting,"hide-delete":!0,"node-values":e.nodeValues,"is-read-only":e.isReadOnly,"hidden-issues-inputs":e.hiddenIssuesInputs,path:"parameters",onValueChanged:e.valueChanged,onActivate:e.onWorkflowActivate,onParameterBlur:e.onParameterBlur},{default:u(()=>[p(B,{node:e.node,readonly:e.isReadOnly,"show-all":!0,"hide-issues":e.hiddenIssuesInputs.includes("credentials"),onCredentialSelected:e.credentialSelected,onValueChanged:e.valueChanged,onBlur:e.onParameterBlur},null,8,["node","readonly","hide-issues","onCredentialSelected","onValueChanged","onBlur"])]),_:1},8,["parameters","node-values","is-read-only","hidden-issues-inputs","onValueChanged","onActivate","onParameterBlur"])):y("",!0),e.parametersNoneSetting.length===0?(o(),c("div",ri,[p(f,null,{default:u(()=>[b(r(e.$locale.baseText("nodeSettings.thisNodeDoesNotHaveAnyParameters")),1)]),_:1})])):y("",!0),e.nodeHelpers.isCustomApiCallSelected(e.nodeValues)?(o(),c("div",li,[p(O,{content:e.$locale.baseText("nodeSettings.useTheHttpRequestNode",{interpolate:{nodeTypeDisplayName:((F=e.nodeType)==null?void 0:F.displayName)??""}})},null,8,["content"])])):y("",!0)],512),[[pe,e.openPanel==="params"]]),de(s("div",null,[p(S,{parameters:e.parametersSetting,"node-values":e.nodeValues,"is-read-only":e.isReadOnly,"hide-delete":!0,"hidden-issues-inputs":e.hiddenIssuesInputs,path:"parameters",onValueChanged:e.valueChanged,onParameterBlur:e.onParameterBlur},null,8,["parameters","node-values","is-read-only","hidden-issues-inputs","onValueChanged","onParameterBlur"]),p(S,{parameters:e.nodeSettings,"hide-delete":!0,"node-values":e.nodeValues,"is-read-only":e.isReadOnly,"hidden-issues-inputs":e.hiddenIssuesInputs,path:"",onValueChanged:e.valueChanged,onParameterBlur:e.onParameterBlur},null,8,["parameters","node-values","is-read-only","hidden-issues-inputs","onValueChanged","onParameterBlur"]),s("div",di,[b(r(e.$locale.baseText("nodeSettings.nodeVersion",{interpolate:{node:(G=e.nodeType)==null?void 0:G.displayName,version:(e.node.typeVersion??e.latestVersion).toString()}}))+" ",1),s("span",null,"("+r(e.nodeVersionTag)+")",1)])],512),[[pe,e.openPanel==="settings"]])])):y("",!0),e.node?(o(),D(P,{key:2,ref:"subConnections","root-node":e.node,onSwitchSelectedNode:e.onSwitchSelectedNode,onOpenConnectionNodeCreator:e.onOpenConnectionNodeCreator},null,8,["root-node","onSwitchSelectedNode","onOpenConnectionNodeCreator"])):y("",!0),p($,{show:e.blockUI},null,8,["show"])],34)}const pi={$style:Qs},ci=Z(Gs,[["render",ui],["__cssModules",pi],["__scopeId","data-v-6b8146a9"]]),hi=J({name:"Draggable",props:{disabled:{type:Boolean},type:{type:String,required:!0},data:{type:String},tag:{type:String,default:"div"},targetDataKey:{type:String}},data(){const e={x:-100,y:-100};return{isDragging:!1,draggablePosition:e,draggingEl:null,draggableStyle:{transform:`translate(${e.x}px, ${e.y}px)`},animationFrameId:0}},computed:{...fe(ae),canDrop(){return this.ndvStore.canDraggableDrop},stickyPosition(){return this.ndvStore.draggableStickyPos}},methods:{setDraggableStyle(){this.draggableStyle={transform:`translate(${this.draggablePosition.x}px, ${this.draggablePosition.y}px)`}},onDragStart(e){var n,i,l;if(this.disabled||(this.draggingEl=e.target,this.targetDataKey&&((n=this.draggingEl.dataset)==null?void 0:n.target)!==this.targetDataKey&&(this.draggingEl=this.draggingEl.closest(`[data-target="${this.targetDataKey}"]`)),this.targetDataKey&&((l=(i=this.draggingEl)==null?void 0:i.dataset)==null?void 0:l.target)!==this.targetDataKey))return;e.preventDefault(),e.stopPropagation(),this.isDragging=!1,this.draggablePosition={x:e.pageX,y:e.pageY},this.setDraggableStyle(),window.addEventListener("mousemove",this.onDrag),window.addEventListener("mouseup",this.onDragEnd);const t=document.activeElement;t&&t.blur()},onDrag(e){var t;if(e.preventDefault(),e.stopPropagation(),!this.disabled){if(!this.isDragging){this.isDragging=!0;const n=this.targetDataKey&&this.draggingEl?this.draggingEl.dataset.value:this.data||"";this.ndvStore.draggableStartDragging({type:this.type,data:n||"",dimensions:((t=this.draggingEl)==null?void 0:t.getBoundingClientRect())??null}),this.$emit("dragstart",this.draggingEl),document.body.style.cursor="grabbing"}this.animationFrameId=window.requestAnimationFrame(()=>{this.canDrop&&this.stickyPosition?this.draggablePosition={x:this.stickyPosition[0],y:this.stickyPosition[1]}:this.draggablePosition={x:e.pageX,y:e.pageY},this.setDraggableStyle(),this.$emit("drag",this.draggablePosition)})}},onDragEnd(){this.disabled||(document.body.style.cursor="unset",window.removeEventListener("mousemove",this.onDrag),window.removeEventListener("mouseup",this.onDragEnd),window.cancelAnimationFrame(this.animationFrameId),setTimeout(()=>{this.$emit("dragend",this.draggingEl),this.isDragging=!1,this.draggingEl=null,this.ndvStore.draggableStopDragging()},0))}}}),mi="_dragging_176yl_1",gi="_draggable_176yl_6",vi={dragging:mi,draggable:gi,"draggable-data-transfer":"_draggable-data-transfer_176yl_13"};function yi(e,t,n,i,l,w){return o(),D(un(e.tag),{ref:"wrapper",class:h({[e.$style.dragging]:e.isDragging}),onMousedown:e.onDragStart},{default:u(()=>[ne(e.$slots,"default",{isDragging:e.isDragging}),(o(),D(Ao,{to:"body"},[de(s("div",{ref:"draggable",class:h(e.$style.draggable),style:ke(e.draggableStyle)},[ne(e.$slots,"preview",{canDrop:e.canDrop,el:e.draggingEl})],6),[[pe,e.isDragging]])]))]),_:3},40,["class","onMousedown"])}const fi={$style:vi},wi=Z(hi,[["render",yi],["__cssModules",fi]]),bi=J({components:{Draggable:wi},props:{canMoveRight:{type:Boolean},canMoveLeft:{type:Boolean}},methods:{onDrag(e){this.$emit("drag",e)},onDragStart(){this.$emit("dragstart")},onDragEnd(){this.$emit("dragend")}}}),ki="_dragContainer_1fum9_1",Ti="_dragButton_1fum9_5",Di="_leftArrow_1fum9_19 _arrow_1fum9_28",Ni="_rightArrow_1fum9_20 _arrow_1fum9_28",_i="_visible_1fum9_24",Si="_arrow_1fum9_28",$i="_grid_1fum9_46",Ci={dragContainer:ki,dragButton:Ti,leftArrow:Di,rightArrow:Ni,visible:_i,arrow:Si,grid:$i},Pi=s("div",null,[s("div"),s("div"),s("div"),s("div"),s("div")],-1),Ii=s("div",null,[s("div"),s("div"),s("div"),s("div"),s("div")],-1),Ei=[Pi,Ii];function Ri(e,t,n,i,l,w){const k=v("font-awesome-icon"),d=v("Draggable");return o(),D(d,{type:"panel-resize",class:h(e.$style.dragContainer),onDrag:e.onDrag,onDragstart:e.onDragStart,onDragend:e.onDragEnd},{default:u(({isDragging:m})=>[s("div",{class:h({[e.$style.dragButton]:!0})},[e.canMoveLeft?(o(),c("span",{key:0,class:h({[e.$style.leftArrow]:!0,[e.$style.visible]:m})},[p(k,{icon:"arrow-left"})],2)):y("",!0),e.canMoveRight?(o(),c("span",{key:1,class:h({[e.$style.rightArrow]:!0,[e.$style.visible]:m})},[p(k,{icon:"arrow-right"})],2)):y("",!0),s("div",{class:h(e.$style.grid)},Ei,2)],2)]),_:1},8,["class","onDrag","onDragstart","onDragend"])}const Mi={$style:Ci},Oi=Z(bi,[["render",Ri],["__cssModules",Mi]]),Vi=["data-node-name","data-node-placement","onClick"],Ai=J({__name:"NDVFloatingNodes",props:{rootNode:{}},emits:["switchSelectedNode"],setup(e,{expose:t,emit:n}){const i=e,l=re(),w=ce(),k=l.getCurrentWorkflow(),d=n;function m(_){const B=N.value[_][0];B&&d("switchSelectedNode",B.node.name)}function C(_){if(_.shiftKey&&_.altKey&&(_.ctrlKey||_.metaKey)){const S={ArrowUp:"outputSub",ArrowRight:"outputMain",ArrowLeft:"inputMain"}[_.key]||null;S&&m(S)}}function f(_){return _.map(B=>{const S=l.getNodeByName(B);if(S){const P=w.getNodeType(S.type);if(P)return{node:S,nodeType:P}}return null}).filter(B=>B!==null)}const N=I(()=>{const _=i.rootNode.name;return{outputSub:f(k.getChildNodes(_,"ALL_NON_MAIN")),outputMain:f(k.getChildNodes(_,"main",1)),inputMain:f(k.getParentNodes(_,"main",1))}}),E=["outputSub","outputMain","inputMain"],O={outputSub:"bottom",outputMain:"left",inputMain:"right"};return yt(()=>{document.addEventListener("keydown",C,!0)}),pn(()=>{document.removeEventListener("keydown",C,!0)}),t({moveNodeDirection:m}),(_,B)=>{const S=v("n8n-tooltip");return o(),c("aside",{class:h(_.$style.floatingNodes)},[(o(),c(ie,null,ue(E,P=>s("ul",{key:P,class:h([_.$style.nodesList,_.$style[P]])},[(o(!0),c(ie,null,ue(N.value[P],({node:$,nodeType:F})=>(o(),c(ie,null,[$&&F?(o(),D(S,{key:$.name,placement:O[P],teleported:!1,offset:60},{content:u(()=>[b(r($.name),1)]),default:u(()=>[s("li",{class:h(_.$style.connectedNode),"data-test-id":"floating-node","data-node-name":$.name,"data-node-placement":P,onClick:G=>_.$emit("switchSelectedNode",$.name)},[p(Pe,{"node-type":F,"node-name":$.name,"tooltip-position":O[P],size:35,circle:""},null,8,["node-type","node-name","tooltip-position"])],10,Vi)]),_:2},1032,["placement"])):y("",!0)],64))),256))],2)),64))],2)}}}),Bi="_floatingNodes_1cc5r_1",Wi="_nodesList_1cc5r_15",Ui="_inputSub_1cc5r_29",Li="_outputSub_1cc5r_29",Hi="_outputMain_1cc5r_40",qi="_inputMain_1cc5r_40",zi="_connectedNode_1cc5r_63",xi={floatingNodes:Bi,nodesList:Wi,inputSub:Ui,outputSub:Li,outputMain:Hi,inputMain:qi,connectedNode:zi},Fi={$style:xi},ji=Z(Ai,[["__cssModules",Fi]]),be=24,Yt=80,_e=280,Yi=320,Gi=420,Ki={regular:Se,dragless:Se,unknown:Se,inputless:Se,wide:Se*2},Xi=J({name:"NDVDraggablePanels",components:{PanelDragButton:Oi,NDVFloatingNodes:ji},props:{isDraggable:{type:Boolean},hideInputAndOutput:{type:Boolean},position:{type:Number},nodeType:{type:Object,default:()=>({})}},setup(){const{callDebounced:e}=tn();return{callDebounced:e}},data(){return{windowWidth:1,isDragging:!1,MIN_PANEL_WIDTH:_e,initialized:!1}},mounted(){this.setTotalWidth(),this.mainPanelDimensions.relativeLeft===1&&this.mainPanelDimensions.relativeRight===1&&(this.setMainPanelWidth(),this.setPositions(this.getInitialLeftPosition(this.mainPanelDimensions.relativeWidth)),this.restorePositionData()),window.addEventListener("resize",this.setTotalWidth),this.$emit("init",{position:this.mainPanelDimensions.relativeLeft}),setTimeout(()=>{this.initialized=!0},0),tt.on("setPositionByName",this.setPositionByName)},beforeUnmount(){window.removeEventListener("resize",this.setTotalWidth),tt.off("setPositionByName",this.setPositionByName)},computed:{...fe(ae),mainPanelDimensions(){return this.ndvStore.getMainPanelDimensions(this.currentNodePaneType)},activeNode(){return this.ndvStore.activeNode},supportedResizeDirections(){const e=["right"];return this.isDraggable&&e.push("left"),e},currentNodePaneType(){return this.hasInputSlot?this.isDraggable?this.nodeType===null?"unknown":ye(this,"nodeType.parameterPane")||"regular":"dragless":"inputless"},hasInputSlot(){return this.$slots.input!==void 0},inputPanelMargin(){return this.pxToRelativeWidth(Yt)},minWindowWidth(){return 2*(be+Yt)+_e},minimumLeftPosition(){return this.windowWidth<this.minWindowWidth?this.pxToRelativeWidth(1):this.hasInputSlot?this.pxToRelativeWidth(be+20)+this.inputPanelMargin:this.pxToRelativeWidth(be)},maximumRightPosition(){return this.windowWidth<this.minWindowWidth?this.pxToRelativeWidth(1):this.pxToRelativeWidth(be+20)+this.inputPanelMargin},canMoveLeft(){return this.mainPanelDimensions.relativeLeft>this.minimumLeftPosition},canMoveRight(){return this.mainPanelDimensions.relativeRight>this.maximumRightPosition},mainPanelStyles(){return{left:`${this.relativeWidthToPx(this.mainPanelDimensions.relativeLeft)}px`,right:`${this.relativeWidthToPx(this.mainPanelDimensions.relativeRight)}px`}},inputPanelStyles(){return{right:`${this.relativeWidthToPx(this.calculatedPositions.inputPanelRelativeRight)}px`}},outputPanelStyles(){return{left:`${this.relativeWidthToPx(this.calculatedPositions.outputPanelRelativeLeft)}px`,transform:`translateX(-${this.relativeWidthToPx(this.outputPanelRelativeTranslate)}px)`}},calculatedPositions(){const e=this.$slots.input!==void 0,t=this.mainPanelDimensions.relativeLeft+this.mainPanelDimensions.relativeWidth;return{inputPanelRelativeRight:e?1-t+this.mainPanelDimensions.relativeWidth:1-this.pxToRelativeWidth(be),outputPanelRelativeLeft:t}},outputPanelRelativeTranslate(){const e=1-this.pxToRelativeWidth(_e+be),t=this.calculatedPositions.outputPanelRelativeLeft-e;return t>0?t:0},hasDoubleWidth(){return ye(this,"nodeType.parameterPane")==="wide"},fixedPanelWidth(){const e=this.hasDoubleWidth?2:1;return this.windowWidth>1700?Gi*e:Yi*e},isBelowMinWidthMainPanel(){const e=this.pxToRelativeWidth(_e);return this.mainPanelDimensions.relativeWidth<e}},watch:{windowWidth(e){const t=this.pxToRelativeWidth(_e);this.isBelowMinWidthMainPanel&&this.setMainPanelWidth(t);const n=this.minimumLeftPosition>this.mainPanelDimensions.relativeLeft,i=this.maximumRightPosition>this.mainPanelDimensions.relativeRight;e>this.minWindowWidth&&n&&i&&(this.setMainPanelWidth(t),this.setPositions(this.getInitialLeftPosition(this.mainPanelDimensions.relativeWidth))),this.setPositions(this.mainPanelDimensions.relativeLeft)}},methods:{onSwitchSelectedNode(e){this.$emit("switchSelectedNode",e)},getInitialLeftPosition(e){return this.currentNodePaneType==="dragless"?this.pxToRelativeWidth(be+1+this.fixedPanelWidth):this.hasInputSlot?.5-e/2:this.minimumLeftPosition},setMainPanelWidth(e){const t=e||this.pxToRelativeWidth(Ki[this.currentNodePaneType]);this.ndvStore.setMainPanelDimensions({panelType:this.currentNodePaneType,dimensions:{relativeWidth:t}})},setPositions(e){const t=e||1-this.calculatedPositions.inputPanelRelativeRight,n=1-t-this.mainPanelDimensions.relativeWidth,i=this.maximumRightPosition>n,l=this.minimumLeftPosition>t,w=this.currentNodePaneType==="inputless";if(l){this.ndvStore.setMainPanelDimensions({panelType:this.currentNodePaneType,dimensions:{relativeLeft:this.minimumLeftPosition,relativeRight:1-this.mainPanelDimensions.relativeWidth-this.minimumLeftPosition}});return}if(i){this.ndvStore.setMainPanelDimensions({panelType:this.currentNodePaneType,dimensions:{relativeLeft:1-this.mainPanelDimensions.relativeWidth-this.maximumRightPosition,relativeRight:this.maximumRightPosition}});return}this.ndvStore.setMainPanelDimensions({panelType:this.currentNodePaneType,dimensions:{relativeLeft:w?this.minimumLeftPosition:t,relativeRight:n}})},setPositionByName(e){const t={minLeft:this.minimumLeftPosition,maxRight:this.maximumRightPosition,initial:this.getInitialLeftPosition(this.mainPanelDimensions.relativeWidth)};this.setPositions(t[e])},pxToRelativeWidth(e){return e/this.windowWidth},relativeWidthToPx(e){return e*this.windowWidth},onResizeStart(){this.setTotalWidth()},onResizeEnd(){this.storePositionData()},onResizeDebounced(e){this.initialized&&this.callDebounced(this.onResize,{debounceTime:10,trailing:!0},e)},onResize({direction:e,x:t,width:n}){const i=this.pxToRelativeWidth(t),l=this.pxToRelativeWidth(n);e==="left"&&i<=this.minimumLeftPosition||e==="right"&&1-i<=this.maximumRightPosition||n<=_e||(this.setMainPanelWidth(l),this.setPositions(e==="left"?i:this.mainPanelDimensions.relativeLeft))},restorePositionData(){const e=Oe(`${Ut}_${this.currentNodePaneType}`).value;if(e){const t=parseFloat(e);this.setMainPanelWidth(t);const n=this.getInitialLeftPosition(t);return this.setPositions(n),!0}return!1},storePositionData(){Oe(`${Ut}_${this.currentNodePaneType}`).value=this.mainPanelDimensions.relativeWidth.toString()},onDragStart(){this.isDragging=!0,this.$emit("dragstart",{position:this.mainPanelDimensions.relativeLeft})},onDrag(e){const t=this.pxToRelativeWidth(e.x)-this.mainPanelDimensions.relativeWidth/2;this.setPositions(t)},onDragEnd(){setTimeout(()=>{this.isDragging=!1,this.$emit("dragend",{windowWidth:this.windowWidth,position:this.mainPanelDimensions.relativeLeft})},0),this.storePositionData()},setTotalWidth(){this.windowWidth=window.innerWidth},close(){this.$emit("close")}}}),Ji="_dataPanel_a6j4o_1",Qi="_inputPanel_a6j4o_10 _dataPanel_a6j4o_1",Zi="_outputPanel_a6j4o_18 _dataPanel_a6j4o_1",ea="_mainPanel_a6j4o_26",ta="_draggable_a6j4o_30",na="_mainPanelInner_a6j4o_34",oa="_dragging_a6j4o_41",sa="_dragButtonContainer_a6j4o_54",ia="_visible_a6j4o_70",aa={dataPanel:Ji,inputPanel:Qi,outputPanel:Zi,mainPanel:ea,draggable:ta,mainPanelInner:na,dragging:oa,"double-width":"_double-width_a6j4o_50",dragButtonContainer:sa,visible:ia};function ra(e,t,n,i,l,w){const k=v("NDVFloatingNodes"),d=v("PanelDragButton"),m=v("n8n-resize-wrapper");return o(),c("div",null,[e.activeNode?(o(),D(k,{key:0,"root-node":e.activeNode,onSwitchSelectedNode:e.onSwitchSelectedNode},null,8,["root-node","onSwitchSelectedNode"])):y("",!0),e.hideInputAndOutput?y("",!0):(o(),c("div",{key:1,class:h(e.$style.inputPanel),style:ke(e.inputPanelStyles)},[ne(e.$slots,"input")],6)),e.hideInputAndOutput?y("",!0):(o(),c("div",{key:2,class:h(e.$style.outputPanel),style:ke(e.outputPanelStyles)},[ne(e.$slots,"output")],6)),s("div",{class:h(e.$style.mainPanel),style:ke(e.mainPanelStyles)},[p(m,{"is-resizing-enabled":e.currentNodePaneType!=="unknown",width:e.relativeWidthToPx(e.mainPanelDimensions.relativeWidth),"min-width":e.MIN_PANEL_WIDTH,"grid-size":20,"supported-directions":e.supportedResizeDirections,onResize:e.onResizeDebounced,onResizestart:e.onResizeStart,onResizeend:e.onResizeEnd},{default:u(()=>[s("div",{class:h(e.$style.dragButtonContainer)},[!e.hideInputAndOutput&&e.isDraggable?(o(),D(d,{key:0,class:h({[e.$style.draggable]:!0,[e.$style.visible]:e.isDragging}),"can-move-left":e.canMoveLeft,"can-move-right":e.canMoveRight,onDragstart:e.onDragStart,onDrag:e.onDrag,onDragend:e.onDragEnd},null,8,["class","can-move-left","can-move-right","onDragstart","onDrag","onDragend"])):y("",!0)],2),s("div",{class:h({[e.$style.mainPanelInner]:!0,[e.$style.dragging]:e.isDragging})},[ne(e.$slots,"main")],2)]),_:3},8,["is-resizing-enabled","width","min-width","supported-directions","onResize","onResizestart","onResizeend"])],6)])}const la={$style:aa},da=Z(Xi,[["render",ra],["__cssModules",la]]),ua={allowVulnerableTags:!1,enforceHtmlBoundary:!1,disallowedTagsMode:"discard",allowedTags:[...Ot.defaults.allowedTags,"style","img","title"],allowedAttributes:{...Ot.defaults.allowedAttributes,"*":["class","style"]},transformTags:{head:""}},pa={name:"RunDataHtml",props:{inputHtml:{type:String,required:!0}},computed:{sanitizedHtml(){return xn(this.inputHtml,ua)}}},ca=["srcdoc"];function ha(e,t,n,i,l,w){return o(),c("iframe",{class:"__html-display",srcdoc:w.sanitizedHtml},null,8,ca)}const cn=Z(pa,[["render",ha]]),ma=Object.freeze(Object.defineProperty({__proto__:null,default:cn},Symbol.toStringTag,{value:"Module"})),ga={key:0},va={key:1},ya={key:2},fa={key:0,controls:"",autoplay:""},wa=["src","type"],ba={key:1,controls:"",autoplay:""},ka=["src","type"],Ta=["src"],Da=J({__name:"BinaryDataDisplayEmbed",props:{binaryData:{}},setup(e){const t=e,n=K(!0),i=K(""),l=K(!1),w=K(""),k=re(),d=I(()=>[t.binaryData.fileType??"other"]);return yt(async()=>{const{id:m,data:C,fileName:f,fileType:N,mimeType:E}=t.binaryData,O=N==="json",_=N==="html";if(!m)O||_?w.value=Kt(atob(C)):i.value="data:"+E+";base64,"+C;else try{const B=k.getBinaryUrl(m,"view",f??"",E);if(O||_){const S=await fetch(B,{credentials:"include"});w.value=await(O?S.json():S.text())}else i.value=B}catch{l.value=!0}n.value=!1}),(m,C)=>(o(),c("span",null,[n.value?(o(),c("div",ga,"Loading binary data...")):l.value?(o(),c("div",va,"Error loading binary data")):(o(),c("span",ya,[m.binaryData.fileType==="video"?(o(),c("video",fa,[s("source",{src:i.value,type:m.binaryData.mimeType},null,8,wa),b(" "+r(m.$locale.baseText("binaryDataDisplay.yourBrowserDoesNotSupport")),1)])):m.binaryData.fileType==="audio"?(o(),c("audio",ba,[s("source",{src:i.value,type:m.binaryData.mimeType},null,8,ka),b(" "+r(m.$locale.baseText("binaryDataDisplay.yourBrowserDoesNotSupport")),1)])):m.binaryData.fileType==="json"?(o(),D(x(qo),{key:2,data:w.value,deep:3,"show-length":!0},null,8,["data"])):m.binaryData.fileType==="html"?(o(),D(cn,{key:3,"input-html":w.value},null,8,["input-html"])):(o(),c("embed",{key:4,src:i.value,class:h(["binary-data",d.value])},null,10,Ta))]))]))}}),Na={class:"binary-data-window-wrapper"},_a={key:0},Sa=J({__name:"BinaryDataDisplay",props:{displayData:{},windowVisible:{type:Boolean}},emits:["close"],setup(e,{emit:t}){const n=e,i=t,l=Le(),w=re(),k=I(()=>{const C=w.getWorkflowExecution;if(C===null)return null;const f=C.data;return f?f.resultData.runData:null}),d=I(()=>{if(typeof n.displayData.node!="string"||typeof n.displayData.key!="string"||typeof n.displayData.runIndex!="number"||typeof n.displayData.index!="number"||typeof n.displayData.outputIndex!="number")return null;const C=l.getBinaryData(k.value,n.displayData.node,n.displayData.runIndex,n.displayData.outputIndex);return C.length===0||n.displayData.index>=C.length||C[n.displayData.index][n.displayData.key]===void 0?null:C[n.displayData.index][n.displayData.key]});function m(){return i("close"),!1}return(C,f)=>{var E;const N=v("n8n-button");return C.windowVisible?(o(),c("div",{key:0,class:h(["binary-data-window",(E=d.value)==null?void 0:E.fileType])},[p(N,{size:"small",class:"binary-data-window-back",title:C.$locale.baseText("binaryDataDisplay.backToOverviewPage"),icon:"arrow-left",label:C.$locale.baseText("binaryDataDisplay.backToList"),onClick:Ce(m,["stop"])},null,8,["title","label"]),s("div",Na,[d.value?(o(),D(Da,{key:1,"binary-data":d.value},null,8,["binary-data"])):(o(),c("div",_a,r(C.$locale.baseText("binaryDataDisplay.noDataFoundToDisplay")),1))])],2)):y("",!0)}}}),$a={class:"node-error-view"},Ca={class:"node-error-view__header"},Pa={class:"node-error-view__header-message","data-test-id":"node-error-message"},Ia=["innerHTML"],Ea={class:"node-error-view__info"},Ra={class:"node-error-view__info-header"},Ma={class:"node-error-view__info-title"},Oa={class:"copy-button"},Va={class:"node-error-view__info-content"},Aa={key:0,class:"node-error-view__details"},Ba={class:"node-error-view__details-summary"},Wa={class:"node-error-view__details-content"},Ua={key:0,class:"node-error-view__details-row"},La={class:"node-error-view__details-label"},Ha={class:"node-error-view__details-value"},qa={key:1,class:"node-error-view__details-row"},za={class:"node-error-view__details-label"},xa={class:"node-error-view__details-value"},Fa={key:2,class:"node-error-view__details-row"},ja={class:"node-error-view__details-label"},Ya={class:"node-error-view__details-value"},Ga={key:3,class:"node-error-view__details-row"},Ka={class:"node-error-view__details-label"},Xa={class:"node-error-view__details-value"},Ja={key:4,class:"node-error-view__details-row"},Qa={class:"node-error-view__details-label"},Za={class:"node-error-view__details-value"},er={class:"node-error-view__details"},tr={class:"node-error-view__details-summary"},nr={class:"node-error-view__details-content"},or={key:0,class:"node-error-view__details-row"},sr={class:"node-error-view__details-label"},ir={class:"node-error-view__details-value"},ar={key:1,class:"node-error-view__details-row"},rr={class:"node-error-view__details-label"},lr={class:"node-error-view__details-value"},dr={key:2,class:"node-error-view__details-row"},ur={class:"node-error-view__details-label"},pr={class:"node-error-view__details-value"},cr={key:3,class:"node-error-view__details-row"},hr={class:"node-error-view__details-label"},mr={class:"node-error-view__details-value"},gr={key:4,class:"node-error-view__details-row"},vr={class:"node-error-view__details-label"},yr={class:"node-error-view__details-value"},fr={class:"node-error-view__details-row"},wr={class:"node-error-view__details-label"},br={class:"node-error-view__details-value"},kr={key:5,class:"node-error-view__details-row"},Tr={class:"node-error-view__details-label"},Dr={class:"node-error-view__details-value"},Nr={key:6,class:"node-error-view__details-row"},_r={class:"node-error-view__details-label"},Sr={class:"node-error-view__details-value"},$r={key:7,class:"node-error-view__details-row"},Cr={class:"node-error-view__details-label"},Pr={class:"node-error-view__details-value"},Ir={key:8,class:"node-error-view__details-row"},Er={class:"node-error-view__details-label"},Rr={class:"node-error-view__details-value"},Mr=J({__name:"NodeErrorView",props:{error:{}},setup(e){const t=e,n=en(),i=Ue(),l=Be(),w=ce(),k=ae(),d=rn(),m=I(()=>JSON.stringify(t.error.cause??"").length<ln),C=I(()=>{const a=k.activeNode;if(!a)return[];const R=w.getNodeType(a.type,a.typeVersion);return R===null?[]:R.properties}),f=I(()=>{const a=d.urlBaseEditor;let R="Self Hosted";return a.includes("n8n.cloud")&&(R="Cloud"),d.versionCli+` (${R})`}),N=I(()=>k.ndvInputData.length>1),E=I(()=>{var A,V;const a=(A=t.error)==null?void 0:A.node;if(!a)return"Node";const R=w.getNodeType(a.type,a.typeVersion);return((V=R==null?void 0:R.defaults)==null?void 0:V.name)||a.name}),O=I(()=>{var A;const a=[];if(!((A=t.error.messages)!=null&&A.length))return[];const R=$();return Array.from(new Set(t.error.messages)).forEach(V=>{const T=/^\d{3} - \{/.test(V)?V.split(" - ").map(U=>U.trim()):[];for(const U of T)try{const Y=JSON.parse(U);if(typeof Y=="object"){a.push(Y);return}}catch{}V!==R&&a.push(V)}),a});function _(a){if(!a||"hidden"in a&&a.hidden)return l.baseText("nodeSettings.deprecated");const R=Math.max(...w.getNodeVersions(a.type));return R===a.typeVersion?l.baseText("nodeSettings.latest"):l.baseText("nodeSettings.latestVersion",{interpolate:{version:R.toString()}})}function B(a){return io(a.replace(/`(.*?)`/g,"<code>$1</code>"))}function S(){var A,V;if(t.error.name==="NodeOperationError"&&t.error.functionality==="configuration-node")return B(t.error.description+l.baseText("pushConnection.executionError.openNode",{interpolate:{node:t.error.node.name}}));if((A=t.error.context)!=null&&A.descriptionKey){const z={nodeCause:t.error.context.nodeCause,runIndex:t.error.context.runIndex??"0",itemIndex:t.error.context.itemIndex??"0"};return B(l.baseText(`nodeErrorView.description.${t.error.context.descriptionKey}`,{interpolate:z}))}if(!((V=t.error.context)!=null&&V.descriptionTemplate))return B(t.error.description??"");const R=F(t.error.context.parameter);return B(t.error.context.descriptionTemplate.replace(/%%PARAMETER%%/g,R))}function P(a){var V,z;let R="";return N.value&&!a.includes("[item ")&&((z=(V=t.error)==null?void 0:V.context)==null?void 0:z.itemIndex)!==void 0&&(R=` [item ${t.error.context.itemIndex}]`),a+R}function $(){var V,z,T;let a="";const R=t.error.name==="NodeOperationError"&&t.error.functionality==="configuration-node",A=U=>!!U&&typeof U=="string";if(R)a=l.baseText("nodeErrorView.errorSubNode",{interpolate:{node:t.error.node.name}});else if(A(t.error.message)&&(t.error.message===t.error.description||!((V=t.error.context)!=null&&V.messageTemplate)))a=t.error.message;else if(A((z=t.error.context)==null?void 0:z.messageTemplate)&&A((T=t.error.context)==null?void 0:T.parameter)){const U=F(t.error.context.parameter);a=t.error.context.messageTemplate.replace(/%%PARAMETER%%/g,U)}else Array.isArray(t.error.messages)&&t.error.messages.length>0&&(a=t.error.messages[0]);return P(a)}function F(a,R=!0){try{const A=G(C.value,a.split("."));if(!A.length)throw new Error;return R?A.map(V=>V.displayName).join(" > "):A.pop().displayName}catch{return`Could not find parameter "${a}"`}}function G(a,R){let A=R.shift();if(A===void 0)return[];const V=A.match(/(.*)\[([\d])\]$/);V!==null&&V.length>0&&(A=V[1]);const z=a.find(T=>T.name===A);if(z===void 0)throw new Error(`Could not find parameter "${A}"`);return R.length===0?[z]:z.hasOwnProperty("options")?[z,...G(z.options,R)]:z.hasOwnProperty("values")?[z,...G(z.values,R)]:[z]}function oe(){var z,T,U,Y,Q,te;const a=t.error,R={errorMessage:$()};a.description&&(R.errorDescription=a.description);const A={};(z=a==null?void 0:a.messages)!=null&&z.length&&(A.rawErrorMessage=a.messages),"httpCode"in a&&a.httpCode&&(A.httpCode=a.httpCode),a.context&&a.context.data&&(A.errorData=a.context.data),a.extra&&(A.errorExtra=a.extra),R.errorDetails=A;const V={};a.node&&(V.nodeName=a.node.name,V.nodeType=a.node.type,V.nodeVersion=a.node.typeVersion,(U=(T=a.node)==null?void 0:T.parameters)!=null&&U.resource&&(V.resource=a.node.parameters.resource),(Q=(Y=a==null?void 0:a.node)==null?void 0:Y.parameters)!=null&&Q.operation&&(V.operation=a.node.parameters.operation)),a.context&&(a.context.itemIndex!==void 0&&(V.itemIndex=a.context.itemIndex),a.context.runIndex!==void 0&&(V.runIndex=a.context.runIndex),a.context.parameter!==void 0&&(V.parameter=a.context.parameter),a.context.causeDetailed&&(V.causeDetailed=a.context.causeDetailed)),a.timestamp&&(V.time=new Date(a.timestamp).toLocaleString()),V.n8nVersion=f.value,V.binaryDataMode=d.binaryDataMode,a.cause&&(V.cause=a.cause),V.stackTrace=(te=a.stack)==null?void 0:te.split(`
`),R.n8nDetails=V,n.copy(JSON.stringify(R,null,2)),L()}function L(){i.showMessage({title:l.baseText("nodeErrorView.showMessage.title"),type:"info"})}return(a,R)=>{var T,U,Y,Q,te;const A=v("n8n-icon-button"),V=v("n8n-tooltip"),z=v("font-awesome-icon");return o(),c("div",$a,[s("div",Ca,[s("div",Pa,[s("div",null,r($()),1)]),a.error.description||(T=a.error.context)!=null&&T.descriptionKey?(o(),c("div",{key:0,"data-test-id":"node-error-description",class:"node-error-view__header-description",innerHTML:S()},null,8,Ia)):y("",!0)]),s("div",Ea,[s("div",Ra,[s("p",Ma,r(x(l).baseText("nodeErrorView.details.title")),1),p(V,{class:"item",content:x(l).baseText("nodeErrorView.copyToClipboard.tooltip"),placement:"left"},{default:u(()=>[s("div",Oa,[p(A,{icon:"copy",type:"secondary",size:"mini",text:"true","transparent-background":"transparent",onClick:oe})])]),_:1},8,["content"])]),s("div",Va,["httpCode"in a.error&&a.error.httpCode||O.value.length||(Y=(U=a.error)==null?void 0:U.context)!=null&&Y.data||a.error.extra?(o(),c("details",Aa,[s("summary",Ba,[p(z,{class:"node-error-view__details-icon",icon:"angle-right"}),b(" "+r(x(l).baseText("nodeErrorView.details.from",{interpolate:{node:`${E.value}`}})),1)]),s("div",Wa,["httpCode"in a.error&&a.error.httpCode?(o(),c("div",Ua,[s("p",La,r(x(l).baseText("nodeErrorView.errorCode")),1),s("p",Ha,[s("code",null,r(a.error.httpCode),1)])])):y("",!0),O.value.length?(o(),c("div",qa,[s("p",za,r(x(l).baseText("nodeErrorView.details.rawMessages")),1),s("div",xa,[(o(!0),c(ie,null,ue(O.value,(q,X)=>(o(),c("div",{key:X},[s("pre",null,[s("code",null,r(q),1)])]))),128))])])):y("",!0),(te=(Q=a.error)==null?void 0:Q.context)!=null&&te.data?(o(),c("div",Fa,[s("p",ja,r(x(l).baseText("nodeErrorView.details.errorData")),1),s("div",Ya,[s("pre",null,[s("code",null,r(a.error.context.data),1)])])])):y("",!0),a.error.extra?(o(),c("div",Ga,[s("p",Ka,r(x(l).baseText("nodeErrorView.details.errorExtra")),1),s("div",Xa,[s("pre",null,[s("code",null,r(a.error.extra),1)])])])):y("",!0),a.error.context&&a.error.context.request?(o(),c("div",Ja,[s("p",Qa,r(x(l).baseText("nodeErrorView.details.request")),1),s("div",Za,[s("pre",null,[s("code",null,r(a.error.context.request),1)])])])):y("",!0)])])):y("",!0),s("details",er,[s("summary",tr,[p(z,{class:"node-error-view__details-icon",icon:"angle-right"}),b(" "+r(x(l).baseText("nodeErrorView.details.info")),1)]),s("div",nr,[a.error.context&&a.error.context.itemIndex!==void 0?(o(),c("div",or,[s("p",sr,r(x(l).baseText("nodeErrorView.itemIndex")),1),s("p",ir,[s("code",null,r(a.error.context.itemIndex),1)])])):y("",!0),a.error.context&&a.error.context.runIndex!==void 0?(o(),c("div",ar,[s("p",rr,r(x(l).baseText("nodeErrorView.runIndex")),1),s("p",lr,[s("code",null,r(a.error.context.runIndex),1)])])):y("",!0),a.error.context&&a.error.context.parameter!==void 0?(o(),c("div",dr,[s("p",ur,r(x(l).baseText("nodeErrorView.inParameter")),1),s("p",pr,[s("code",null,r(F(`${a.error.context.parameter}`)),1)])])):y("",!0),a.error.node&&a.error.node.type?(o(),c("div",cr,[s("p",hr,r(x(l).baseText("nodeErrorView.details.nodeType")),1),s("p",mr,[s("code",null,r(a.error.node.type),1)])])):y("",!0),a.error.node&&a.error.node.typeVersion?(o(),c("div",gr,[s("p",vr,r(x(l).baseText("nodeErrorView.details.nodeVersion")),1),s("p",yr,[s("code",null,[s("span",null,r(a.error.node.typeVersion+" "),1),s("span",null,"("+r(_(a.error.node))+")",1)])])])):y("",!0),s("div",fr,[s("p",wr,r(x(l).baseText("nodeErrorView.details.n8nVersion")),1),s("p",br,[s("code",null,r(f.value),1)])]),a.error.timestamp?(o(),c("div",kr,[s("p",Tr,r(x(l).baseText("nodeErrorView.time")),1),s("p",Dr,[s("code",null,r(new Date(a.error.timestamp).toLocaleString()),1)])])):y("",!0),a.error.cause&&m.value?(o(),c("div",Nr,[s("p",_r,r(x(l).baseText("nodeErrorView.details.errorCause")),1),s("pre",Sr,[s("code",null,r(a.error.cause),1)])])):y("",!0),a.error.context&&a.error.context.causeDetailed?(o(),c("div",$r,[s("p",Cr,r(x(l).baseText("nodeErrorView.details.causeDetailed")),1),s("pre",Pr,[s("code",null,r(a.error.context.causeDetailed),1)])])):y("",!0),a.error.stack?(o(),c("div",Ir,[s("p",Er,r(x(l).baseText("nodeErrorView.details.stackTrace")),1),s("pre",Rr,[s("code",null,r(a.error.stack),1)])])):y("",!0)])])])])])}}}),Or={key:0},Vr={key:1},Ar={key:2},Br=J({__name:"RunDataPinButton",props:{tooltipContentsVisibility:{},dataPinningDocsUrl:{},pinnedData:{},disabled:{type:Boolean}},emits:["togglePinData"],setup(e,{emit:t}){const n=Be(),i=e,l=t,w=I(()=>i.tooltipContentsVisibility.pinDataDiscoveryTooltipContent?!0:void 0);return(k,d)=>{const m=v("n8n-link"),C=v("n8n-text"),f=v("n8n-icon-button"),N=v("n8n-tooltip");return o(),D(N,{placement:"bottom-end",visible:w.value},{content:u(()=>[i.tooltipContentsVisibility.binaryDataTooltipContent?(o(),c("div",Or,r(x(n).baseText("ndv.pinData.pin.binary")),1)):i.tooltipContentsVisibility.pinDataDiscoveryTooltipContent?(o(),c("div",Vr,r(x(n).baseText("node.discovery.pinData.ndv")),1)):(o(),c("div",Ar,[s("strong",null,r(x(n).baseText("ndv.pinData.pin.title")),1),p(C,{size:"small",tag:"p"},{default:u(()=>[b(r(x(n).baseText("ndv.pinData.pin.description"))+" ",1),p(m,{to:i.dataPinningDocsUrl,size:"small"},{default:u(()=>[b(r(x(n).baseText("ndv.pinData.pin.link")),1)]),_:1},8,["to"])]),_:1})]))]),default:u(()=>[p(f,{class:h(k.$style.pinDataButton),type:"tertiary",active:i.pinnedData.hasData.value,icon:"thumbtack",disabled:i.disabled,"data-test-id":"ndv-pin-data",onClick:d[0]||(d[0]=E=>l("togglePinData"))},null,8,["class","active","disabled"])]),_:1},8,["visible"])}}}),Wr="_pinDataButton_9zxxl_1",Ur={pinDataButton:Wr},Lr={$style:Ur},Hr=Z(Br,[["__cssModules",Lr]]),qr=He(async()=>await Ae(()=>import("./RunDataTable-BVAuNDP9.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40]))),zr=He(async()=>await Ae(()=>import("./RunDataJson-CMcOD-78.js"),__vite__mapDeps([41,2,3,4,5,6,7,8,35,9,1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,36,37,38,39,42]))),xr=He(async()=>await Ae(()=>import("./RunDataSchema-CF4YH-8y.js"),__vite__mapDeps([43,9,6,1,2,3,4,5,7,8,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,44]))),Fr=He(async()=>await Ae(()=>Promise.resolve().then(()=>ma),void 0)),jr=He(async()=>await Ae(()=>import("./RunDataSearch-DwB8g_cE.js"),__vite__mapDeps([45,9,6,1,2,3,4,5,7,8,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,46]))),Yr=J({name:"RunData",components:{BinaryDataDisplay:Sa,NodeErrorView:Mr,JsonEditor:ao,RunDataTable:qr,RunDataJson:zr,RunDataSchema:xr,RunDataHtml:Fr,RunDataSearch:jr,RunDataPinButton:Hr},props:{node:{type:Object,default:null},workflow:{type:Object,required:!0},runIndex:{type:Number,required:!0},linkedRuns:{type:Boolean},canLinkRuns:{type:Boolean},tooMuchDataTitle:{type:String},noDataInBranchMessage:{type:String},isExecuting:{type:Boolean},executingMessage:{type:String},pushRef:{type:String},paneType:{type:String,required:!0},overrideOutputs:{type:Array},mappingEnabled:{type:Boolean},distanceFromActive:{type:Number,default:0},blockUI:{type:Boolean,default:!1},isProductionExecutionPreview:{type:Boolean,default:!1},isPaneActive:{type:Boolean,default:!1}},setup(e){const t=ae(),n=Le(),i=We(),l=Bo(e,"node"),w=Ve(l,{runIndex:e.runIndex,displayMode:t.getPanelDisplayMode(e.paneType)});return{...Ue(),externalHooks:i,nodeHelpers:n,pinnedData:w}},data(){return{connectionType:me.Main,binaryDataPreviewActive:!1,dataSize:0,showData:!1,userEnabledShowData:!1,outputIndex:0,binaryDataDisplayVisible:!1,binaryDataDisplayData:null,MAX_DISPLAY_DATA_SIZE:ln,MAX_DISPLAY_DATA_SIZE_SCHEMA_VIEW:ro,MAX_DISPLAY_ITEMS_AUTO_ALL:lo,currentPage:1,pageSize:10,pageSizes:[10,25,50,100],pinDataDiscoveryTooltipVisible:!1,isControlledPinDataTooltip:!1,search:""}},computed:{...fe(ce,ae,re,uo,rn),isReadOnlyRoute(){var e,t;return((t=(e=this.$route)==null?void 0:e.meta)==null?void 0:t.readOnlyCanvas)===!0},activeNode(){return this.ndvStore.activeNode},dataPinningDocsUrl(){return po},dataEditingDocsUrl(){return co},displayMode(){return this.ndvStore.getPanelDisplayMode(this.paneType)},nodeType(){return this.node?this.nodeTypesStore.getNodeType(this.node.type,this.node.typeVersion):null},isSchemaView(){return this.displayMode==="schema"},isTriggerNode(){return this.node===null?!1:this.nodeTypesStore.isTriggerNode(this.node.type)},canPinData(){return this.node===null?!1:Ve(this.node).canPinNode(!1)&&!this.isPaneTypeInput&&this.pinnedData.isValidNodeType.value&&!(this.binaryData&&this.binaryData.length>0)},buttons(){var n;const e=[{label:this.$locale.baseText("runData.table"),value:"table"},{label:this.$locale.baseText("runData.json"),value:"json"}];this.binaryData.length&&e.push({label:this.$locale.baseText("runData.binary"),value:"binary"});const t={label:this.$locale.baseText("runData.schema"),value:"schema"};return this.isPaneTypeInput?e.unshift(t):e.push(t),this.isPaneTypeOutput&&((n=this.activeNode)==null?void 0:n.type)===Lt&&this.activeNode.parameters.operation==="generateHtmlTemplate"&&e.unshift({label:"HTML",value:"html"}),e},hasNodeRun(){return!!(!this.isExecuting&&this.node&&(this.workflowRunData&&this.workflowRunData.hasOwnProperty(this.node.name)||this.pinnedData.hasData.value))},isArtificialRecoveredEventItem(){var e,t,n;return!!((n=(t=(e=this.rawInputData)==null?void 0:e[0])==null?void 0:t.json)!=null&&n.isArtificialRecoveredEventItem)},subworkflowExecutionError(){var e;return{node:this.node,messages:[((e=this.workflowsStore.subWorkflowExecutionError)==null?void 0:e.message)??""]}},hasSubworkflowExecutionError(){return!!this.workflowsStore.subWorkflowExecutionError},workflowRunErrorAsNodeError(){var e,t,n,i;return this.node?(i=(n=(t=this.workflowRunData)==null?void 0:t[(e=this.node)==null?void 0:e.name])==null?void 0:n[this.runIndex])==null?void 0:i.error:null},hasRunError(){return!!(this.node&&this.workflowRunErrorAsNodeError)},executionHints(){var e,t,n;if(this.hasNodeRun){const i=this.node&&((n=(t=(e=this.workflowRunData)==null?void 0:e[this.node.name])==null?void 0:t[this.runIndex])==null?void 0:n.hints);if(i)return i}return[]},workflowExecution(){return this.workflowsStore.getWorkflowExecution},workflowRunData(){if(this.workflowExecution===null)return null;const e=this.workflowExecution.data;return e!=null&&e.resultData?e.resultData.runData:null},dataCount(){return this.getDataCount(this.runIndex,this.currentOutputIndex)},unfilteredDataCount(){return this.pinnedData.data.value?this.pinnedData.data.value.length:this.rawInputData.length},dataSizeInMB(){return(this.dataSize/(1024*1024)).toFixed(1)},maxOutputIndex(){if(this.node===null||this.runIndex===void 0)return 0;const e=this.workflowRunData;if(e===null||!e.hasOwnProperty(this.node.name)||e[this.node.name].length<this.runIndex)return 0;if(e[this.node.name][this.runIndex]){const t=e[this.node.name][this.runIndex].data;if(t!=null&&t.main)return t.main.length-1}return 0},currentPageOffset(){return this.pageSize*(this.currentPage-1)},maxRunIndex(){if(this.node===null)return 0;const e=this.workflowRunData;return e===null||!e.hasOwnProperty(this.node.name)?0:e[this.node.name].length?e[this.node.name].length-1:0},rawInputData(){return this.getRawInputData(this.runIndex,this.currentOutputIndex,this.connectionType)},unfilteredInputData(){return this.getPinDataOrLiveData(this.rawInputData)},inputData(){return this.getFilteredData(this.unfilteredInputData)},inputDataPage(){const e=this.pageSize*(this.currentPage-1);return this.inputData.slice(e,e+this.pageSize)},jsonData(){return Ht(this.inputData)},binaryData(){return this.node?this.nodeHelpers.getBinaryData(this.workflowRunData,this.node.name,this.runIndex,this.currentOutputIndex).filter(t=>!!(t&&Object.keys(t).length)):[]},inputHtml(){var e,t;return String(((t=(e=this.inputData[0])==null?void 0:e.json)==null?void 0:t.html)??"")},currentOutputIndex(){var e;return(e=this.overrideOutputs)!=null&&e.length&&!this.overrideOutputs.includes(this.outputIndex)?this.overrideOutputs[0]:this.outputIndex},branches(){var n;const e=i=>i.charAt(0).toLocaleUpperCase()+i.slice(1),t=[];for(let i=0;i<=this.maxOutputIndex;i++){if(this.overrideOutputs&&!this.overrideOutputs.includes(i))continue;const l=this.getRawInputData(this.runIndex,i).length,w=this.getDataCount(this.runIndex,i),k=this.search?this.$locale.baseText("ndv.search.items",{adjustToNumber:l,interpolate:{matched:w,total:l}}):this.$locale.baseText("ndv.output.items",{adjustToNumber:w,interpolate:{count:w}});let d=this.getOutputName(i);if(`${d}`==`${i}`)d=`${this.$locale.baseText("ndv.output")} ${d}`;else{const m=ho.includes(((n=this.node)==null?void 0:n.type)??"")?"":` ${this.$locale.baseText("ndv.output.branch")}`;d=e(`${this.getOutputName(i)}${m}`)}t.push({label:this.search&&w||l?`${d} (${k})`:d,value:i})}return t},editMode(){return this.isPaneTypeInput?{enabled:!1,value:""}:this.ndvStore.outputPanelEditMode},isPaneTypeInput(){return this.paneType==="input"},isPaneTypeOutput(){return this.paneType==="output"},readOnlyEnv(){return this.sourceControlStore.preferences.branchReadOnly},showIOSearch(){return this.hasNodeRun&&!this.hasRunError&&this.unfilteredInputData.length>0},extraControlsLocation(){return this.hasNodeRun?this.maxRunIndex>0?"runs":this.maxOutputIndex>0&&this.branches.length>1?"outputs":"items":"header"},showIoSearchNoMatchContent(){return this.hasNodeRun&&!this.inputData.length&&!!this.search},parentNodeOutputData(){var n;const e=this.workflow.getParentNodesByDepth(((n=this.node)==null?void 0:n.name)??"")[0];let t=[];return e!=null&&e.name&&(t=this.nodeHelpers.getNodeInputData(this.workflow.getNode(e==null?void 0:e.name),this.runIndex,this.outputIndex,"input",this.connectionType)),t}},watch:{node(e,t){e.id!==t.id&&this.init()},hasNodeRun(){this.paneType==="output"&&this.setDisplayMode()},inputDataPage:{handler(e){this.paneType&&e&&this.ndvStore.setNDVPanelDataIsEmpty({panel:this.paneType,isEmpty:e.every(t=>mo(t.json))})},immediate:!0,deep:!0},jsonData(e,t){Lo(e,t)||(this.refreshDataSize(),this.dataCount&&this.resetCurrentPageIfTooFar(),this.showPinDataDiscoveryTooltip(e))},binaryData(e,t){e.length&&!t.length&&this.displayMode!=="binary"?this.switchToBinary():!e.length&&this.displayMode==="binary"&&this.onDisplayModeChange("table")},currentOutputIndex(e){this.ndvStore.setNDVBranchIndex({pane:this.paneType,branchIndex:e})},search(e){this.$emit("search",e)}},mounted(){var e,t,n;if(this.init(),this.isPaneTypeInput||this.showPinDataDiscoveryTooltip(this.jsonData),this.ndvStore.setNDVBranchIndex({pane:this.paneType,branchIndex:this.currentOutputIndex}),this.paneType==="output"&&(this.setDisplayMode(),this.activatePane()),this.hasRunError&&this.node){const i=(n=(t=(e=this.workflowRunData)==null?void 0:e[this.node.name])==null?void 0:t[this.runIndex])==null?void 0:n.error;i&&["unknown error"].some(w=>i.message.toLowerCase().includes(w))&&this.$telemetry.track(`User encountered an error: "${i.message}"`,{node:this.node.type,errorMessage:i.message,nodeVersion:this.node.typeVersion,n8nVersion:this.rootStore.versionCli},{withPostHog:!0})}},beforeUnmount(){this.hidePinDataDiscoveryTooltip()},methods:{getResolvedNodeOutputs(){if(this.node&&this.nodeType){const e=this.workflow.getNode(this.node.name);if(e)return gt(this.workflow,e,this.nodeType)}return[]},shouldHintBeDisplayed(e){const{location:t,whenToDisplay:n}=e;return!(t&&(t==="ndv"&&!["input","output"].includes(this.paneType)||t==="inputPane"&&this.paneType!=="input"||t==="outputPane"&&this.paneType!=="output")||n==="afterExecution"&&!this.hasNodeRun||n==="beforeExecution"&&this.hasNodeRun)},getNodeHints(){var e;if(this.node&&this.nodeType){const t=this.workflow.getNode(this.node.name);if(t){const n=this.executionHints,i=Fn(this.workflow,t,this.nodeType,{runExecutionData:((e=this.workflowExecution)==null?void 0:e.data)??null,runIndex:this.runIndex,connectionInputData:this.parentNodeOutputData});return n.concat(i).filter(this.shouldHintBeDisplayed)}}return[]},onItemHover(e){if(e===null){this.$emit("itemHover",null);return}this.$emit("itemHover",{outputIndex:this.currentOutputIndex,itemIndex:e})},onClickDataPinningDocsLink(){var e;this.$telemetry.track("User clicked ndv link",{workflow_id:this.workflowsStore.workflowId,push_ref:this.pushRef,node_type:(e=this.activeNode)==null?void 0:e.type,pane:"output",type:"data-pinning-docs"})},showPinDataDiscoveryTooltip(e){if(!this.isTriggerNode)return;const t=Oe(zt).value;e&&e.length>0&&!this.isReadOnlyRoute&&!t&&(this.pinDataDiscoveryComplete(),setTimeout(()=>{this.isControlledPinDataTooltip=!0,this.pinDataDiscoveryTooltipVisible=!0,et.emit("data-pinning-discovery",{isTooltipVisible:!0})},500))},hidePinDataDiscoveryTooltip(){this.pinDataDiscoveryTooltipVisible&&(this.isControlledPinDataTooltip=!1,this.pinDataDiscoveryTooltipVisible=!1,et.emit("data-pinning-discovery",{isTooltipVisible:!1}))},pinDataDiscoveryComplete(){Oe(zt).value="true",Oe(yo).value="true"},enterEditMode({origin:e}){var l;const t=this.pinnedData.data.value?qt(this.pinnedData.data.value):Ht(this.rawInputData),i=(Array.isArray(t)?t.length:Object.keys(t??{}).length)>0?t:vo;this.ndvStore.setOutputPanelEditModeEnabled(!0),this.ndvStore.setOutputPanelEditModeValue(JSON.stringify(i,null,2)),this.$telemetry.track("User opened ndv edit state",{node_type:(l=this.activeNode)==null?void 0:l.type,click_type:e==="editIconButton"?"button":"link",push_ref:this.pushRef,run_index:this.runIndex,is_output_present:this.hasNodeRun||this.pinnedData.hasData.value,view:!this.hasNodeRun&&!this.pinnedData.hasData.value?"undefined":this.displayMode,is_data_pinned:this.pinnedData.hasData.value})},onClickCancelEdit(){this.ndvStore.setOutputPanelEditModeEnabled(!1),this.ndvStore.setOutputPanelEditModeValue(""),this.onExitEditMode({type:"cancel"})},onClickSaveEdit(){if(!this.node)return;const{value:e}=this.editMode;this.clearAllStickyNotifications();try{const t=qt(e);try{this.pinnedData.setData(t,"save-edit")}catch{return}}catch(t){this.showError(t,this.$locale.baseText("ndv.pinData.error.syntaxError.title"));return}this.ndvStore.setOutputPanelEditModeEnabled(!1),this.onExitEditMode({type:"save"})},onExitEditMode({type:e}){var t;this.$telemetry.track("User closed ndv edit state",{node_type:(t=this.activeNode)==null?void 0:t.type,push_ref:this.pushRef,run_index:this.runIndex,view:this.displayMode,type:e})},async onTogglePinData({source:e}){var t;if(this.node){if(e==="pin-icon-click"){const n={node_type:(t=this.activeNode)==null?void 0:t.type,push_ref:this.pushRef,run_index:this.runIndex,view:!this.hasNodeRun&&!this.pinnedData.hasData.value?"none":this.displayMode};this.externalHooks.run("runData.onTogglePinData",n),this.$telemetry.track("User clicked pin data icon",n)}if(this.nodeHelpers.updateNodeParameterIssues(this.node),this.pinnedData.hasData.value){this.pinnedData.unsetData(e);return}try{this.pinnedData.setData(this.rawInputData,"pin-icon-click")}catch(n){console.error(n);return}this.maxRunIndex>0&&this.showToast({title:this.$locale.baseText("ndv.pinData.pin.multipleRuns.title",{interpolate:{index:`${this.runIndex}`}}),message:this.$locale.baseText("ndv.pinData.pin.multipleRuns.description"),type:"success",duration:2e3}),this.hidePinDataDiscoveryTooltip(),this.pinDataDiscoveryComplete()}},switchToBinary(){this.onDisplayModeChange("binary")},onBranchChange(e){var t;this.outputIndex=e,this.$telemetry.track("User changed ndv branch",{push_ref:this.pushRef,branch_index:e,node_type:(t=this.activeNode)==null?void 0:t.type,node_type_input_selection:this.nodeType?this.nodeType.name:"",pane:this.paneType})},showTooMuchData(){var e;this.showData=!0,this.userEnabledShowData=!0,this.$telemetry.track("User clicked ndv button",{node_type:(e=this.activeNode)==null?void 0:e.type,workflow_id:this.workflowsStore.workflowId,push_ref:this.pushRef,pane:this.paneType,type:"showTooMuchData"})},toggleLinkRuns(){this.linkedRuns?this.unlinkRun():this.linkRun()},linkRun(){this.$emit("linkRun")},unlinkRun(){this.$emit("unlinkRun")},onCurrentPageChange(e){var t;this.currentPage=e,this.$telemetry.track("User changed ndv page",{node_type:(t=this.activeNode)==null?void 0:t.type,workflow_id:this.workflowsStore.workflowId,push_ref:this.pushRef,pane:this.paneType,page_selected:this.currentPage,page_size:this.pageSize,items_total:this.dataCount})},resetCurrentPageIfTooFar(){const e=Math.ceil(this.dataCount/this.pageSize);e<this.currentPage&&(this.currentPage=e)},onPageSizeChange(e){var t;this.pageSize=e,this.resetCurrentPageIfTooFar(),this.$telemetry.track("User changed ndv page size",{node_type:(t=this.activeNode)==null?void 0:t.type,workflow_id:this.workflowsStore.workflowId,push_ref:this.pushRef,pane:this.paneType,page_selected:this.currentPage,page_size:this.pageSize,items_total:this.dataCount})},onDisplayModeChange(e){const t=this.displayMode;this.ndvStore.setPanelDisplayMode({pane:this.paneType,mode:e}),this.userEnabledShowData||this.updateShowData();const n=this.$refs.dataContainer;if(n){const i=n.children[0];i&&i.scrollTo(0,0)}this.closeBinaryDataDisplay(),this.externalHooks.run("runData.displayModeChanged",{newValue:e,oldValue:t}),this.activeNode&&this.$telemetry.track("User changed ndv item view",{previous_view:t,new_view:e,node_type:this.activeNode.type,workflow_id:this.workflowsStore.workflowId,push_ref:this.pushRef,pane:this.paneType})},getRunLabel(e){let t=0;for(let l=0;l<=this.maxOutputIndex;l++)t+=this.getPinDataOrLiveData(this.getRawInputData(e-1,l)).length;const n=this.$locale.baseText("ndv.output.items",{adjustToNumber:t,interpolate:{count:t}}),i=t>0?` (${n})`:"";return e+this.$locale.baseText("ndv.output.of")+(this.maxRunIndex+1)+i},getRawInputData(e,t,n=me.Main){let i=[];return this.node&&(i=this.nodeHelpers.getNodeInputData(this.node,e,t,this.paneType,n)),i.length===0||!Array.isArray(i)?[]:i},getPinDataOrLiveData(e){return this.pinnedData.data.value&&!this.isProductionExecutionPreview?Array.isArray(this.pinnedData.data.value)?this.pinnedData.data.value.map(t=>({json:t})):[{json:this.pinnedData.data.value}]:e},getFilteredData(e){return this.search?(this.currentPage=1,e.filter(({json:t})=>go(t,this.search))):e},getDataCount(e,t,n=me.Main){var w,k,d;if(!this.node)return 0;if((d=(k=(w=this.workflowRunData)==null?void 0:w[this.node.name])==null?void 0:k[e])!=null&&d.hasOwnProperty("error"))return 1;const i=this.getRawInputData(e,t,n),l=this.getPinDataOrLiveData(i);return this.getFilteredData(l).length},init(){this.outputIndex=0,this.refreshDataSize(),this.closeBinaryDataDisplay();let e=[];if(this.nodeType!==null&&this.node!==null){const t=this.getResolvedNodeOutputs();e=Gt(t)}this.connectionType=e.length===0?me.Main:e[0],this.binaryData.length>0?this.ndvStore.setPanelDisplayMode({pane:this.paneType,mode:"binary"}):this.displayMode==="binary"&&this.ndvStore.setPanelDisplayMode({pane:this.paneType,mode:"table"})},closeBinaryDataDisplay(){this.binaryDataDisplayVisible=!1,this.binaryDataDisplayData=null},clearExecutionData(){this.workflowsStore.setWorkflowExecutionData(null),this.nodeHelpers.updateNodesExecutionIssues()},isViewable(e,t){const{fileType:n}=this.binaryData[e][t];return!!n&&["image","audio","video","text","json","pdf","html"].includes(n)},isDownloadable(e,t){const{mimeType:n,fileName:i}=this.binaryData[e][t];return!!(n&&i)},async downloadBinaryData(e,t){const{id:n,data:i,fileName:l,fileExtension:w,mimeType:k}=this.binaryData[e][t];if(n){const d=this.workflowsStore.getBinaryUrl(n,"download",l??"",k);pt.saveAs(d,[l,w].join("."));return}else{const d="data:"+k+";base64,"+i,m=await fetch(d).then(async C=>await C.blob());pt.saveAs(m,l)}},async downloadJsonData(){var n;const e=(((n=this.node)==null?void 0:n.name)??"").replace(/[^\w\d]/g,"_"),t=new Blob([JSON.stringify(this.rawInputData,null,2)],{type:"application/json"});pt.saveAs(t,`${e}.json`)},displayBinaryData(e,t){var l;const{data:n,mimeType:i}=this.binaryData[e][t];this.binaryDataDisplayVisible=!0,this.binaryDataDisplayData={node:(l=this.node)==null?void 0:l.name,runIndex:this.runIndex,outputIndex:this.currentOutputIndex,index:e,key:t,data:n,mimeType:i}},getOutputName(e){if(this.node===null)return e+1;const t=this.nodeType,n=this.getResolvedNodeOutputs(),i=n==null?void 0:n[e];return i&&Ho(i)?i==null?void 0:i.displayName:!(t!=null&&t.outputNames)||t.outputNames.length<=e?e+1:t.outputNames[e]},refreshDataSize(){this.showData=!1;const e=this.inputDataPage.map(n=>n.json),t=new Blob([JSON.stringify(e)]).size;this.dataSize=t,this.updateShowData()},updateShowData(){this.showData=this.isSchemaView&&this.dataSize<this.MAX_DISPLAY_DATA_SIZE_SCHEMA_VIEW||this.dataSize<this.MAX_DISPLAY_DATA_SIZE},onRunIndexChange(e){this.$emit("runChange",e)},enableNode(){if(this.node){const e={name:this.node.name,properties:{disabled:!this.node.disabled}};this.workflowsStore.updateNodeProperties(e)}},setDisplayMode(){if(!this.activeNode)return;this.activeNode.type===Lt&&this.activeNode.parameters.operation==="generateHtmlTemplate"&&this.ndvStore.setPanelDisplayMode({pane:"output",mode:"html"})},activatePane(){this.$emit("activatePane")},onSearchClear(){this.search="",document.dispatchEvent(new KeyboardEvent("keyup",{key:"/"}))}}}),Gr="_infoIcon_12qaq_1",Kr="_center_12qaq_5",Xr="_container_12qaq_19",Jr="_pinnedDataCallout_12qaq_28",Qr="_header_12qaq_36",Zr="_dataContainer_12qaq_50",el="_dataDisplay_12qaq_59",tl="_outputs_12qaq_71",nl="_tabs_12qaq_80",ol="_itemsCount_12qaq_87",sl="_itemsText_12qaq_95",il="_muted_12qaq_101",al="_inputSelect_12qaq_106",rl="_runSelector_12qaq_112",ll="_search_12qaq_124",dl="_runSelectorInner_12qaq_128",ul="_pagination_12qaq_132",pl="_pageSizeSelector_12qaq_142",cl="_binaryIndex_12qaq_148",hl="_binaryRow_12qaq_165",ml="_binaryCell_12qaq_170",gl="_binaryHeader_12qaq_182",vl="_binaryButtonContainer_12qaq_191",yl="_binaryValue_12qaq_202",fl="_displayModes_12qaq_207",wl="_tooltipContain_12qaq_213",bl="_spinner_12qaq_217",kl="_editMode_12qaq_228",Tl="_editModeBody_12qaq_237",Dl="_editModeFooter_12qaq_244",Nl="_editModeFooterInfotip_12qaq_254",_l="_editModeActions_12qaq_260",Sl="_stretchVertically_12qaq_267",$l="_uiBlocker_12qaq_271",Cl="_hintCallout_12qaq_276",Pl={infoIcon:Gr,center:Kr,container:Xr,pinnedDataCallout:Jr,header:Qr,dataContainer:Zr,"actions-group":"_actions-group_12qaq_55",dataDisplay:el,outputs:tl,tabs:nl,itemsCount:ol,itemsText:sl,muted:il,inputSelect:al,runSelector:rl,search:ll,runSelectorInner:dl,pagination:ul,pageSizeSelector:pl,binaryIndex:cl,binaryRow:hl,binaryCell:ml,binaryHeader:gl,binaryButtonContainer:vl,binaryValue:yl,displayModes:fl,tooltipContain:wl,spinner:bl,editMode:kl,editModeBody:Tl,editModeFooter:Dl,editModeFooterInfotip:Nl,editModeActions:_l,stretchVertically:Sl,uiBlocker:$l,hintCallout:Cl},Il={key:0,class:"ml-4xs"},El={key:0},Rl=["innerHTML"],Ml=["data-test-id"],Ol={key:0},Vl={key:1},Al={key:2},Bl={key:3},Wl={key:4};function Ul(e,t,n,i,l,w){var Y,Q,te,q,X;const k=v("n8n-link"),d=v("n8n-callout"),m=v("BinaryDataDisplay"),C=v("n8n-radio-buttons"),f=v("n8n-icon-button"),N=v("RunDataPinButton"),E=v("n8n-button"),O=v("n8n-option"),_=v("n8n-select"),B=v("n8n-tooltip"),S=v("RunDataSearch"),P=v("n8n-text"),$=v("n8n-tabs"),F=v("n8n-spinner"),G=v("JsonEditor"),oe=v("n8n-info-tip"),L=v("NodeErrorView"),a=v("i18n-t"),R=v("RunDataTable"),A=v("RunDataJson"),V=v("RunDataHtml"),z=v("RunDataSchema"),T=v("el-pagination"),U=v("n8n-block-ui");return o(),c("div",{class:h(["run-data",e.$style.container]),onMouseover:t[14]||(t[14]=(...M)=>e.activatePane&&e.activatePane(...M))},[e.canPinData&&e.pinnedData.hasData.value&&!e.editMode.enabled&&!e.isProductionExecutionPreview?(o(),D(d,{key:0,theme:"secondary",icon:"thumbtack",class:h(e.$style.pinnedDataCallout)},{trailingContent:u(()=>[p(k,{to:e.dataPinningDocsUrl,size:"small",theme:"secondary",bold:"",underline:"",onClick:e.onClickDataPinningDocsLink},{default:u(()=>[b(r(e.$locale.baseText("runData.pindata.learnMore")),1)]),_:1},8,["to","onClick"])]),default:u(()=>[b(r(e.$locale.baseText("runData.pindata.thisDataIsPinned"))+" ",1),!e.isReadOnlyRoute&&!e.readOnlyEnv?(o(),c("span",Il,[p(k,{theme:"secondary",size:"small",underline:"",bold:"",onClick:t[0]||(t[0]=Ce(M=>e.onTogglePinData({source:"banner-link"}),["stop"]))},{default:u(()=>[b(r(e.$locale.baseText("runData.pindata.unpin")),1)]),_:1})])):y("",!0)]),_:1},8,["class"])):y("",!0),e.binaryDataDisplayData?(o(),D(m,{key:1,"window-visible":e.binaryDataDisplayVisible,"display-data":e.binaryDataDisplayData,onClose:e.closeBinaryDataDisplay},null,8,["window-visible","display-data","onClose"])):y("",!0),s("div",{class:h(e.$style.header)},[ne(e.$slots,"header",{},void 0,!0),de(s("div",{class:h(e.$style.displayModes),"data-test-id":"run-data-pane-header",onClick:t[3]||(t[3]=Ce(()=>{},["stop"]))},[de(p(C,{"model-value":e.displayMode,options:e.buttons,"data-test-id":"ndv-run-data-display-mode","onUpdate:modelValue":e.onDisplayModeChange},null,8,["model-value","options","onUpdate:modelValue"]),[[pe,e.hasNodeRun&&(e.inputData.length||e.binaryData.length||e.search)&&!e.editMode.enabled]]),e.canPinData&&!e.isReadOnlyRoute&&!e.readOnlyEnv?de((o(),D(f,{key:0,title:e.$locale.baseText("runData.editOutput"),circle:!1,disabled:(Y=e.node)==null?void 0:Y.disabled,class:"ml-2xs",icon:"pencil-alt",type:"tertiary","data-test-id":"ndv-edit-pinned-data",onClick:t[1]||(t[1]=M=>e.enterEditMode({origin:"editIconButton"}))},null,8,["title","disabled"])),[[pe,!e.editMode.enabled]]):y("",!0),(e.canPinData||(Q=e.binaryData)!=null&&Q.length)&&e.rawInputData.length&&!e.editMode.enabled?(o(),D(N,{key:1,disabled:!e.rawInputData.length&&!e.pinnedData.hasData.value||e.isReadOnlyRoute||e.readOnlyEnv||!!((te=e.binaryData)!=null&&te.length),"tooltip-contents-visibility":{binaryDataTooltipContent:!!((q=e.binaryData)!=null&&q.length),pinDataDiscoveryTooltipContent:e.isControlledPinDataTooltip&&e.pinDataDiscoveryTooltipVisible},"data-pinning-docs-url":e.dataPinningDocsUrl,"pinned-data":e.pinnedData,onTogglePinData:t[2]||(t[2]=M=>e.onTogglePinData({source:"pin-icon-click"}))},null,8,["disabled","tooltip-contents-visibility","data-pinning-docs-url","pinned-data"])):y("",!0),de(s("div",{class:h(e.$style.editModeActions)},[p(E,{type:"tertiary",label:e.$locale.baseText("runData.editor.cancel"),onClick:e.onClickCancelEdit},null,8,["label","onClick"]),p(E,{class:"ml-2xs",type:"primary",label:e.$locale.baseText("runData.editor.save"),onClick:e.onClickSaveEdit},null,8,["label","onClick"])],2),[[pe,e.editMode.enabled]])],2),[[pe,!e.hasRunError]])],2),e.extraControlsLocation==="header"?(o(),c("div",{key:2,class:h(e.$style.inputSelect)},[ne(e.$slots,"input-select",{},void 0,!0)],2)):y("",!0),e.maxRunIndex>0?de((o(),c("div",{key:3,class:h(e.$style.runSelector)},[e.extraControlsLocation==="runs"?ne(e.$slots,"input-select",{key:0},void 0,!0):y("",!0),p(_,{"model-value":e.runIndex,class:h(e.$style.runSelectorInner),size:"small",teleported:"","data-test-id":"run-selector","onUpdate:modelValue":e.onRunIndexChange,onClick:t[4]||(t[4]=Ce(()=>{},["stop"]))},{prepend:u(()=>[b(r(e.$locale.baseText("ndv.output.run")),1)]),default:u(()=>[(o(!0),c(ie,null,ue(e.maxRunIndex+1,M=>(o(),D(O,{key:M,label:e.getRunLabel(M),value:M-1},null,8,["label","value"]))),128))]),_:1},8,["model-value","class","onUpdate:modelValue"]),e.canLinkRuns?(o(),D(B,{key:1,placement:"right"},{content:u(()=>[b(r(e.$locale.baseText(e.linkedRuns?"runData.unlinking.hint":"runData.linking.hint")),1)]),default:u(()=>[p(f,{icon:e.linkedRuns?"unlink":"link",class:"linkRun",text:"",type:"tertiary",size:"small","data-test-id":"link-run",onClick:e.toggleLinkRuns},null,8,["icon","onClick"])]),_:1})):y("",!0),ne(e.$slots,"run-info",{},void 0,!0),e.showIOSearch&&e.extraControlsLocation==="runs"?(o(),D(S,{key:2,modelValue:e.search,"onUpdate:modelValue":t[5]||(t[5]=M=>e.search=M),class:h(e.$style.search),"pane-type":e.paneType,"is-area-active":e.isPaneActive,onFocus:e.activatePane},null,8,["modelValue","class","pane-type","is-area-active","onFocus"])):y("",!0)],2)),[[pe,!e.editMode.enabled]]):y("",!0),ne(e.$slots,"before-data",{},void 0,!0),(o(!0),c(ie,null,ue(e.getNodeHints(),M=>(o(),D(d,{key:M.message,class:h(e.$style.hintCallout),theme:M.type||"info"},{default:u(()=>[p(P,{size:"small",innerHTML:M.message},null,8,["innerHTML"])]),_:2},1032,["class","theme"]))),128)),e.maxOutputIndex>0&&e.branches.length>1?(o(),c("div",{key:4,class:h(e.$style.outputs),"data-test-id":"branches"},[e.extraControlsLocation==="outputs"?ne(e.$slots,"input-select",{key:0},void 0,!0):y("",!0),s("div",{class:h(e.$style.tabs)},[p($,{"model-value":e.currentOutputIndex,options:e.branches,"onUpdate:modelValue":e.onBranchChange},null,8,["model-value","options","onUpdate:modelValue"]),e.showIOSearch&&e.extraControlsLocation==="outputs"?(o(),D(S,{key:0,modelValue:e.search,"onUpdate:modelValue":t[6]||(t[6]=M=>e.search=M),"pane-type":e.paneType,"is-area-active":e.isPaneActive,onFocus:e.activatePane},null,8,["modelValue","pane-type","is-area-active","onFocus"])):y("",!0)],2)],2)):!e.hasRunError&&e.hasNodeRun&&(e.dataCount>0&&e.maxRunIndex===0||e.search)&&!e.isArtificialRecoveredEventItem?de((o(),c("div",{key:5,class:h([e.$style.itemsCount,{[e.$style.muted]:e.paneType==="input"&&e.maxRunIndex===0}]),"data-test-id":"ndv-items-count"},[e.extraControlsLocation==="items"?ne(e.$slots,"input-select",{key:0},void 0,!0):y("",!0),e.search?(o(),D(P,{key:1,class:h(e.$style.itemsText)},{default:u(()=>[b(r(e.$locale.baseText("ndv.search.items",{adjustToNumber:e.unfilteredDataCount,interpolate:{matched:e.dataCount,total:e.unfilteredDataCount}})),1)]),_:1},8,["class"])):(o(),D(P,{key:2,class:h(e.$style.itemsText)},{default:u(()=>[b(r(e.$locale.baseText("ndv.output.items",{adjustToNumber:e.dataCount,interpolate:{count:e.dataCount}})),1)]),_:1},8,["class"])),e.showIOSearch&&e.extraControlsLocation==="items"?(o(),D(S,{key:3,modelValue:e.search,"onUpdate:modelValue":t[7]||(t[7]=M=>e.search=M),class:h(e.$style.search),"pane-type":e.paneType,"is-area-active":e.isPaneActive,onFocus:e.activatePane},null,8,["modelValue","class","pane-type","is-area-active","onFocus"])):y("",!0)],2)),[[pe,!e.editMode.enabled&&!e.hasRunError]]):y("",!0),s("div",{ref:"dataContainer",class:h(e.$style.dataContainer),"data-test-id":"ndv-data-container"},[e.isExecuting?(o(),c("div",{key:0,class:h(e.$style.center),"data-test-id":"ndv-executing"},[s("div",{class:h(e.$style.spinner)},[p(F,{type:"ring"})],2),p(P,null,{default:u(()=>[b(r(e.executingMessage),1)]),_:1})],2)):e.editMode.enabled?(o(),c("div",{key:1,class:h(e.$style.editMode)},[s("div",{class:h([e.$style.editModeBody,"ignore-key-press"])},[p(G,{"model-value":e.editMode.value,"fill-parent":!0,"onUpdate:modelValue":t[8]||(t[8]=M=>e.ndvStore.setOutputPanelEditModeValue(M))},null,8,["model-value"])],2),s("div",{class:h(e.$style.editModeFooter)},[p(oe,{bold:!1,class:h(e.$style.editModeFooterInfotip)},{default:u(()=>[b(r(e.$locale.baseText("runData.editor.copyDataInfo"))+" ",1),p(k,{to:e.dataEditingDocsUrl,size:"small"},{default:u(()=>[b(r(e.$locale.baseText("generic.learnMore")),1)]),_:1},8,["to"])]),_:1},8,["class"])],2)],2)):e.paneType==="output"&&e.hasSubworkflowExecutionError?(o(),c("div",{key:2,class:h(e.$style.stretchVertically)},[p(L,{error:e.subworkflowExecutionError,class:h(e.$style.errorDisplay)},null,8,["error","class"])],2)):e.hasNodeRun?e.paneType==="input"&&((X=e.node)!=null&&X.disabled)?(o(),c("div",{key:4,class:h(e.$style.center)},[p(P,null,{default:u(()=>[b(r(e.$locale.baseText("ndv.input.disabled",{interpolate:{nodeName:e.node.name}}))+" ",1),p(k,{onClick:e.enableNode},{default:u(()=>[b(r(e.$locale.baseText("ndv.input.disabled.cta")),1)]),_:1},8,["onClick"])]),_:1})],2)):e.hasNodeRun&&e.isArtificialRecoveredEventItem?(o(),c("div",{key:5,class:h(e.$style.center)},[ne(e.$slots,"recovered-artificial-output-data",{},void 0,!0)],2)):e.hasNodeRun&&e.hasRunError?(o(),c("div",{key:6,class:h(e.$style.stretchVertically)},[e.isPaneTypeInput?(o(),D(P,{key:0,class:h(e.$style.center),size:"large",tag:"p",bold:""},{default:u(()=>{var M;return[b(r(e.$locale.baseText("nodeErrorView.inputPanel.previousNodeError.title",{interpolate:{nodeName:((M=e.node)==null?void 0:M.name)??""}})),1)]}),_:1},8,["class"])):e.$slots.content?ne(e.$slots,"content",{key:1},void 0,!0):e.workflowRunErrorAsNodeError?(o(),D(L,{key:2,error:e.workflowRunErrorAsNodeError,class:h(e.$style.dataDisplay)},null,8,["error","class"])):y("",!0)],2)):e.hasNodeRun&&(!e.unfilteredDataCount||e.search&&!e.dataCount)&&e.branches.length>1?(o(),c("div",{key:7,class:h(e.$style.center)},[e.search?(o(),c("div",El,[p(P,{tag:"h3",size:"large"},{default:u(()=>[b(r(e.$locale.baseText("ndv.search.noMatch.title")),1)]),_:1}),p(P,null,{default:u(()=>[p(a,{keypath:"ndv.search.noMatch.description",tag:"span"},{link:u(()=>[s("a",{href:"#",onClick:t[9]||(t[9]=(...M)=>e.onSearchClear&&e.onSearchClear(...M))},r(e.$locale.baseText("ndv.search.noMatch.description.link")),1)]),_:1})]),_:1})])):(o(),D(P,{key:1},{default:u(()=>[b(r(e.noDataInBranchMessage),1)]),_:1}))],2)):e.hasNodeRun&&!e.inputData.length&&!e.search?(o(),c("div",{key:8,class:h(e.$style.center)},[ne(e.$slots,"no-output-data",{},()=>[b("xxx")],!0)],2)):e.hasNodeRun&&!e.showData?(o(),c("div",{key:9,class:h(e.$style.center)},[p(P,{bold:!0,color:"text-dark",size:"large"},{default:u(()=>[b(r(e.tooMuchDataTitle),1)]),_:1}),p(P,{align:"center",tag:"div"},{default:u(()=>[s("span",{innerHTML:e.$locale.baseText("ndv.output.tooMuchData.message",{interpolate:{size:e.dataSizeInMB}})},null,8,Rl)]),_:1}),p(E,{outline:"",label:e.$locale.baseText("ndv.output.tooMuchData.showDataAnyway"),onClick:e.showTooMuchData},null,8,["label","onClick"]),p(E,{size:"small",label:e.$locale.baseText("runData.downloadBinaryData"),onClick:t[10]||(t[10]=M=>e.downloadJsonData())},null,8,["label"])],2)):e.hasNodeRun&&e.$slots.content?ne(e.$slots,"content",{key:10},void 0,!0):e.hasNodeRun&&e.displayMode==="table"&&e.binaryData.length>0&&e.inputData.length===1&&Object.keys(e.jsonData[0]||{}).length===0?(o(),c("div",{key:11,class:h(e.$style.center)},[p(P,null,{default:u(()=>[b(r(e.$locale.baseText("runData.switchToBinary.info"))+" ",1),s("a",{onClick:t[11]||(t[11]=(...M)=>e.switchToBinary&&e.switchToBinary(...M))},r(e.$locale.baseText("runData.switchToBinary.binary")),1)]),_:1})],2)):e.showIoSearchNoMatchContent?(o(),c("div",{key:12,class:h(e.$style.center)},[p(P,{tag:"h3",size:"large"},{default:u(()=>[b(r(e.$locale.baseText("ndv.search.noMatch.title")),1)]),_:1}),p(P,null,{default:u(()=>[p(a,{keypath:"ndv.search.noMatch.description",tag:"span"},{link:u(()=>[s("a",{href:"#",onClick:t[12]||(t[12]=(...M)=>e.onSearchClear&&e.onSearchClear(...M))},r(e.$locale.baseText("ndv.search.noMatch.description.link")),1)]),_:1})]),_:1})],2)):e.hasNodeRun&&e.displayMode==="table"&&e.node?(o(),D(Je,{key:13},{default:u(()=>[p(R,{node:e.node,"input-data":e.inputDataPage,"mapping-enabled":e.mappingEnabled,"distance-from-active":e.distanceFromActive,"run-index":e.runIndex,"page-offset":e.currentPageOffset,"total-runs":e.maxRunIndex,"has-default-hover-state":e.paneType==="input"&&!e.search,search:e.search,onMounted:t[13]||(t[13]=M=>e.$emit("tableMounted",M)),onActiveRowChanged:e.onItemHover,onDisplayModeChange:e.onDisplayModeChange},null,8,["node","input-data","mapping-enabled","distance-from-active","run-index","page-offset","total-runs","has-default-hover-state","search","onActiveRowChanged","onDisplayModeChange"])]),_:1})):e.hasNodeRun&&e.displayMode==="json"&&e.node?(o(),D(Je,{key:14},{default:u(()=>[p(A,{"pane-type":e.paneType,"edit-mode":e.editMode,"push-ref":e.pushRef,node:e.node,"input-data":e.inputDataPage,"mapping-enabled":e.mappingEnabled,"distance-from-active":e.distanceFromActive,"run-index":e.runIndex,"total-runs":e.maxRunIndex,search:e.search},null,8,["pane-type","edit-mode","push-ref","node","input-data","mapping-enabled","distance-from-active","run-index","total-runs","search"])]),_:1})):e.hasNodeRun&&e.isPaneTypeOutput&&e.displayMode==="html"?(o(),D(Je,{key:15},{default:u(()=>[p(V,{"input-html":e.inputHtml},null,8,["input-html"])]),_:1})):e.hasNodeRun&&e.isSchemaView?(o(),D(Je,{key:16},{default:u(()=>[p(z,{data:e.jsonData,"mapping-enabled":e.mappingEnabled,"distance-from-active":e.distanceFromActive,node:e.node,"pane-type":e.paneType,"run-index":e.runIndex,"total-runs":e.maxRunIndex,search:e.search},null,8,["data","mapping-enabled","distance-from-active","node","pane-type","run-index","total-runs","search"])]),_:1})):e.displayMode==="binary"&&e.binaryData.length===0?(o(),c("div",{key:17,class:h(e.$style.center)},[p(P,{align:"center",tag:"div"},{default:u(()=>[b(r(e.$locale.baseText("runData.noBinaryDataFound")),1)]),_:1})],2)):e.displayMode==="binary"?(o(),c("div",{key:18,class:h(e.$style.dataDisplay)},[(o(!0),c(ie,null,ue(e.binaryData,(M,W)=>(o(),c("div",{key:W},[e.binaryData.length>1?(o(),c("div",{key:0,class:h(e.$style.binaryIndex)},[s("div",null,r(W+1),1)],2)):y("",!0),s("div",{class:h(e.$style.binaryRow)},[(o(!0),c(ie,null,ue(M,(le,ge)=>(o(),c("div",{key:W+"_"+ge,class:h(e.$style.binaryCell)},[s("div",{"data-test-id":"ndv-binary-data_"+W},[s("div",{class:h(e.$style.binaryHeader)},r(ge),3),le.fileName?(o(),c("div",Ol,[s("div",null,[p(P,{size:"small",bold:!0},{default:u(()=>[b(r(e.$locale.baseText("runData.fileName"))+": ",1)]),_:1})]),s("div",{class:h(e.$style.binaryValue)},r(le.fileName),3)])):y("",!0),le.directory?(o(),c("div",Vl,[s("div",null,[p(P,{size:"small",bold:!0},{default:u(()=>[b(r(e.$locale.baseText("runData.directory"))+": ",1)]),_:1})]),s("div",{class:h(e.$style.binaryValue)},r(le.directory),3)])):y("",!0),le.fileExtension?(o(),c("div",Al,[s("div",null,[p(P,{size:"small",bold:!0},{default:u(()=>[b(r(e.$locale.baseText("runData.fileExtension"))+":",1)]),_:1})]),s("div",{class:h(e.$style.binaryValue)},r(le.fileExtension),3)])):y("",!0),le.mimeType?(o(),c("div",Bl,[s("div",null,[p(P,{size:"small",bold:!0},{default:u(()=>[b(r(e.$locale.baseText("runData.mimeType"))+": ",1)]),_:1})]),s("div",{class:h(e.$style.binaryValue)},r(le.mimeType),3)])):y("",!0),le.fileSize?(o(),c("div",Wl,[s("div",null,[p(P,{size:"small",bold:!0},{default:u(()=>[b(r(e.$locale.baseText("runData.fileSize"))+": ",1)]),_:1})]),s("div",{class:h(e.$style.binaryValue)},r(le.fileSize),3)])):y("",!0),s("div",{class:h(e.$style.binaryButtonContainer)},[e.isViewable(W,ge)?(o(),D(E,{key:0,size:"small",label:e.$locale.baseText("runData.showBinaryData"),"data-test-id":"ndv-view-binary-data",onClick:Ee=>e.displayBinaryData(W,ge)},null,8,["label","onClick"])):y("",!0),e.isDownloadable(W,ge)?(o(),D(E,{key:1,size:"small",type:"secondary",label:e.$locale.baseText("runData.downloadBinaryData"),"data-test-id":"ndv-download-binary-data",onClick:Ee=>e.downloadBinaryData(W,ge)},null,8,["label","onClick"])):y("",!0)],2)],8,Ml)],2))),128))],2)]))),128))],2)):y("",!0):(o(),c("div",{key:3,class:h(e.$style.center)},[ne(e.$slots,"node-not-run",{},void 0,!0)],2))],2),e.hasNodeRun&&!e.hasRunError&&e.binaryData.length===0&&e.dataCount>e.pageSize&&!e.isSchemaView&&!e.isArtificialRecoveredEventItem?de((o(),c("div",{key:6,class:h(e.$style.pagination),"data-test-id":"ndv-data-pagination"},[p(T,{background:"","hide-on-single-page":!0,"current-page":e.currentPage,"pager-count":5,"page-size":e.pageSize,layout:"prev, pager, next",total:e.dataCount,"onUpdate:currentPage":e.onCurrentPageChange},null,8,["current-page","page-size","total","onUpdate:currentPage"]),s("div",{class:h(e.$style.pageSizeSelector)},[p(_,{size:"mini","model-value":e.pageSize,teleported:"","onUpdate:modelValue":e.onPageSizeChange},{prepend:u(()=>[b(r(e.$locale.baseText("ndv.output.pageSize")),1)]),default:u(()=>[(o(!0),c(ie,null,ue(e.pageSizes,M=>(o(),D(O,{key:M,label:M,value:M},null,8,["label","value"]))),128)),p(O,{label:e.$locale.baseText("ndv.output.all"),value:e.dataCount},null,8,["label","value"])]),_:1},8,["model-value","onUpdate:modelValue"])],2)],2)),[[pe,!e.editMode.enabled]]):y("",!0),p(U,{show:e.blockUI,class:h(e.$style.uiBlocker)},null,8,["show","class"])],34)}const Ll={$style:Pl},hn=Z(Yr,[["render",Ul],["__cssModules",Ll],["__scopeId","data-v-661e1f54"]]),Hl=J({props:{taskData:{},hasStaleData:Boolean,hasPinData:Boolean},computed:{theme(){var e;return(e=this.runTaskData)!=null&&e.error?"danger":"success"},runTaskData(){return this.taskData},runMetadata(){if(!this.runTaskData)return null;const{date:e,time:t}=zo(this.runTaskData.startTime);return{executionTime:this.runTaskData.executionTime,startTime:`${e} at ${t}`}}}}),ql=["innerHTML"],zl=s("br",null,null,-1),xl=s("br",null,null,-1);function Fl(e,t,n,i,l,w){const k=v("n8n-info-tip"),d=v("n8n-text");return e.hasStaleData?(o(),D(k,{key:0,theme:"warning",type:"tooltip","tooltip-placement":"right","data-test-id":"node-run-info-stale"},{default:u(()=>[s("span",{innerHTML:e.$locale.baseText(e.hasPinData?"ndv.output.staleDataWarning.pinData":"ndv.output.staleDataWarning.regular")},null,8,ql)]),_:1})):e.runMetadata?(o(),D(k,{key:1,type:"tooltip",theme:e.theme,"data-test-id":`node-run-info-${e.theme}`,"tooltip-placement":"right"},{default:u(()=>[s("div",null,[p(d,{bold:!0,size:"small"},{default:u(()=>[b(r(e.runTaskData.error?e.$locale.baseText("runData.executionStatus.failed"):e.$locale.baseText("runData.executionStatus.success")),1)]),_:1}),zl,p(d,{bold:!0,size:"small"},{default:u(()=>[b(r(e.$locale.baseText("runData.startTime")+":"),1)]),_:1}),b(" "+r(e.runMetadata.startTime),1),xl,p(d,{bold:!0,size:"small"},{default:u(()=>[b(r(e.$locale.baseText("runData.executionTime")+":"),1)]),_:1}),b(" "+r(e.runMetadata.executionTime)+" "+r(e.$locale.baseText("runData.ms")),1)])]),_:1},8,["theme","data-test-id"])):y("",!0)}const jl=Z(Hl,[["render",Fl]]),ct={REGULAR:"regular",LOGS:"logs"},Yl=J({name:"OutputPanel",components:{RunData:hn,RunInfo:jl,RunDataAi:xo},props:{workflow:{type:Object,required:!0},runIndex:{type:Number,required:!0},isReadOnly:{type:Boolean},linkedRuns:{type:Boolean},canLinkRuns:{type:Boolean},pushRef:{type:String},blockUI:{type:Boolean,default:!1},isProductionExecutionPreview:{type:Boolean,default:!1},isPaneActive:{type:Boolean,default:!1}},setup(e){const t=ae(),{activeNode:n}=Xt(t),{isSubNodeType:i}=fo({node:n});return{pinnedData:Ve(n,{runIndex:e.runIndex,displayMode:t.getPanelDisplayMode("output")}),isSubNodeType:i}},data(){return{outputMode:"regular",outputTypes:[{label:this.$locale.baseText("ndv.output.outType.regular"),value:ct.REGULAR},{label:this.$locale.baseText("ndv.output.outType.logs"),value:ct.LOGS}]}},computed:{...fe(ce,ae,Ie,re),node(){return this.ndvStore.activeNode??void 0},nodeType(){return this.node?this.nodeTypesStore.getNodeType(this.node.type,this.node.typeVersion):null},isTriggerNode(){return!!this.node&&this.nodeTypesStore.isTriggerNode(this.node.type)},hasAiMetadata(){if(this.node){const e=this.workflowsStore.getWorkflowResultDataByNodeName(this.node.name);return!e||!Array.isArray(e)||e.length===0?!1:!!e[e.length-1].metadata}return!1},isPollingTypeNode(){var e;return!!((e=this.nodeType)!=null&&e.polling)},isScheduleTrigger(){return!!(this.nodeType&&this.nodeType.group.includes("schedule"))},isNodeRunning(){return!!this.node&&this.workflowsStore.isNodeExecuting(this.node.name)},workflowRunning(){return this.uiStore.isActionActive("workflowRunning")},workflowExecution(){return this.workflowsStore.getWorkflowExecution},workflowRunData(){var t;if(this.workflowExecution===null)return null;const e=this.workflowExecution.data;return(t=e==null?void 0:e.resultData)!=null&&t.runData?e.resultData.runData:null},hasNodeRun(){return this.workflowsStore.subWorkflowExecutionError?!0:!!(this.node&&this.workflowRunData&&this.workflowRunData.hasOwnProperty(this.node.name))},runTaskData(){if(!this.node||this.workflowExecution===null)return null;const e=this.workflowRunData;return e===null||!e.hasOwnProperty(this.node.name)||e[this.node.name].length<=this.runIndex?null:e[this.node.name][this.runIndex]},runsCount(){if(this.node===null)return 0;const e=this.workflowRunData;return e===null||this.node&&!e.hasOwnProperty(this.node.name)?0:this.node&&e[this.node.name].length?e[this.node.name].length:0},staleData(){if(!this.node)return!1;const e=this.workflowsStore.getParametersLastUpdate(this.node.name);if(!e||!this.runTaskData)return!1;const t=this.runTaskData.startTime;return e>t},outputPanelEditMode(){return this.ndvStore.outputPanelEditMode},canPinData(){return this.pinnedData.isValidNodeType.value&&!this.isReadOnly}},methods:{insertTestData(){var t;const e=this.$refs.runData;e&&(e.enterEditMode({origin:"insertTestDataLink"}),this.$telemetry.track("User clicked ndv link",{workflow_id:this.workflowsStore.workflowId,push_ref:this.pushRef,node_type:(t=this.node)==null?void 0:t.type,pane:"output",type:"insert-test-data"}))},onLinkRun(){this.$emit("linkRun")},onUnlinkRun(){this.$emit("unlinkRun")},openSettings(){var e;this.$emit("openSettings"),this.$telemetry.track("User clicked ndv link",{node_type:(e=this.node)==null?void 0:e.type,workflow_id:this.workflowsStore.workflowId,push_ref:this.pushRef,pane:"output",type:"settings"})},onRunIndexChange(e){this.$emit("runChange",e)},onUpdateOutputMode(e){e===ct.LOGS?tt.emit("setPositionByName","minLeft"):tt.emit("setPositionByName","initial")},activatePane(){this.$emit("activatePane")}}}),Gl="_outputTypeSelect_f1tu5_6",Kl="_titleSection_f1tu5_11",Xl="_title_f1tu5_11",Jl="_noOutputData_f1tu5_27",Ql="_recoveredOutputData_f1tu5_37",Zl={outputTypeSelect:Gl,titleSection:Kl,title:Xl,noOutputData:Jl,recoveredOutputData:Ql},ed=s("br",null,null,-1);function td(e,t,n,i,l,w){const k=v("n8n-radio-buttons"),d=v("RunInfo"),m=v("n8n-text"),C=v("RunDataAi"),f=v("RunData");return o(),D(f,{ref:"runData",node:e.node,workflow:e.workflow,"run-index":e.runIndex,"linked-runs":e.linkedRuns,"can-link-runs":e.canLinkRuns,"too-much-data-title":e.$locale.baseText("ndv.output.tooMuchData.title"),"no-data-in-branch-message":e.$locale.baseText("ndv.output.noOutputDataInBranch"),"is-executing":e.isNodeRunning,"executing-message":e.$locale.baseText("ndv.output.executing"),"push-ref":e.pushRef,"block-u-i":e.blockUI,"is-production-execution-preview":e.isProductionExecutionPreview,"is-pane-active":e.isPaneActive,"pane-type":"output","data-output-type":e.outputMode,onActivatePane:e.activatePane,onRunChange:e.onRunIndexChange,onLinkRun:e.onLinkRun,onUnlinkRun:e.onUnlinkRun,onTableMounted:t[3]||(t[3]=N=>e.$emit("tableMounted",N)),onItemHover:t[4]||(t[4]=N=>e.$emit("itemHover",N)),onSearch:t[5]||(t[5]=N=>e.$emit("search",N))},ft({header:u(()=>[s("div",{class:h(e.$style.titleSection)},[e.hasAiMetadata?(o(),D(k,{key:0,modelValue:e.outputMode,"onUpdate:modelValue":[t[0]||(t[0]=N=>e.outputMode=N),e.onUpdateOutputMode],options:e.outputTypes},null,8,["modelValue","options","onUpdate:modelValue"])):(o(),c("span",{key:1,class:h(e.$style.title)},r(e.$locale.baseText(e.outputPanelEditMode.enabled?"ndv.output.edit":"ndv.output")),3)),e.hasNodeRun&&!e.pinnedData.hasData.value&&e.runsCount===1?de((o(),D(d,{key:2,"task-data":e.runTaskData,"has-stale-data":e.staleData,"has-pin-data":e.pinnedData.hasData.value},null,8,["task-data","has-stale-data","has-pin-data"])),[[pe,!e.outputPanelEditMode.enabled]]):y("",!0)],2)]),"node-not-run":u(()=>[e.workflowRunning&&!e.isTriggerNode?(o(),D(m,{key:0,"data-test-id":"ndv-output-waiting"},{default:u(()=>[b(r(e.$locale.baseText("ndv.output.waitingToRun")),1)]),_:1})):y("",!0),e.workflowRunning?y("",!0):(o(),D(m,{key:1,"data-test-id":"ndv-output-run-node-hint"},{default:u(()=>[e.isSubNodeType?(o(),c(ie,{key:0},[b(r(e.$locale.baseText("ndv.output.runNodeHintSubNode")),1)],64)):(o(),c(ie,{key:1},[b(r(e.$locale.baseText("ndv.output.runNodeHint"))+" ",1),e.canPinData?(o(),c("span",{key:0,onClick:t[1]||(t[1]=(...N)=>e.insertTestData&&e.insertTestData(...N))},[ed,b(" "+r(e.$locale.baseText("generic.or"))+" ",1),p(m,{tag:"a",size:"medium",color:"primary"},{default:u(()=>[b(r(e.$locale.baseText("ndv.output.insertTestData")),1)]),_:1})])):y("",!0)],64))]),_:1}))]),"no-output-data":u(()=>[p(m,{bold:!0,color:"text-dark",size:"large"},{default:u(()=>[b(r(e.$locale.baseText("ndv.output.noOutputData.title")),1)]),_:1}),p(m,null,{default:u(()=>[b(r(e.$locale.baseText("ndv.output.noOutputData.message"))+" ",1),s("a",{onClick:t[2]||(t[2]=(...N)=>e.openSettings&&e.openSettings(...N))},r(e.$locale.baseText("ndv.output.noOutputData.message.settings")),1),b(" "+r(e.$locale.baseText("ndv.output.noOutputData.message.settingsOption")),1)]),_:1})]),"recovered-artificial-output-data":u(()=>[s("div",{class:h(e.$style.recoveredOutputData)},[p(m,{tag:"div",bold:!0,color:"text-dark",size:"large"},{default:u(()=>[b(r(e.$locale.baseText("executionDetails.executionFailed.recoveredNodeTitle")),1)]),_:1}),p(m,null,{default:u(()=>[b(r(e.$locale.baseText("executionDetails.executionFailed.recoveredNodeMessage")),1)]),_:1})],2)]),_:2},[e.outputMode==="logs"&&e.node?{name:"content",fn:u(()=>[p(C,{node:e.node,"run-index":e.runIndex},null,8,["node","run-index"])]),key:"0"}:void 0,!e.pinnedData.hasData.value&&e.runsCount>1?{name:"run-info",fn:u(()=>[p(d,{"task-data":e.runTaskData},null,8,["task-data"])]),key:"1"}:void 0]),1032,["node","workflow","run-index","linked-runs","can-link-runs","too-much-data-title","no-data-in-branch-message","is-executing","executing-message","push-ref","block-u-i","is-production-execution-preview","is-pane-active","data-output-type","onActivatePane","onRunChange","onLinkRun","onUnlinkRun"])}const nd={$style:Zl},od=Z(Yl,[["render",td],["__cssModules",nd]]),sd={key:0},id=J({__name:"InputNodeSelect",props:{nodes:{},workflow:{},modelValue:{}},emits:["update:model-value"],setup(e,{emit:t}){const n=e,i=t,l=Be(),w=re(),k=ce(),d=ae(),m=I(()=>w.getNodeByName(n.modelValue??"")),C=I(()=>{const $=m.value;return $?k.getNodeType($.type,$.typeVersion):null}),f=I(()=>n.nodes.map($=>{const F=w.getNodeByName($.name);return F?{node:F,type:k.getNodeType(F.type,F.typeVersion),depth:$.depth}:null}).filter(wo)),N=I(()=>d.activeNode),E=I(()=>{const $=N.value;return $?k.getNodeType($.type,$.typeVersion):null}),O=I(()=>{const $=E.value;return $!==null&&$.inputs.length>1});function _($){var L;if(!$||!O.value||!N.value||!((L=E.value)!=null&&L.inputNames))return"";const oe=(n.workflow.connectionsByDestinationNode[N.value.name].main||[]).reduce((a,R,A)=>R[0]&&R[0].node===$?[...a,A]:a,[]).map(a=>{var R,A;return(A=(R=E.value)==null?void 0:R.inputNames)==null?void 0:A[a]});return oe.length===0?"":`(${oe.join(" & ")})`}function B($){const F=$.substring(0,30);return F.length<$.length?`${F}...`:F}function S($,F){const G=_($);return G||l.baseText("ndv.input.nodeDistance",{adjustToNumber:F})}function P($){i("update:model-value",$)}return($,F)=>{const G=v("n8n-option"),oe=v("n8n-select");return o(),D(oe,{"model-value":$.modelValue,"no-data-text":x(l).baseText("ndv.input.noNodesFound"),placeholder:x(l).baseText("ndv.input.parentNodes"),class:h($.$style.select),teleported:"",size:"small",filterable:"","data-test-id":"ndv-input-select","onUpdate:modelValue":P},{prefix:u(()=>{var L;return[p(Pe,{disabled:(L=m.value)==null?void 0:L.disabled,"node-type":C.value,size:14,shrink:!1},null,8,["disabled","node-type"])]}),default:u(()=>[(o(!0),c(ie,null,ue(f.value,({node:L,type:a,depth:R})=>(o(),D(G,{key:L.name,value:L.name,class:h([$.$style.node,{[$.$style.disabled]:L.disabled}]),label:`${B(L.name)} ${_(L.name)}`,"data-test-id":"ndv-input-option"},{default:u(()=>[p(Pe,{disabled:L.disabled,"node-type":a,size:14,shrink:!1,class:h($.$style.icon)},null,8,["disabled","node-type","class"]),s("span",{class:h($.$style.title)},[b(r(B(L.name))+" ",1),L.disabled?(o(),c("span",sd,"("+r(x(l).baseText("node.disabled"))+")",1)):y("",!0)],2),s("span",{class:h($.$style.subtitle)},r(S(L.name,R)),3)]),_:2},1032,["value","class","label"]))),128))]),_:1},8,["model-value","no-data-text","placeholder","class"])}}}),ad="_select_wn2ej_1",rd="_node_wn2ej_9",ld="_icon_wn2ej_17",dd="_title_wn2ej_21",ud="_disabled_wn2ej_26",pd="_subtitle_wn2ej_30",cd={select:ad,node:rd,icon:ld,title:dd,disabled:ud,subtitle:pd},hd={$style:cd},md=Z(id,[["__cssModules",hd]]),gd={},vd={width:"112",height:"80",viewBox:"0 0 112 80",fill:"none",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},yd=Wo('<mask id="mask0_489_46042" style="mask-type:alpha;" maskUnits="userSpaceOnUse" x="0" y="0" width="112" height="80"><rect width="112" height="80" fill="url(#paint0_linear_489_46042)"></rect></mask><g mask="url(#mask0_489_46042)"><rect x="-0.5" width="112" height="80" fill="url(#pattern0)" fill-opacity="0.6"></rect></g><defs><pattern id="pattern0" patternContentUnits="objectBoundingBox" width="1" height="1"><use xlink:href="#image0_489_46042" transform="scale(0.00357143 0.005)"></use></pattern><linearGradient id="paint0_linear_489_46042" x1="90.5" y1="40.4494" x2="112.5" y2="40.4494" gradientUnits="userSpaceOnUse"><stop></stop><stop offset="1" stop-color="white" stop-opacity="0"></stop></linearGradient><image id="image0_489_46042" width="280" height="200" xlink:href="data:image/png;base64,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"></image></defs>',3),fd=[yd];function wd(e,t){return o(),c("svg",vd,fd)}const bd=Z(gd,[["render",wd]]),kd=J({name:"InputPanel",components:{RunData:hn,NodeExecuteButton:bt,WireMeUp:bd,InputNodeSelect:md},props:{currentNodeName:{type:String},runIndex:{type:Number,required:!0},linkedRuns:{type:Boolean},workflow:{type:Object,required:!0},canLinkRuns:{type:Boolean},pushRef:{type:String},readOnly:{type:Boolean},isProductionExecutionPreview:{type:Boolean,default:!1},isPaneActive:{type:Boolean,default:!1}},emits:["itemHover","tableMounted","linkRun","unlinkRun","runChange","search","changeInputNode","execute","activatePane"],data(){return{showDraggableHintWithDelay:!1,draggableHintShown:!1,inputMode:"debugging",mappedNode:null,inputModes:[{value:"mapping",label:this.$locale.baseText("ndv.input.mapping")},{value:"debugging",label:this.$locale.baseText("ndv.input.debugging")}]}},computed:{...fe(ce,ae,re,Ie),focusedMappableInput(){return this.ndvStore.focusedMappableInput},isUserOnboarded(){return this.ndvStore.isMappingOnboarded},isMappingMode(){return this.isActiveNodeConfig&&this.inputMode==="mapping"},showDraggableHint(){const e=[dn,on,bo,ko];return!this.currentNode||e.includes(this.currentNode.type)?!1:!!this.focusedMappableInput&&!this.isUserOnboarded},isActiveNodeConfig(){var n,i;let e=((n=this.activeNodeType)==null?void 0:n.inputs)??[],t=((i=this.activeNodeType)==null?void 0:i.outputs)??[];if(this.activeNode!==null&&this.workflow!==null){const l=this.workflow.getNode(this.activeNode.name);e=mt(this.workflow,l,this.activeNodeType),t=gt(this.workflow,l,this.activeNodeType)}else Array.isArray(e)||(e=[]),Array.isArray(t)||(t=[]);return!!(e.length===0||e.every(l=>this.filterOutConnectionType(l,me.Main))&&t.find(l=>this.filterOutConnectionType(l,me.Main)))},isMappingEnabled(){return this.readOnly?!1:this.isActiveNodeConfig?this.isMappingMode&&this.mappedNode!==null:!0},isExecutingPrevious(){if(!this.workflowRunning)return!1;const e=this.workflowsStore.executedNode,t=this.workflowsStore.executingNode;return this.activeNode&&e===this.activeNode.name&&!this.workflowsStore.isNodeExecuting(this.activeNode.name)?!0:t.length||e?!!this.parentNodes.find(n=>this.workflowsStore.isNodeExecuting(n.name)||n.name===e):!1},workflowRunning(){return this.uiStore.isActionActive("workflowRunning")},activeNode(){return this.ndvStore.activeNode},rootNode(){var n;return this.workflow.getChildNodes(((n=this.activeNode)==null?void 0:n.name)??"","ALL_NON_MAIN")[0]},rootNodesParents(){return[...this.workflow.getParentNodes(this.rootNode,"main")].reverse().map(n=>({name:n,depth:1,indicies:[]}))},currentNode(){return this.isActiveNodeConfig?this.mappedNode?this.workflowsStore.getNodeByName(this.mappedNode):this.activeNode:this.workflowsStore.getNodeByName(this.currentNodeName??"")},connectedCurrentNodeOutputs(){const e=this.parentNodes.find(({name:t})=>t===this.currentNodeName);if(e)return e.indicies},parentNodes(){if(!this.activeNode)return[];const e=this.workflow.getParentNodesByDepth(this.activeNode.name);return e.filter(({name:t},n)=>this.activeNode&&t!==this.activeNode.name&&e.findIndex(i=>i.name===t)===n)},currentNodeDepth(){const e=this.parentNodes.find(t=>this.currentNode&&t.name===this.currentNode.name);return e?e.depth:-1},activeNodeType(){return this.activeNode?this.nodeTypesStore.getNodeType(this.activeNode.type,this.activeNode.typeVersion):null},isMultiInputNode(){return this.activeNodeType!==null&&this.activeNodeType.inputs.length>1}},watch:{inputMode:{handler(e){var t;this.onRunIndexChange(-1),e==="mapping"?(this.onUnlinkRun(),this.mappedNode=((t=this.rootNodesParents[0])==null?void 0:t.name)??null):this.mappedNode=null},immediate:!0},showDraggableHint(e,t){e&&!t?setTimeout(()=>{this.draggableHintShown||(this.showDraggableHintWithDelay=this.showDraggableHint,this.showDraggableHintWithDelay&&(this.draggableHintShown=!0,this.$telemetry.track("User viewed data mapping tooltip",{type:"unexecuted input pane"})))},1e3):e||(this.showDraggableHintWithDelay=!1)}},methods:{filterOutConnectionType(e,t){return e?typeof e=="string"?e!==t:e.type!==t:!1},onInputModeChange(e){this.inputMode=e},onMappedNodeSelected(e){this.mappedNode=e,this.onRunIndexChange(0),this.onUnlinkRun()},onNodeExecute(){this.$emit("execute"),this.activeNode&&this.$telemetry.track("User clicked ndv button",{node_type:this.activeNode.type,workflow_id:this.workflowsStore.workflowId,push_ref:this.pushRef,pane:"input",type:"executePrevious"})},onRunIndexChange(e){this.$emit("runChange",e)},onLinkRun(){this.$emit("linkRun")},onUnlinkRun(){this.$emit("unlinkRun")},onInputNodeChange(e){const t=this.parentNodes.findIndex(n=>n.name===e)+1;this.$emit("changeInputNode",e,t)},onConnectionHelpClick(){this.activeNode&&this.$telemetry.track("User clicked ndv link",{node_type:this.activeNode.type,workflow_id:this.workflowsStore.workflowId,push_ref:this.pushRef,pane:"input",type:"not-connected-help"})},activatePane(){this.$emit("activatePane")}}}),Td="_mappedNode_17wvq_1",Dd="_titleSection_17wvq_5",Nd="_inputModeTab_17wvq_14",_d="_noOutputData_17wvq_18",Sd="_recoveredOutputData_17wvq_28",$d="_notConnected_17wvq_37",Cd="_title_17wvq_5",Pd={mappedNode:Td,titleSection:Dd,inputModeTab:Nd,noOutputData:_d,recoveredOutputData:Sd,notConnected:$d,title:Cd},Id=["innerHTML"];function Ed(e,t,n,i,l,w){const k=v("n8n-radio-buttons"),d=v("InputNodeSelect"),m=v("n8n-text"),C=v("NodeExecuteButton"),f=v("n8n-tooltip"),N=v("WireMeUp"),E=v("RunData");return o(),D(E,{node:e.currentNode,workflow:e.workflow,"run-index":e.runIndex,"linked-runs":e.linkedRuns,"can-link-runs":!e.mappedNode&&e.canLinkRuns,"too-much-data-title":e.$locale.baseText("ndv.input.tooMuchData.title"),"no-data-in-branch-message":e.$locale.baseText("ndv.input.noOutputDataInBranch"),"is-executing":e.isExecutingPrevious,"executing-message":e.$locale.baseText("ndv.input.executingPrevious"),"push-ref":e.pushRef,"override-outputs":e.connectedCurrentNodeOutputs,"mapping-enabled":e.isMappingEnabled,"distance-from-active":e.currentNodeDepth,"is-production-execution-preview":e.isProductionExecutionPreview,"is-pane-active":e.isPaneActive,"pane-type":"input","data-test-id":"ndv-input-panel",onActivatePane:e.activatePane,onItemHover:t[1]||(t[1]=O=>e.$emit("itemHover",O)),onLinkRun:e.onLinkRun,onUnlinkRun:e.onUnlinkRun,onRunChange:e.onRunIndexChange,onTableMounted:t[2]||(t[2]=O=>e.$emit("tableMounted",O)),onSearch:t[3]||(t[3]=O=>e.$emit("search",O))},ft({header:u(()=>[s("div",{class:h(e.$style.titleSection)},[s("span",{class:h(e.$style.title)},r(e.$locale.baseText("ndv.input")),3),e.isActiveNodeConfig&&!e.readOnly?(o(),D(k,{key:0,options:e.inputModes,"model-value":e.inputMode,"onUpdate:modelValue":e.onInputModeChange},null,8,["options","model-value","onUpdate:modelValue"])):y("",!0)],2)]),"input-select":u(()=>[e.parentNodes.length&&e.currentNodeName?(o(),D(d,{key:0,"model-value":e.currentNodeName,workflow:e.workflow,nodes:e.parentNodes,"onUpdate:modelValue":e.onInputNodeChange},null,8,["model-value","workflow","nodes","onUpdate:modelValue"])):y("",!0)]),"node-not-run":u(()=>[e.isActiveNodeConfig&&e.rootNode||e.parentNodes.length?(o(),c("div",{key:0,class:h(e.$style.noOutputData)},[p(m,{tag:"div",bold:!0,color:"text-dark",size:"large"},{default:u(()=>[b(r(e.$locale.baseText("ndv.input.noOutputData.title")),1)]),_:1}),e.readOnly?y("",!0):(o(),D(f,{key:0,visible:e.showDraggableHint&&e.showDraggableHintWithDelay},{content:u(()=>[s("div",{innerHTML:e.$locale.baseText("dataMapping.dragFromPreviousHint",{interpolate:{name:e.focusedMappableInput}})},null,8,Id)]),default:u(()=>[p(C,{type:"secondary","hide-icon":"",transparent:!0,"node-name":e.isActiveNodeConfig?e.rootNode:e.currentNodeName??"",label:e.$locale.baseText("ndv.input.noOutputData.executePrevious"),"telemetry-source":"inputs","data-test-id":"execute-previous-node",onExecute:e.onNodeExecute},null,8,["node-name","label","onExecute"])]),_:1},8,["visible"])),e.readOnly?y("",!0):(o(),D(m,{key:1,tag:"div",size:"small"},{default:u(()=>[b(r(e.$locale.baseText("ndv.input.noOutputData.hint")),1)]),_:1}))],2)):(o(),c("div",{key:1,class:h(e.$style.notConnected)},[s("div",null,[p(N)]),p(m,{tag:"div",bold:!0,color:"text-dark",size:"large"},{default:u(()=>[b(r(e.$locale.baseText("ndv.input.notConnected.title")),1)]),_:1}),p(m,{tag:"div"},{default:u(()=>[b(r(e.$locale.baseText("ndv.input.notConnected.message"))+" ",1),s("a",{href:"https://docs.n8n.io/workflows/connections/",target:"_blank",onClick:t[0]||(t[0]=(...O)=>e.onConnectionHelpClick&&e.onConnectionHelpClick(...O))},r(e.$locale.baseText("ndv.input.notConnected.learnMore")),1)]),_:1})],2))]),"no-output-data":u(()=>[p(m,{tag:"div",bold:!0,color:"text-dark",size:"large"},{default:u(()=>[b(r(e.$locale.baseText("ndv.input.noOutputData")),1)]),_:1})]),"recovered-artificial-output-data":u(()=>[s("div",{class:h(e.$style.recoveredOutputData)},[p(m,{tag:"div",bold:!0,color:"text-dark",size:"large"},{default:u(()=>[b(r(e.$locale.baseText("executionDetails.executionFailed.recoveredNodeTitle")),1)]),_:1}),p(m,null,{default:u(()=>[b(r(e.$locale.baseText("executionDetails.executionFailed.recoveredNodeMessage")),1)]),_:1})],2)]),_:2},[e.isMappingMode?{name:"before-data",fn:u(()=>[(o(),D(un("style"),null,{default:u(()=>[b("button.linkRun { display: none }")]),_:1})),s("div",{class:h(e.$style.mappedNode)},[p(d,{"model-value":e.mappedNode,workflow:e.workflow,nodes:e.rootNodesParents,"onUpdate:modelValue":e.onMappedNodeSelected},null,8,["model-value","workflow","nodes","onUpdate:modelValue"])],2)]),key:"0"}:void 0]),1032,["node","workflow","run-index","linked-runs","can-link-runs","too-much-data-title","no-data-in-branch-message","is-executing","executing-message","push-ref","override-outputs","mapping-enabled","distance-from-active","is-production-execution-preview","is-pane-active","onActivatePane","onLinkRun","onUnlinkRun","onRunChange"])}const Rd={$style:Pd},Md=Z(kd,[["render",Ed],["__cssModules",Rd]]),Od=J({name:"TriggerPanel",components:{NodeExecuteButton:bt,CopyInput:To,NodeIcon:Pe},props:{nodeName:{type:String,required:!0},pushRef:{type:String,default:""}},emits:{activate:null,execute:null},setup(){const e=nt();return{workflowHelpers:vt({router:e})}},data:()=>({executionsHelpEventBus:ht()}),computed:{...fe(ce,ae,Ie,re),node(){return this.workflowsStore.getNodeByName(this.nodeName)},nodeType(){return this.node?this.nodeTypesStore.getNodeType(this.node.type,this.node.typeVersion):null},triggerPanel(){var t;const e=(t=this.nodeType)==null?void 0:t.triggerPanel;if(Do(e))return e},hideContent(){var t;const e=(t=this.triggerPanel)==null?void 0:t.hideContent;if(typeof e=="boolean")return e;if(this.node){const n=this.workflowHelpers.getCurrentWorkflow().expression.getSimpleParameterValue(this.node,e,"internal",{});if(typeof n=="boolean")return n}return!1},hasIssues(){var e;return!!((e=this.node)!=null&&e.issues&&(this.node.issues.parameters??this.node.issues.credentials))},serviceName(){return this.nodeType?dt(this.nodeType):""},displayChatButton(){return!!(this.node&&this.node.type===Ze&&this.node.parameters.mode!=="webhook")},isWebhookNode(){return!!(this.node&&this.node.type===sn)},webhookHttpMethod(){var t,n;if(!this.node||!((n=(t=this.nodeType)==null?void 0:t.webhooks)!=null&&n.length))return;const e=this.workflowHelpers.getWebhookExpressionValue(this.nodeType.webhooks[0],"httpMethod",!1);return Array.isArray(e)?e.join(", "):e},webhookTestUrl(){var e,t;if(!(!this.node||!((t=(e=this.nodeType)==null?void 0:e.webhooks)!=null&&t.length)))return this.workflowHelpers.getWebhookUrl(this.nodeType.webhooks[0],this.node,"test")},isWebhookBasedNode(){var e,t;return!!((t=(e=this.nodeType)==null?void 0:e.webhooks)!=null&&t.length)},isPollingNode(){var e;return!!((e=this.nodeType)!=null&&e.polling)},isListeningForEvents(){const e=this.workflowsStore.executionWaitingForWebhook,t=this.workflowsStore.executedNode;return!!this.node&&!this.node.disabled&&this.isWebhookBasedNode&&e&&(!t||t===this.nodeName)},workflowRunning(){return this.uiStore.isActionActive("workflowRunning")},isActivelyPolling(){const e=this.workflowsStore.executedNode;return this.workflowRunning&&this.isPollingNode&&this.nodeName===e},isWorkflowActive(){return this.workflowsStore.isWorkflowActive},listeningTitle(){var e;return((e=this.nodeType)==null?void 0:e.name)===Qe?this.$locale.baseText("ndv.trigger.webhookNode.formTrigger.listening"):this.$locale.baseText("ndv.trigger.webhookNode.listening")},listeningHint(){var e;switch((e=this.nodeType)==null?void 0:e.name){case Ze:return this.$locale.baseText("ndv.trigger.webhookBasedNode.chatTrigger.serviceHint");case Qe:return this.$locale.baseText("ndv.trigger.webhookBasedNode.formTrigger.serviceHint");default:return this.$locale.baseText("ndv.trigger.webhookBasedNode.serviceHint",{interpolate:{service:this.serviceName}})}},header(){var t;const e=this.nodeType?dt(this.nodeType):"";return this.isActivelyPolling?this.$locale.baseText("ndv.trigger.pollingNode.fetchingEvent"):(t=this.triggerPanel)!=null&&t.header?this.triggerPanel.header:this.isWebhookBasedNode?this.$locale.baseText("ndv.trigger.webhookBasedNode.action",{interpolate:{name:e}}):""},subheader(){const e=this.nodeType?dt(this.nodeType):"";return this.isActivelyPolling?this.$locale.baseText("ndv.trigger.pollingNode.fetchingHint",{interpolate:{name:e}}):""},executionsHelp(){var e;if((e=this.triggerPanel)!=null&&e.executionsHelp){if(typeof this.triggerPanel.executionsHelp=="string")return this.triggerPanel.executionsHelp;if(!this.isWorkflowActive&&this.triggerPanel.executionsHelp.inactive)return this.triggerPanel.executionsHelp.inactive;if(this.isWorkflowActive&&this.triggerPanel.executionsHelp.active)return this.triggerPanel.executionsHelp.active}return this.isWebhookBasedNode?this.isWorkflowActive?this.$locale.baseText("ndv.trigger.webhookBasedNode.executionsHelp.active",{interpolate:{service:this.serviceName}}):this.$locale.baseText("ndv.trigger.webhookBasedNode.executionsHelp.inactive",{interpolate:{service:this.serviceName}}):this.isPollingNode?this.isWorkflowActive?this.$locale.baseText("ndv.trigger.pollingNode.executionsHelp.active",{interpolate:{service:this.serviceName}}):this.$locale.baseText("ndv.trigger.pollingNode.executionsHelp.inactive",{interpolate:{service:this.serviceName}}):""},activationHint(){if(this.isActivelyPolling||!this.triggerPanel)return"";if(this.triggerPanel.activationHint){if(typeof this.triggerPanel.activationHint=="string")return this.triggerPanel.activationHint;if(!this.isWorkflowActive&&typeof this.triggerPanel.activationHint.inactive=="string")return this.triggerPanel.activationHint.inactive;if(this.isWorkflowActive&&typeof this.triggerPanel.activationHint.active=="string")return this.triggerPanel.activationHint.active}return this.isWebhookBasedNode?this.isWorkflowActive?this.$locale.baseText("ndv.trigger.webhookBasedNode.activationHint.active",{interpolate:{service:this.serviceName}}):this.$locale.baseText("ndv.trigger.webhookBasedNode.activationHint.inactive",{interpolate:{service:this.serviceName}}):this.isPollingNode?this.isWorkflowActive?this.$locale.baseText("ndv.trigger.pollingNode.activationHint.active",{interpolate:{service:this.serviceName}}):this.$locale.baseText("ndv.trigger.pollingNode.activationHint.inactive",{interpolate:{service:this.serviceName}}):""}},methods:{expandExecutionHelp(){this.$refs.help&&this.executionsHelpEventBus.emit("expand")},openWebhookUrl(){this.$telemetry.track("User clicked ndv link",{workflow_id:this.workflowsStore.workflowId,push_ref:this.pushRef,pane:"input",type:"open-chat"}),window.open(this.webhookTestUrl,"_blank","noreferrer")},onLinkClick(e){var n;if(!e.target)return;const t=e.target;t.localName==="a"&&(n=t.dataset)!=null&&n.key&&(e.stopPropagation(),e.preventDefault(),t.dataset.key==="activate"?this.$emit("activate"):t.dataset.key==="executions"?(this.$telemetry.track("User clicked ndv link",{workflow_id:this.workflowsStore.workflowId,push_ref:this.pushRef,pane:"input",type:"open-executions-log"}),this.ndvStore.activeNodeName=null,this.$router.push({name:No.EXECUTIONS})):t.dataset.key==="settings"&&this.uiStore.openModal(_o))},onTestLinkCopied(){this.$telemetry.track("User copied webhook URL",{pane:"inputs",type:"test url"})},onNodeExecute(){this.$emit("execute")}}}),Vd="_container_1evnm_1",Ad="_header_1evnm_18",Bd="_action_1evnm_25",Wd="_shake_1evnm_29",Ud="_accordion_1evnm_50",Ld={container:Vd,header:Ad,action:Bd,shake:Wd,accordion:Ud},Hd={key:"empty"},qd={key:"listening"},zd={key:0},xd={key:1},Fd={key:0},jd={key:"default"},Yd={key:0,class:"mb-xl"},Gd=["textContent"],Kd=["innerHTML"];function Xd(e,t,n,i,l,w){const k=v("NodeIcon"),d=v("n8n-pulse"),m=v("n8n-text"),C=v("CopyInput"),f=v("NodeExecuteButton"),N=v("n8n-button"),E=v("n8n-spinner"),O=v("n8n-heading"),_=v("n8n-link"),B=v("n8n-info-accordion");return o(),c("div",{class:h(e.$style.container)},[p(Uo,{name:"fade",mode:"out-in"},{default:u(()=>[e.hasIssues||e.hideContent?(o(),c("div",Hd)):e.isListeningForEvents?(o(),c("div",qd,[p(d,null,{default:u(()=>[p(k,{"node-type":e.nodeType,size:40},null,8,["node-type"])]),_:1}),e.isWebhookNode?(o(),c("div",zd,[p(m,{tag:"div",size:"large",color:"text-dark",class:"mb-2xs",bold:""},{default:u(()=>[b(r(e.$locale.baseText("ndv.trigger.webhookNode.listening")),1)]),_:1}),s("div",{class:h([e.$style.shake,"mb-xs"])},[p(m,null,{default:u(()=>[b(r(e.$locale.baseText("ndv.trigger.webhookNode.requestHint",{interpolate:{type:e.webhookHttpMethod??""}})),1)]),_:1})],2),p(C,{value:e.webhookTestUrl,"toast-title":e.$locale.baseText("ndv.trigger.copiedTestUrl"),class:"mb-2xl",size:"medium",collapse:!0,"copy-button-text":e.$locale.baseText("generic.clickToCopy"),onCopy:e.onTestLinkCopied},null,8,["value","toast-title","copy-button-text","onCopy"]),p(f,{"data-test-id":"trigger-execute-button","node-name":e.nodeName,size:"medium","telemetry-source":"inputs",onExecute:e.onNodeExecute},null,8,["node-name","onExecute"])])):(o(),c("div",xd,[p(m,{tag:"div",size:"large",color:"text-dark",class:"mb-2xs",bold:""},{default:u(()=>[b(r(e.listeningTitle),1)]),_:1}),s("div",{class:h([e.$style.shake,"mb-xs"])},[p(m,{tag:"div"},{default:u(()=>[b(r(e.listeningHint),1)]),_:1})],2),e.displayChatButton?(o(),c("div",Fd,[p(N,{class:"mb-xl",onClick:t[0]||(t[0]=S=>e.openWebhookUrl())},{default:u(()=>[b(r(e.$locale.baseText("ndv.trigger.chatTrigger.openChat")),1)]),_:1})])):y("",!0),p(f,{"data-test-id":"trigger-execute-button","node-name":e.nodeName,size:"medium","telemetry-source":"inputs",onExecute:e.onNodeExecute},null,8,["node-name","onExecute"])]))])):(o(),c("div",jd,[e.isActivelyPolling?(o(),c("div",Yd,[p(E,{type:"ring"})])):y("",!0),s("div",{class:h(e.$style.action)},[s("div",{class:h(e.$style.header)},[e.header?(o(),D(O,{key:0,tag:"h1",bold:""},{default:u(()=>[b(r(e.header),1)]),_:1})):y("",!0),e.subheader?(o(),D(m,{key:1},{default:u(()=>[s("span",{textContent:r(e.subheader)},null,8,Gd)]),_:1})):y("",!0)],2),p(f,{"data-test-id":"trigger-execute-button","node-name":e.nodeName,size:"medium","telemetry-source":"inputs",onExecute:e.onNodeExecute},null,8,["node-name","onExecute"])],2),e.activationHint?(o(),D(m,{key:1,size:"small",onClick:e.onLinkClick},{default:u(()=>[s("span",{innerHTML:e.activationHint},null,8,Kd),b(" ")]),_:1},8,["onClick"])):y("",!0),e.activationHint&&e.executionsHelp?(o(),D(_,{key:2,size:"small",onClick:e.expandExecutionHelp},{default:u(()=>[b(r(e.$locale.baseText("ndv.trigger.moreInfo")),1)]),_:1},8,["onClick"])):y("",!0),e.executionsHelp?(o(),D(B,{key:3,ref:"help",class:h(e.$style.accordion),title:e.$locale.baseText("ndv.trigger.executionsHint.question"),description:e.executionsHelp,"event-bus":e.executionsHelpEventBus,"onClick:body":e.onLinkClick},null,8,["class","title","description","event-bus","onClick:body"])):y("",!0)]))]),_:1})],2)}const Jd={$style:Ld},Qd=Z(Od,[["render",Xd],["__cssModules",Jd],["__scopeId","data-v-d2fb56be"]]),Zd=J({__name:"NodeDetailsView",props:{readOnly:{type:Boolean},renaming:{type:Boolean},isProductionExecutionPreview:{type:Boolean,default:!1}},emits:["saveKeyboardShortcut","valueChanged","nodeTypeSelected","switchSelectedNode","openConnectionNodeCreator","redrawNode","stopExecution"],setup(e,{emit:t}){const n=t,i=e,l=ae(),w=We(),k=Le(),{activeNode:d}=Xt(l),m=Ve(d),C=nt(),f=vt({router:C}),N=Fo(),E=ce(),O=Ie(),_=re(),B=So(),S=jn(),P=Zt(),$=Be(),F=nn(),G=ht(),oe=K(!1),L=K(-1),a=K(-1),R=K(!0),A=K(),V=K(!1),z=K(!1),T=K(0),U=K(!1),Y=K(0),Q=K(0),te=K(!1),q=K(!1),X=K(!0),M=I(()=>l.pushRef),W=I(()=>d.value?E.getNodeType(d.value.type,d.value.typeVersion):null),le=I(()=>O.isActionActive("workflowRunning")),ge=I(()=>V.value&&!!W.value&&!W.value.group.includes("trigger")&&le.value&&_.executionWaitingForWebhook),Ee=I(()=>{if(kt.value===null)return null;const g=kt.value.data;return g!=null&&g.resultData?g.resultData.runData:null}),Re=I(()=>f.getCurrentWorkflow()),ot=I(()=>d.value?Re.value.getParentNodesByDepth(d.value.name,1).map(({name:g})=>g)||[]:[]),mn=I(()=>{var g,H;for(const j of ot.value)if((g=_==null?void 0:_.pinnedWorkflowData)!=null&&g[j]||(H=Ee.value)!=null&&H[j])return j;return ot.value[0]}),Te=I(()=>A.value||mn.value),qe=I(()=>Te.value?_.getNodeByName(Te.value):null),gn=I(()=>l.ndvInputDataWithPinnedData.length),ve=I(()=>!!W.value&&(W.value.group.includes("trigger")||W.value.name===dn)),ze=I(()=>{var ee,se,he,Ge,Me;const g=!!((ee=W.value)!=null&&ee.triggerPanel);if(typeof((se=W.value)==null?void 0:se.triggerPanel)=="boolean")return g;const H=!!((Ge=(he=W.value)==null?void 0:he.webhooks)!=null&&Ge.length),j=(Me=W.value)==null?void 0:Me.polling;return!i.readOnly&&ve.value&&(H||j||g)}),vn=I(()=>{var H,j;if(!d.value)return!1;const g=_.outgoingConnectionsByNodeName(d.value.name);return(((j=(H=Object.values(g))==null?void 0:H[0])==null?void 0:j[0])??[]).length>0}),yn=I(()=>W.value?$o.includes(W.value.name):!1),st=I(()=>!!l.activeNode&&l.activeNode.type===Co),kt=I(()=>_.getWorkflowExecution),we=I(()=>{if(d.value===null)return 0;const g=Ee.value;return g!=null&&g[d.value.name]&&g[d.value.name].length?g[d.value.name].length-1:0}),xe=I(()=>a.value===-1?we.value:Math.min(a.value,we.value)),De=I(()=>{if(qe.value===null||d.value===null)return 0;const g=Re.value.getNode(d.value.name);if(!g||!W.value)return 0;const H=gt(Re.value,g,W.value);let j=qe.value;const ee=Ee.value;return H.some(se=>se!==me.Main)&&(j=d.value),!j||!ee||!ee.hasOwnProperty(j.name)?0:ee[j.name].length?ee[j.name].length-1:0}),Fe=I(()=>R.value&&we.value===De.value?xe.value:L.value===-1?De.value:Math.min(L.value,De.value)),it=I(()=>we.value>0&&we.value===De.value),je=I(()=>R.value&&it.value);I(()=>ve.value?0:80);const Tt=I(()=>W.value?`${Po}${W.value.name}`:""),Dt=I(()=>l.outputPanelEditMode),fn=I(()=>O.isActionActive("workflowRunning")),wn=I(()=>_.executionWaitingForWebhook),Nt=I(()=>fn.value||wn.value),_t=I(()=>{var ee;const g=(ee=d.value)==null?void 0:ee.credentials,H=_.usedCredentials,j=[];return g&&B.isEnterpriseFeatureEnabled(Io.Sharing)&&Object.values(g).forEach(se=>{se.id&&H[se.id]&&!H[se.id].currentUserHasAccess&&j.push(se.id)}),j}),at=I(()=>_t.value.length>0),St=({isTooltipVisible:g})=>{U.value=g},bn=g=>{if(g.key==="s"&&S.isCtrlKeyPressed(g)){if(g.stopPropagation(),g.preventDefault(),i.readOnly)return;n("saveKeyboardShortcut",g)}},kn=g=>{if(g===null||!Te.value||!X.value){l.setHoveringItem(null);return}const H={nodeName:Te.value,runIndex:Fe.value,outputIndex:g.outputIndex,itemIndex:g.itemIndex};l.setHoveringItem(H)},Tn=g=>{Y.value=g.avgRowHeight},$t=()=>{l.activeNodeName=null,setTimeout(()=>{N.activateCurrentWorkflow("ndv")},1e3)},Dn=g=>{var j;if(g===null||!d.value||!X.value){l.setHoveringItem(null);return}const H={nodeName:(j=d.value)==null?void 0:j.name,runIndex:xe.value,outputIndex:g.outputIndex,itemIndex:g.itemIndex};l.setHoveringItem(H)},Nn=()=>{window.open(Tt.value,"_blank"),d.value&&P.track("User clicked ndv link",{node_type:d.value.type,workflow_id:_.workflowId,push_ref:M.value,pane:me.Main,type:"i-wish-this-node-would"})},_n=g=>{z.value=!1,P.track("User moved parameters pane",{window_width:g.windowWidth,start_position:T.value,end_position:g.position,node_type:W.value?W.value.name:"",push_ref:M.value,workflow_id:_.workflowId}),T.value=g.position},Sn=g=>{z.value=!0,T.value=g.position},$n=g=>{T.value=g.position},Cn=()=>{R.value=!0,lt("output")},Ct=g=>{L.value=a.value,R.value=!1,lt(g)},rt=()=>{setTimeout(()=>{!d.value||!le.value||(V.value=!0)},1e3)},Pt=()=>{G.emit("openSettings")},lt=g=>{P.track("User changed ndv run linking",{node_type:W.value?W.value.name:"",push_ref:M.value,linked:je.value,pane:g})},Pn=()=>{a.value=L.value,R.value=!0,lt("input")},In=g=>{n("valueChanged",g)},It=g=>{n("switchSelectedNode",g)},Et=(g,H)=>{n("openConnectionNodeCreator",g,H)},Ye=async()=>{var g,H,j;if(!z.value){if(d.value&&(typeof((g=W.value)==null?void 0:g.outputs)=="string"||typeof((H=W.value)==null?void 0:H.inputs)=="string"||oe.value)){const ee=d.value.name;setTimeout(()=>{n("redrawNode",ee)},1)}if(Dt.value.enabled&&d.value){if(await F.confirm("",$.baseText("ndv.pinData.beforeClosing.title"),{confirmButtonText:$.baseText("ndv.pinData.beforeClosing.confirm"),cancelButtonText:$.baseText("ndv.pinData.beforeClosing.cancel")})===an){const{value:se}=Dt.value;try{m.setData(Kt(se),"on-ndv-close-modal")}catch(he){console.error(he)}}l.setOutputPanelEditModeEnabled(!1)}await w.run("dataDisplay.nodeEditingFinished"),P.track("User closed node modal",{node_type:W.value?(j=W.value)==null?void 0:j.name:"",push_ref:M.value,workflow_id:_.workflowId}),V.value=!1,l.activeNodeName=null,l.resetNDVPushRef()}},Rt=(g,H)=>{var j;P.track("User changed ndv run dropdown",{push_ref:M.value,run_index:g,node_type:W.value?(j=W.value)==null?void 0:j.name:"",pane:H})},En=g=>{a.value=g,Rt(g,"output")},Rn=g=>{L.value=g,je.value&&(a.value=g),Rt(g,"input")},Mn=g=>{Q.value=g.avgRowHeight},On=(g,H)=>{L.value=-1,R.value=!0,A.value=g,P.track("User changed ndv input dropdown",{node_type:d.value?d.value.type:"",push_ref:M.value,workflow_id:_.workflowId,selection_value:H,input_node_type:qe.value?qe.value.type:""})},Vn=()=>{n("stopExecution")},An=()=>{te.value=!0,q.value=!1},Bn=()=>{te.value=!1,q.value=!0},Mt=g=>{X.value=!g};return $e(d,(g,H)=>{if(g&&g.name!==(H==null?void 0:H.name)&&!st.value){if(L.value=-1,a.value=-1,R.value=!0,A.value=void 0,V.value=!1,Q.value=0,Y.value=0,setTimeout(()=>l.setNDVPushRef(),0),!W.value)return;w.run("dataDisplay.nodeTypeChanged",{nodeSubtitle:k.getNodeSubtitle(g,W.value,f.getCurrentWorkflow())}),setTimeout(()=>{var j,ee,se;if(d.value){const he=_.outgoingConnectionsByNodeName((j=d.value)==null?void 0:j.name);P.track("User opened node modal",{node_type:W.value?(ee=W.value)==null?void 0:ee.name:"",workflow_id:_.workflowId,push_ref:M.value,is_editable:!at.value,parameters_pane_position:T.value,input_first_connector_runs:De.value,output_first_connector_runs:we.value,selected_view_inputs:ve.value?"trigger":l.inputPanelDisplayMode,selected_view_outputs:l.outputPanelDisplayMode,input_connectors:ot.value.length,output_connectors:(se=he==null?void 0:he.main)==null?void 0:se.length,input_displayed_run_index:Fe.value,output_displayed_run_index:xe.value,data_pinning_tooltip_presented:U.value,input_displayed_row_height_avg:Y.value,output_displayed_row_height_avg:Q.value})}},2e3)}window.top&&!st.value&&window.top.postMessage(JSON.stringify({command:g?"openNDV":"closeNDV"}),"*")},{immediate:!0}),$e(we,()=>{a.value=-1}),$e(De,()=>{L.value=-1}),$e(Te,g=>{setTimeout(()=>{l.setInputNodeName(g)},0)}),$e(Fe,g=>{setTimeout(()=>{l.setInputRunIndex(g)},0)}),yt(()=>{et.on("data-pinning-discovery",St)}),pn(()=>{et.off("data-pinning-discovery",St)}),(g,H)=>{const j=v("n8n-icon"),ee=v("n8n-text"),se=v("n8n-tooltip"),he=v("font-awesome-icon"),Ge=v("el-dialog");return o(),D(Ge,{"model-value":(!!x(d)||g.renaming)&&!st.value,"before-close":Ye,"show-close":!1,class:"data-display-wrapper ndv-wrapper","overlay-class":"data-display-overlay",width:"auto","append-to-body":"","data-test-id":"ndv","data-has-output-connection":vn.value},{default:u(()=>{var Me;return[p(se,{placement:"bottom-start",visible:ge.value,disabled:!ge.value},{content:u(()=>[s("div",{class:h(g.$style.triggerWarning)},r(g.$locale.baseText("ndv.backToCanvas.waitingForTriggerWarning")),3)]),default:u(()=>[s("div",{class:h(g.$style.backToCanvas),"data-test-id":"back-to-canvas",onClick:Ye},[p(j,{icon:"arrow-left",color:"text-xlight",size:"medium"}),p(ee,{color:"text-xlight",size:"medium",bold:!0},{default:u(()=>[b(r(g.$locale.baseText("ndv.backToCanvas")),1)]),_:1})],2)]),_:1},8,["visible","disabled"]),x(d)?(o(),c("div",{key:0,ref:"container",class:"data-display",tabindex:"0",onKeydownCapture:bn},[s("div",{class:h(g.$style.modalBackground),onClick:Ye},null,2),(o(),D(da,{key:x(d).name,"is-trigger-node":ve.value,"hide-input-and-output":W.value===null,position:ve.value&&!ze.value?0:void 0,"is-draggable":!ve.value,"has-double-width":((Me=W.value)==null?void 0:Me.parameterPane)==="wide","node-type":W.value,onSwitchSelectedNode:It,onOpenConnectionNodeCreator:Et,onClose:Ye,onInit:$n,onDragstart:Sn,onDragend:_n},ft({output:u(()=>[p(od,{"data-test-id":"output-panel",workflow:Re.value,"can-link-runs":it.value,"run-index":xe.value,"linked-runs":je.value,"push-ref":M.value,"is-read-only":g.readOnly||at.value,"block-u-i":Nt.value&&ve.value&&!yn.value,"is-production-execution-preview":g.isProductionExecutionPreview,"is-pane-active":q.value,onActivatePane:Bn,onLinkRun:Cn,onUnlinkRun:H[1]||(H[1]=()=>Ct("output")),onRunChange:En,onOpenSettings:Pt,onTableMounted:Mn,onItemHover:Dn,onSearch:Mt},null,8,["workflow","can-link-runs","run-index","linked-runs","push-ref","is-read-only","block-u-i","is-production-execution-preview","is-pane-active"])]),main:u(()=>[p(ci,{"event-bus":x(G),dragging:z.value,"push-ref":M.value,"node-type":W.value,"foreign-credentials":_t.value,"read-only":g.readOnly,"block-u-i":Nt.value&&ze.value,executable:!g.readOnly,"input-size":gn.value,onValueChanged:In,onExecute:rt,onStopExecution:Vn,onRedrawRequired:H[2]||(H[2]=ru=>oe.value=!0),onActivate:$t,onSwitchSelectedNode:It,onOpenConnectionNodeCreator:Et},null,8,["event-bus","dragging","push-ref","node-type","foreign-credentials","read-only","block-u-i","executable","input-size"]),Tt.value?(o(),c("a",{key:0,class:h(g.$style.featureRequest),target:"_blank",onClick:Nn},[p(he,{icon:"lightbulb"}),b(" "+r(g.$locale.baseText("ndv.featureRequest")),1)],2)):y("",!0)]),_:2},[ze.value||!ve.value?{name:"input",fn:u(()=>[ze.value?(o(),D(Qd,{key:0,"node-name":x(d).name,"push-ref":M.value,onExecute:rt,onActivate:$t},null,8,["node-name","push-ref"])):ve.value?y("",!0):(o(),D(Md,{key:1,workflow:Re.value,"can-link-runs":it.value,"run-index":Fe.value,"linked-runs":je.value,"current-node-name":Te.value,"push-ref":M.value,"read-only":g.readOnly||at.value,"is-production-execution-preview":g.isProductionExecutionPreview,"is-pane-active":te.value,onActivatePane:An,onLinkRun:Pn,onUnlinkRun:H[0]||(H[0]=()=>Ct("input")),onRunChange:Rn,onOpenSettings:Pt,onChangeInputNode:On,onExecute:rt,onTableMounted:Tn,onItemHover:kn,onSearch:Mt},null,8,["workflow","can-link-runs","run-index","linked-runs","current-node-name","push-ref","read-only","is-production-execution-preview","is-pane-active"]))]),key:"0"}:void 0]),1032,["is-trigger-node","hide-input-and-output","position","is-draggable","has-double-width","node-type"]))],544)):y("",!0)]}),_:1},8,["model-value","data-has-output-connection"])}}}),eu="_modalBackground_16z4c_1",tu="_triggerWarning_16z4c_6",nu="_backToCanvas_16z4c_10",ou="_featureRequest_16z4c_31",su={modalBackground:eu,triggerWarning:tu,backToCanvas:nu,featureRequest:ou},iu={$style:su},au=Z(Zd,[["__cssModules",iu]]),fu=Object.freeze(Object.defineProperty({__proto__:null,default:au},Symbol.toStringTag,{value:"Module"}));export{wi as D,au as N,fu as a};
//# sourceMappingURL=NodeDetailsView-DcV7LI-g.js.map
