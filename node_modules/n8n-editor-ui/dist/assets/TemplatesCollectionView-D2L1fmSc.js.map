{"version":3,"file":"TemplatesCollectionView-D2L1fmSc.js","sources":["../../src/views/TemplatesCollectionView.vue"],"sourcesContent":["<template>\n\t<TemplatesView :go-back-enabled=\"true\">\n\t\t<template #header>\n\t\t\t<div v-if=\"!notFoundError\" :class=\"$style.wrapper\">\n\t\t\t\t<div :class=\"$style.title\">\n\t\t\t\t\t<n8n-heading v-if=\"collection && collection.name\" tag=\"h1\" size=\"2xlarge\">\n\t\t\t\t\t\t{{ collection.name }}\n\t\t\t\t\t</n8n-heading>\n\t\t\t\t\t<n8n-text v-if=\"collection && collection.name\" color=\"text-base\" size=\"small\">\n\t\t\t\t\t\t{{ $locale.baseText('templates.collection') }}\n\t\t\t\t\t</n8n-text>\n\t\t\t\t\t<n8n-loading :loading=\"!collection || !collection.name\" :rows=\"2\" variant=\"h1\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-else :class=\"$style.notFound\">\n\t\t\t\t<n8n-text color=\"text-base\">{{\n\t\t\t\t\t$locale.baseText('templates.collectionsNotFound')\n\t\t\t\t}}</n8n-text>\n\t\t\t</div>\n\t\t</template>\n\t\t<template v-if=\"!notFoundError\" #content>\n\t\t\t<div :class=\"$style.wrapper\">\n\t\t\t\t<div :class=\"$style.mainContent\">\n\t\t\t\t\t<div v-if=\"loading || isFullTemplatesCollection(collection)\" :class=\"$style.markdown\">\n\t\t\t\t\t\t<n8n-markdown\n\t\t\t\t\t\t\t:content=\"isFullTemplatesCollection(collection) && collection.description\"\n\t\t\t\t\t\t\t:images=\"isFullTemplatesCollection(collection) && collection.image\"\n\t\t\t\t\t\t\t:loading=\"loading\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<TemplateList\n\t\t\t\t\t\t:infinite-scroll-enabled=\"false\"\n\t\t\t\t\t\t:loading=\"loading\"\n\t\t\t\t\t\t:use-workflow-button=\"true\"\n\t\t\t\t\t\t:workflows=\"collectionWorkflows\"\n\t\t\t\t\t\t@use-workflow=\"onUseWorkflow\"\n\t\t\t\t\t\t@open-template=\"onOpenTemplate\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div :class=\"$style.details\">\n\t\t\t\t\t<TemplateDetails\n\t\t\t\t\t\t:block-title=\"$locale.baseText('template.details.appsInTheCollection')\"\n\t\t\t\t\t\t:loading=\"loading\"\n\t\t\t\t\t\t:template=\"collection\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t</TemplatesView>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport { mapStores } from 'pinia';\n\nimport TemplateDetails from '@/components/TemplateDetails.vue';\nimport TemplateList from '@/components/TemplateList.vue';\nimport TemplatesView from './TemplatesView.vue';\n\nimport type {\n\tITemplatesCollection,\n\tITemplatesCollectionFull,\n\tITemplatesWorkflow,\n} from '@/Interface';\n\nimport { setPageTitle } from '@/utils/htmlUtils';\nimport { VIEWS } from '@/constants';\nimport { useTemplatesStore } from '@/stores/templates.store';\nimport { usePostHog } from '@/stores/posthog.store';\nimport { useTemplateWorkflow } from '@/utils/templates/templateActions';\nimport { useExternalHooks } from '@/composables/useExternalHooks';\nimport { useNodeTypesStore } from '@/stores/nodeTypes.store';\nimport { isFullTemplatesCollection } from '@/utils/templates/typeGuards';\n\nexport default defineComponent({\n\tname: 'TemplatesCollectionView',\n\tcomponents: {\n\t\tTemplateDetails,\n\t\tTemplateList,\n\t\tTemplatesView,\n\t},\n\tsetup() {\n\t\tconst externalHooks = useExternalHooks();\n\n\t\treturn {\n\t\t\texternalHooks,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapStores(useTemplatesStore, usePostHog),\n\t\tcollection(): ITemplatesCollectionFull | ITemplatesCollection | null {\n\t\t\treturn this.templatesStore.getCollectionById(this.collectionId);\n\t\t},\n\t\tcollectionId(): string {\n\t\t\treturn Array.isArray(this.$route.params.id)\n\t\t\t\t? this.$route.params.id[0]\n\t\t\t\t: this.$route.params.id;\n\t\t},\n\t\tcollectionWorkflows(): ITemplatesWorkflow[] {\n\t\t\tif (!this.collection || this.loading) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\treturn this.collection.workflows\n\t\t\t\t.map(({ id }) => this.templatesStore.getTemplateById(id.toString()))\n\t\t\t\t.filter((workflow): workflow is ITemplatesWorkflow => !!workflow);\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tloading: true,\n\t\t\tnotFoundError: false,\n\t\t};\n\t},\n\twatch: {\n\t\tcollection(collection: ITemplatesCollection) {\n\t\t\tif (collection) {\n\t\t\t\tsetPageTitle(`n8n - Template collection: ${collection.name}`);\n\t\t\t} else {\n\t\t\t\tsetPageTitle('n8n - Templates');\n\t\t\t}\n\t\t},\n\t},\n\tasync mounted() {\n\t\tthis.scrollToTop();\n\n\t\tif (this.collection && 'full' in this.collection && this.collection.full) {\n\t\t\tthis.loading = false;\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tawait this.templatesStore.fetchCollectionById(this.collectionId);\n\t\t} catch (e) {\n\t\t\tthis.notFoundError = true;\n\t\t}\n\t\tthis.loading = false;\n\t},\n\tmethods: {\n\t\tscrollToTop() {\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst contentArea = document.getElementById('content');\n\t\t\t\tif (contentArea) {\n\t\t\t\t\tcontentArea.scrollTo({\n\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\tbehavior: 'smooth',\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, 50);\n\t\t},\n\t\tonOpenTemplate({ event, id }: { event: MouseEvent; id: string }) {\n\t\t\tthis.navigateTo(event, VIEWS.TEMPLATE, id);\n\t\t},\n\t\tasync onUseWorkflow({ event, id }: { event: MouseEvent; id: string }) {\n\t\t\tawait useTemplateWorkflow({\n\t\t\t\tposthogStore: this.posthogStore,\n\t\t\t\trouter: this.$router,\n\t\t\t\ttemplateId: id,\n\t\t\t\tinNewBrowserTab: event.metaKey || event.ctrlKey,\n\t\t\t\ttemplatesStore: useTemplatesStore(),\n\t\t\t\texternalHooks: this.externalHooks,\n\t\t\t\tnodeTypesStore: useNodeTypesStore(),\n\t\t\t\ttelemetry: this.$telemetry,\n\t\t\t\tsource: 'template_list',\n\t\t\t});\n\t\t},\n\t\tnavigateTo(e: MouseEvent, page: string, id: string) {\n\t\t\tif (e.metaKey || e.ctrlKey) {\n\t\t\t\tconst route = this.$router.resolve({ name: page, params: { id } });\n\t\t\t\twindow.open(route.href, '_blank');\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tvoid this.$router.push({ name: page, params: { id } });\n\t\t\t}\n\t\t},\n\t\tisFullTemplatesCollection,\n\t},\n});\n</script>\n\n<style lang=\"scss\" module>\n.wrapper {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\n\t@media (max-width: $breakpoint-xs) {\n\t\tdisplay: block;\n\t}\n}\n\n.notFound {\n\tpadding-top: var(--spacing-xl);\n}\n\n.title {\n\twidth: 100%;\n}\n\n.button {\n\tdisplay: block;\n}\n\n.mainContent {\n\tpadding-right: var(--spacing-2xl);\n\tmargin-bottom: var(--spacing-l);\n\twidth: 100%;\n\n\t@media (max-width: $breakpoint-xs) {\n\t\tpadding-right: 0;\n\t}\n}\n\n.markdown {\n\tmargin-bottom: var(--spacing-l);\n}\n\n.details {\n\twidth: 180px;\n}\n</style>\n"],"names":["_sfc_main","defineComponent","TemplateDetails","TemplateList","TemplatesView","useExternalHooks","mapStores","useTemplatesStore","usePostHog","id","workflow","collection","setPageTitle","contentArea","event","VIEWS","useTemplateWorkflow","useNodeTypesStore","page","route","isFullTemplatesCollection","_component_TemplatesView","_resolveComponent","notFoundError","_createBlock","_createSlots","_withCtx","_ctx","_openBlock","_createElementBlock","$style","_normalizeClass","_createVNode","_component_n8n_text","$locale","_createTextVNode","_toDisplayString","_component_n8n_heading","_createCommentVNode","_component_n8n_loading","_createElementVNode","loading","collectionWorkflows","onUseWorkflow","onOpenTemplate"],"mappings":"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"}