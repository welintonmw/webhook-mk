{"version":3,"file":"SettingsLdapView-BaSjQ4cy.js","sources":["../../src/views/SettingsLdapView.vue"],"sourcesContent":["<template>\n\t<div v-if=\"!isLDAPFeatureEnabled\">\n\t\t<div :class=\"[$style.header, 'mb-2xl']\">\n\t\t\t<n8n-heading size=\"2xlarge\">\n\t\t\t\t{{ $locale.baseText('settings.ldap') }}\n\t\t\t</n8n-heading>\n\t\t</div>\n\n\t\t<n8n-info-tip type=\"note\" theme=\"info\" tooltip-placement=\"right\" class=\"mb-l\">\n\t\t\t{{ $locale.baseText('settings.ldap.note') }}\n\t\t</n8n-info-tip>\n\t\t<n8n-action-box\n\t\t\t:description=\"$locale.baseText('settings.ldap.disabled.description')\"\n\t\t\t:button-text=\"$locale.baseText('settings.ldap.disabled.buttonText')\"\n\t\t\t@click:button=\"goToUpgrade\"\n\t\t>\n\t\t\t<template #heading>\n\t\t\t\t<span>{{ $locale.baseText('settings.ldap.disabled.title') }}</span>\n\t\t\t</template>\n\t\t</n8n-action-box>\n\t</div>\n\t<div v-else>\n\t\t<div :class=\"$style.container\">\n\t\t\t<div :class=\"$style.header\">\n\t\t\t\t<n8n-heading size=\"2xlarge\">\n\t\t\t\t\t{{ $locale.baseText('settings.ldap') }}\n\t\t\t\t</n8n-heading>\n\t\t\t</div>\n\t\t\t<div :class=\"$style.docsInfoTip\">\n\t\t\t\t<n8n-info-tip theme=\"info\" type=\"note\">\n\t\t\t\t\t<span v-html=\"$locale.baseText('settings.ldap.infoTip')\"></span>\n\t\t\t\t</n8n-info-tip>\n\t\t\t</div>\n\t\t\t<div :class=\"$style.settingsForm\">\n\t\t\t\t<n8n-form-inputs\n\t\t\t\t\tv-if=\"formInputs\"\n\t\t\t\t\tref=\"ldapConfigForm\"\n\t\t\t\t\t:inputs=\"formInputs\"\n\t\t\t\t\t:event-bus=\"formBus\"\n\t\t\t\t\t:column-view=\"true\"\n\t\t\t\t\tvertical-spacing=\"l\"\n\t\t\t\t\t@update=\"onInput\"\n\t\t\t\t\t@ready=\"onReadyToSubmit\"\n\t\t\t\t\t@submit=\"onSubmit\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<n8n-button\n\t\t\t\t\tv-if=\"loginEnabled\"\n\t\t\t\t\t:label=\"\n\t\t\t\t\t\tloadingTestConnection\n\t\t\t\t\t\t\t? $locale.baseText('settings.ldap.testingConnection')\n\t\t\t\t\t\t\t: $locale.baseText('settings.ldap.testConnection')\n\t\t\t\t\t\"\n\t\t\t\t\tsize=\"large\"\n\t\t\t\t\tclass=\"mr-s\"\n\t\t\t\t\t:disabled=\"hasAnyChanges || !readyToSubmit\"\n\t\t\t\t\t:loading=\"loadingTestConnection\"\n\t\t\t\t\t@click=\"onTestConnectionClick\"\n\t\t\t\t/>\n\t\t\t\t<n8n-button\n\t\t\t\t\t:label=\"$locale.baseText('settings.ldap.save')\"\n\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t:disabled=\"!hasAnyChanges || !readyToSubmit\"\n\t\t\t\t\t@click=\"onSaveClick\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if=\"loginEnabled\">\n\t\t\t<n8n-heading tag=\"h1\" class=\"mb-xl mt-3xl\" size=\"medium\">{{\n\t\t\t\t$locale.baseText('settings.ldap.section.synchronization.title')\n\t\t\t}}</n8n-heading>\n\t\t\t<div :class=\"$style.syncTable\">\n\t\t\t\t<ElTable\n\t\t\t\t\t:key=\"tableKey\"\n\t\t\t\t\tv-loading=\"loadingTable\"\n\t\t\t\t\t:border=\"true\"\n\t\t\t\t\t:stripe=\"true\"\n\t\t\t\t\t:data=\"dataTable\"\n\t\t\t\t\t:cell-style=\"cellClassStyle\"\n\t\t\t\t\tstyle=\"width: 100%\"\n\t\t\t\t\tmax-height=\"250\"\n\t\t\t\t>\n\t\t\t\t\t<ElTableColumn\n\t\t\t\t\t\tprop=\"status\"\n\t\t\t\t\t\t:label=\"$locale.baseText('settings.ldap.synchronizationTable.column.status')\"\n\t\t\t\t\t>\n\t\t\t\t\t</ElTableColumn>\n\t\t\t\t\t<ElTableColumn\n\t\t\t\t\t\tprop=\"endedAt\"\n\t\t\t\t\t\t:label=\"$locale.baseText('settings.ldap.synchronizationTable.column.endedAt')\"\n\t\t\t\t\t>\n\t\t\t\t\t</ElTableColumn>\n\t\t\t\t\t<ElTableColumn\n\t\t\t\t\t\tprop=\"runMode\"\n\t\t\t\t\t\t:label=\"$locale.baseText('settings.ldap.synchronizationTable.column.runMode')\"\n\t\t\t\t\t>\n\t\t\t\t\t</ElTableColumn>\n\t\t\t\t\t<ElTableColumn\n\t\t\t\t\t\tprop=\"runTime\"\n\t\t\t\t\t\t:label=\"$locale.baseText('settings.ldap.synchronizationTable.column.runTime')\"\n\t\t\t\t\t>\n\t\t\t\t\t</ElTableColumn>\n\t\t\t\t\t<ElTableColumn\n\t\t\t\t\t\tprop=\"details\"\n\t\t\t\t\t\t:label=\"$locale.baseText('settings.ldap.synchronizationTable.column.details')\"\n\t\t\t\t\t>\n\t\t\t\t\t</ElTableColumn>\n\t\t\t\t\t<template #empty>{{\n\t\t\t\t\t\t$locale.baseText('settings.ldap.synchronizationTable.empty.message')\n\t\t\t\t\t}}</template>\n\t\t\t\t\t<template #append>\n\t\t\t\t\t\t<InfiniteLoading target=\".el-table__body-wrapper\" @infinite=\"getLdapSynchronizations\">\n\t\t\t\t\t\t</InfiniteLoading>\n\t\t\t\t\t</template>\n\t\t\t\t</ElTable>\n\t\t\t</div>\n\t\t\t<div class=\"pb-3xl\">\n\t\t\t\t<n8n-button\n\t\t\t\t\t:label=\"$locale.baseText('settings.ldap.dryRun')\"\n\t\t\t\t\ttype=\"secondary\"\n\t\t\t\t\tsize=\"large\"\n\t\t\t\t\tclass=\"mr-s\"\n\t\t\t\t\t:disabled=\"hasAnyChanges || !readyToSubmit\"\n\t\t\t\t\t:loading=\"loadingDryRun\"\n\t\t\t\t\t@click=\"onDryRunClick\"\n\t\t\t\t/>\n\t\t\t\t<n8n-button\n\t\t\t\t\t:label=\"$locale.baseText('settings.ldap.synchronizeNow')\"\n\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t:disabled=\"hasAnyChanges || !readyToSubmit\"\n\t\t\t\t\t:loading=\"loadingLiveRun\"\n\t\t\t\t\t@click=\"onLiveRunClick\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport type { CSSProperties } from 'vue';\nimport { defineComponent } from 'vue';\nimport { capitalizeFirstLetter } from '@/utils/htmlUtils';\nimport { convertToDisplayDate } from '@/utils/typesUtils';\nimport { useToast } from '@/composables/useToast';\nimport { useMessage } from '@/composables/useMessage';\nimport type {\n\tILdapConfig,\n\tILdapSyncData,\n\tILdapSyncTable,\n\tIFormInput,\n\tIFormInputs,\n\tIUser,\n} from '@/Interface';\nimport { MODAL_CONFIRM } from '@/constants';\n\nimport humanizeDuration from 'humanize-duration';\nimport { ElTable, ElTableColumn } from 'element-plus';\nimport type { Events } from 'v3-infinite-loading';\nimport InfiniteLoading from 'v3-infinite-loading';\nimport { mapStores } from 'pinia';\nimport { useUsersStore } from '@/stores/users.store';\nimport { useSettingsStore } from '@/stores/settings.store';\nimport { useUIStore } from '@/stores/ui.store';\nimport { createEventBus } from 'n8n-design-system/utils';\nimport type { TableColumnCtx } from 'element-plus';\n\ntype TableRow = {\n\tstatus: string;\n\tstartAt: string;\n\tendedAt: string;\n\terror: string;\n\trunMode: string;\n};\n\ntype LDAPConfigForm = {\n\tloginEnabled: boolean;\n\tloginLabel: string;\n\tserverAddress: string;\n\tallowUnauthorizedCerts: boolean;\n\tport: number;\n\tconnectionSecurity: string;\n\tbaseDn: string;\n\tbindingType: 'admin' | 'anonymous';\n\tadminDn: string;\n\tadminPassword: string;\n\temail: string;\n\tfirstName: string;\n\tlastName: string;\n\tloginId: string;\n\tldapId: string;\n\tuserFilter: string;\n\tsynchronizationEnabled: boolean;\n\tsynchronizationInterval: string;\n\tpageSize: string;\n\tsearchTimeout: string;\n};\n\ntype CellClassStyleMethodParams<T> = {\n\tdata: {\n\t\trow: T;\n\t\trowIndex: number;\n\t\tcolumn: TableColumnCtx<T>;\n\t\tcolumnIndex: number;\n\t};\n};\n\nexport default defineComponent({\n\tname: 'SettingsLdapView',\n\tcomponents: {\n\t\tInfiniteLoading,\n\t\tElTable,\n\t\tElTableColumn,\n\t},\n\tsetup() {\n\t\treturn {\n\t\t\t...useToast(),\n\t\t\t...useMessage(),\n\t\t};\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tdataTable: [] as ILdapSyncTable[],\n\t\t\ttableKey: 0,\n\t\t\tadConfig: {} as ILdapConfig,\n\t\t\tloadingTestConnection: false,\n\t\t\tloadingDryRun: false,\n\t\t\tloadingLiveRun: false,\n\t\t\tloadingTable: false,\n\t\t\thasAnyChanges: false,\n\t\t\tformInputs: null as null | IFormInputs,\n\t\t\tformBus: createEventBus(),\n\t\t\treadyToSubmit: false,\n\t\t\tpage: 0,\n\t\t\tloginEnabled: false,\n\t\t\tsyncEnabled: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapStores(useUsersStore, useSettingsStore, useUIStore),\n\t\tcurrentUser(): null | IUser {\n\t\t\treturn this.usersStore.currentUser;\n\t\t},\n\t\tisLDAPFeatureEnabled(): boolean {\n\t\t\treturn this.settingsStore.settings.enterprise.ldap;\n\t\t},\n\t},\n\tasync mounted() {\n\t\tif (!this.isLDAPFeatureEnabled) return;\n\t\tawait this.getLdapConfig();\n\t},\n\tmethods: {\n\t\tgoToUpgrade() {\n\t\t\tvoid this.uiStore.goToUpgrade('ldap', 'upgrade-ldap');\n\t\t},\n\t\tcellClassStyle({ data }: CellClassStyleMethodParams<TableRow>): CSSProperties {\n\t\t\tconst { row, column } = data;\n\t\t\tif (column.property === 'status') {\n\t\t\t\tif (row.status === 'Success') {\n\t\t\t\t\treturn { color: 'green' };\n\t\t\t\t} else if (row.status === 'Error') {\n\t\t\t\t\treturn { color: 'red' };\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (column.property === 'runMode') {\n\t\t\t\tif (row.runMode === 'Dry') {\n\t\t\t\t\treturn { color: 'orange' };\n\t\t\t\t} else if (row.runMode === 'Live') {\n\t\t\t\t\treturn { color: 'blue' };\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn {};\n\t\t},\n\t\tonInput(input: { name: string; value: string | number | boolean }) {\n\t\t\tif (input.name === 'loginEnabled' && typeof input.value === 'boolean') {\n\t\t\t\tthis.loginEnabled = input.value;\n\t\t\t}\n\t\t\tif (input.name === 'synchronizationEnabled' && typeof input.value === 'boolean') {\n\t\t\t\tthis.syncEnabled = input.value;\n\t\t\t}\n\t\t\tthis.hasAnyChanges = true;\n\t\t},\n\t\tonReadyToSubmit(ready: boolean) {\n\t\t\tthis.readyToSubmit = ready;\n\t\t},\n\t\tsyncDataMapper(sync: ILdapSyncData): ILdapSyncTable {\n\t\t\tconst startedAt = new Date(sync.startedAt);\n\t\t\tconst endedAt = new Date(sync.endedAt);\n\t\t\tconst runTimeInMinutes = endedAt.getTime() - startedAt.getTime();\n\t\t\treturn {\n\t\t\t\trunTime: humanizeDuration(runTimeInMinutes),\n\t\t\t\trunMode: capitalizeFirstLetter(sync.runMode),\n\t\t\t\tstatus: capitalizeFirstLetter(sync.status),\n\t\t\t\tendedAt: convertToDisplayDate(endedAt.getTime()),\n\t\t\t\tdetails: this.$locale.baseText('settings.ldap.usersScanned', {\n\t\t\t\t\tinterpolate: {\n\t\t\t\t\t\tscanned: sync.scanned.toString(),\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t};\n\t\t},\n\t\tasync onSubmit(): Promise<void> {\n\t\t\t// We want to save all form values (incl. the hidden onces), so we are using\n\t\t\t// `values` data prop of the `FormInputs` child component since they are all preserved there\n\t\t\tconst formInputsRef = this.$refs.ldapConfigForm as { values: LDAPConfigForm };\n\n\t\t\tif (!this.hasAnyChanges || !formInputsRef) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst newConfiguration: ILdapConfig = {\n\t\t\t\tloginEnabled: formInputsRef.values.loginEnabled,\n\t\t\t\tloginLabel: formInputsRef.values.loginLabel,\n\t\t\t\tconnectionUrl: formInputsRef.values.serverAddress,\n\t\t\t\tallowUnauthorizedCerts: formInputsRef.values.allowUnauthorizedCerts,\n\t\t\t\tconnectionPort: +formInputsRef.values.port,\n\t\t\t\tconnectionSecurity: formInputsRef.values.connectionSecurity,\n\t\t\t\tbaseDn: formInputsRef.values.baseDn,\n\t\t\t\tbindingAdminDn:\n\t\t\t\t\tformInputsRef.values.bindingType === 'admin' ? formInputsRef.values.adminDn : '',\n\t\t\t\tbindingAdminPassword:\n\t\t\t\t\tformInputsRef.values.bindingType === 'admin' ? formInputsRef.values.adminPassword : '',\n\t\t\t\temailAttribute: formInputsRef.values.email,\n\t\t\t\tfirstNameAttribute: formInputsRef.values.firstName,\n\t\t\t\tlastNameAttribute: formInputsRef.values.lastName,\n\t\t\t\tloginIdAttribute: formInputsRef.values.loginId,\n\t\t\t\tldapIdAttribute: formInputsRef.values.ldapId,\n\t\t\t\tuserFilter: formInputsRef.values.userFilter,\n\t\t\t\tsynchronizationEnabled: formInputsRef.values.synchronizationEnabled,\n\t\t\t\tsynchronizationInterval: +formInputsRef.values.synchronizationInterval,\n\t\t\t\tsearchPageSize: +formInputsRef.values.pageSize,\n\t\t\t\tsearchTimeout: +formInputsRef.values.searchTimeout,\n\t\t\t};\n\n\t\t\tlet saveForm = true;\n\n\t\t\ttry {\n\t\t\t\tif (this.adConfig.loginEnabled && !newConfiguration.loginEnabled) {\n\t\t\t\t\tconst confirmAction = await this.confirm(\n\t\t\t\t\t\tthis.$locale.baseText('settings.ldap.confirmMessage.beforeSaveForm.message'),\n\t\t\t\t\t\tthis.$locale.baseText('settings.ldap.confirmMessage.beforeSaveForm.headline'),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcancelButtonText: this.$locale.baseText(\n\t\t\t\t\t\t\t\t'settings.ldap.confirmMessage.beforeSaveForm.cancelButtonText',\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tconfirmButtonText: this.$locale.baseText(\n\t\t\t\t\t\t\t\t'settings.ldap.confirmMessage.beforeSaveForm.confirmButtonText',\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\n\t\t\t\t\tsaveForm = confirmAction === MODAL_CONFIRM;\n\t\t\t\t}\n\n\t\t\t\tif (!saveForm) {\n\t\t\t\t\tthis.hasAnyChanges = true;\n\t\t\t\t}\n\n\t\t\t\tthis.adConfig = await this.settingsStore.updateLdapConfig(newConfiguration);\n\t\t\t\tthis.showToast({\n\t\t\t\t\ttitle: this.$locale.baseText('settings.ldap.updateConfiguration'),\n\t\t\t\t\tmessage: '',\n\t\t\t\t\ttype: 'success',\n\t\t\t\t});\n\t\t\t} catch (error) {\n\t\t\t\tthis.showError(error, this.$locale.baseText('settings.ldap.configurationError'));\n\t\t\t} finally {\n\t\t\t\tif (saveForm) {\n\t\t\t\t\tthis.hasAnyChanges = false;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonSaveClick() {\n\t\t\tthis.formBus.emit('submit');\n\t\t},\n\t\tasync onTestConnectionClick() {\n\t\t\tthis.loadingTestConnection = true;\n\t\t\ttry {\n\t\t\t\tawait this.settingsStore.testLdapConnection();\n\t\t\t\tthis.showToast({\n\t\t\t\t\ttitle: this.$locale.baseText('settings.ldap.connectionTest'),\n\t\t\t\t\tmessage: this.$locale.baseText('settings.ldap.toast.connection.success'),\n\t\t\t\t\ttype: 'success',\n\t\t\t\t});\n\t\t\t} catch (error) {\n\t\t\t\tthis.showToast({\n\t\t\t\t\ttitle: this.$locale.baseText('settings.ldap.connectionTestError'),\n\t\t\t\t\tmessage: error.message,\n\t\t\t\t\ttype: 'error',\n\t\t\t\t});\n\t\t\t} finally {\n\t\t\t\tthis.loadingTestConnection = false;\n\t\t\t}\n\t\t},\n\t\tasync onDryRunClick() {\n\t\t\tthis.loadingDryRun = true;\n\t\t\ttry {\n\t\t\t\tawait this.settingsStore.runLdapSync({ type: 'dry' });\n\t\t\t\tthis.showToast({\n\t\t\t\t\ttitle: this.$locale.baseText('settings.ldap.runSync.title'),\n\t\t\t\t\tmessage: this.$locale.baseText('settings.ldap.toast.sync.success'),\n\t\t\t\t\ttype: 'success',\n\t\t\t\t});\n\t\t\t} catch (error) {\n\t\t\t\tthis.showError(error, this.$locale.baseText('settings.ldap.synchronizationError'));\n\t\t\t} finally {\n\t\t\t\tthis.loadingDryRun = false;\n\t\t\t\tawait this.reloadLdapSynchronizations();\n\t\t\t}\n\t\t},\n\t\tasync onLiveRunClick() {\n\t\t\tthis.loadingLiveRun = true;\n\t\t\ttry {\n\t\t\t\tawait this.settingsStore.runLdapSync({ type: 'live' });\n\t\t\t\tthis.showToast({\n\t\t\t\t\ttitle: this.$locale.baseText('settings.ldap.runSync.title'),\n\t\t\t\t\tmessage: this.$locale.baseText('settings.ldap.toast.sync.success'),\n\t\t\t\t\ttype: 'success',\n\t\t\t\t});\n\t\t\t} catch (error) {\n\t\t\t\tthis.showError(error, this.$locale.baseText('settings.ldap.synchronizationError'));\n\t\t\t} finally {\n\t\t\t\tthis.loadingLiveRun = false;\n\t\t\t\tawait this.reloadLdapSynchronizations();\n\t\t\t}\n\t\t},\n\t\tasync getLdapConfig() {\n\t\t\ttry {\n\t\t\t\tthis.adConfig = await this.settingsStore.getLdapConfig();\n\t\t\t\tthis.loginEnabled = this.adConfig.loginEnabled;\n\t\t\t\tthis.syncEnabled = this.adConfig.synchronizationEnabled;\n\t\t\t\tconst whenLoginEnabled: IFormInput['shouldDisplay'] = (values) =>\n\t\t\t\t\tvalues.loginEnabled === true;\n\t\t\t\tconst whenSyncAndLoginEnabled: IFormInput['shouldDisplay'] = (values) =>\n\t\t\t\t\tvalues.synchronizationEnabled === true && values.loginEnabled === true;\n\t\t\t\tconst whenAdminBindingAndLoginEnabled: IFormInput['shouldDisplay'] = (values) =>\n\t\t\t\t\tvalues.bindingType === 'admin' && values.loginEnabled === true;\n\t\t\t\tthis.formInputs = [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'loginEnabled',\n\t\t\t\t\t\tinitialValue: this.adConfig.loginEnabled,\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\ttype: 'toggle',\n\t\t\t\t\t\t\tlabel: this.$locale.baseText('settings.ldap.form.loginEnabled.label'),\n\t\t\t\t\t\t\ttooltipText: this.$locale.baseText('settings.ldap.form.loginEnabled.tooltip'),\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'loginLabel',\n\t\t\t\t\t\tinitialValue: this.adConfig.loginLabel,\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tlabel: this.$locale.baseText('settings.ldap.form.loginLabel.label'),\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tplaceholder: this.$locale.baseText('settings.ldap.form.loginLabel.placeholder'),\n\t\t\t\t\t\t\tinfoText: this.$locale.baseText('settings.ldap.form.loginLabel.infoText'),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tshouldDisplay: whenLoginEnabled,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'serverAddress',\n\t\t\t\t\t\tinitialValue: this.adConfig.connectionUrl,\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tlabel: this.$locale.baseText('settings.ldap.form.serverAddress.label'),\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tcapitalize: true,\n\t\t\t\t\t\t\tplaceholder: this.$locale.baseText('settings.ldap.form.serverAddress.placeholder'),\n\t\t\t\t\t\t\tinfoText: this.$locale.baseText('settings.ldap.form.serverAddress.infoText'),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tshouldDisplay: whenLoginEnabled,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'port',\n\t\t\t\t\t\tinitialValue: this.adConfig.connectionPort,\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\ttype: 'number',\n\t\t\t\t\t\t\tlabel: this.$locale.baseText('settings.ldap.form.port.label'),\n\t\t\t\t\t\t\tcapitalize: true,\n\t\t\t\t\t\t\tinfoText: this.$locale.baseText('settings.ldap.form.port.infoText'),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tshouldDisplay: whenLoginEnabled,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'connectionSecurity',\n\t\t\t\t\t\tinitialValue: this.adConfig.connectionSecurity,\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\ttype: 'select',\n\t\t\t\t\t\t\tlabel: this.$locale.baseText('settings.ldap.form.connectionSecurity.label'),\n\t\t\t\t\t\t\tinfoText: this.$locale.baseText('settings.ldap.form.connectionSecurity.infoText'),\n\t\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: 'None',\n\t\t\t\t\t\t\t\t\tvalue: 'none',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: 'TLS',\n\t\t\t\t\t\t\t\t\tvalue: 'tls',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: 'STARTTLS',\n\t\t\t\t\t\t\t\t\tvalue: 'startTls',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tcapitalize: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tshouldDisplay: whenLoginEnabled,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'allowUnauthorizedCerts',\n\t\t\t\t\t\tinitialValue: this.adConfig.allowUnauthorizedCerts,\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\ttype: 'toggle',\n\t\t\t\t\t\t\tlabel: this.$locale.baseText('settings.ldap.form.allowUnauthorizedCerts.label'),\n\t\t\t\t\t\t\trequired: false,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tshouldDisplay(values): boolean {\n\t\t\t\t\t\t\treturn values.connectionSecurity !== 'none' && values.loginEnabled === true;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'baseDn',\n\t\t\t\t\t\tinitialValue: this.adConfig.baseDn,\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tlabel: this.$locale.baseText('settings.ldap.form.baseDn.label'),\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tcapitalize: true,\n\t\t\t\t\t\t\tplaceholder: this.$locale.baseText('settings.ldap.form.baseDn.placeholder'),\n\t\t\t\t\t\t\tinfoText: this.$locale.baseText('settings.ldap.form.baseDn.infoText'),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tshouldDisplay: whenLoginEnabled,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'bindingType',\n\t\t\t\t\t\tinitialValue: 'admin',\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\ttype: 'select',\n\t\t\t\t\t\t\tlabel: this.$locale.baseText('settings.ldap.form.bindingType.label'),\n\t\t\t\t\t\t\tinfoText: this.$locale.baseText('settings.ldap.form.bindingType.infoText'),\n\t\t\t\t\t\t\toptions: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tvalue: 'admin',\n\t\t\t\t\t\t\t\t\tlabel: 'Admin',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tvalue: 'anonymous',\n\t\t\t\t\t\t\t\t\tlabel: 'Anonymous',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t\tshouldDisplay: whenLoginEnabled,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'adminDn',\n\t\t\t\t\t\tinitialValue: this.adConfig.bindingAdminDn,\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tlabel: this.$locale.baseText('settings.ldap.form.adminDn.label'),\n\t\t\t\t\t\t\tplaceholder: this.$locale.baseText('settings.ldap.form.adminDn.placeholder'),\n\t\t\t\t\t\t\tinfoText: this.$locale.baseText('settings.ldap.form.adminDn.infoText'),\n\t\t\t\t\t\t\tcapitalize: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tshouldDisplay: whenAdminBindingAndLoginEnabled,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'adminPassword',\n\t\t\t\t\t\tinitialValue: this.adConfig.bindingAdminPassword,\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tlabel: this.$locale.baseText('settings.ldap.form.adminPassword.label'),\n\t\t\t\t\t\t\ttype: 'password',\n\t\t\t\t\t\t\tcapitalize: true,\n\t\t\t\t\t\t\tinfoText: this.$locale.baseText('settings.ldap.form.adminPassword.infoText'),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tshouldDisplay: whenAdminBindingAndLoginEnabled,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'userFilter',\n\t\t\t\t\t\tinitialValue: this.adConfig.userFilter,\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tlabel: this.$locale.baseText('settings.ldap.form.userFilter.label'),\n\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\trequired: false,\n\t\t\t\t\t\t\tcapitalize: true,\n\t\t\t\t\t\t\tplaceholder: this.$locale.baseText('settings.ldap.form.userFilter.placeholder'),\n\t\t\t\t\t\t\tinfoText: this.$locale.baseText('settings.ldap.form.userFilter.infoText'),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tshouldDisplay: whenLoginEnabled,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'attributeMappingInfo',\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tlabel: this.$locale.baseText('settings.ldap.form.attributeMappingInfo.label'),\n\t\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\t\tlabelSize: 'large',\n\t\t\t\t\t\t\tlabelAlignment: 'left',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tshouldDisplay: whenLoginEnabled,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'ldapId',\n\t\t\t\t\t\tinitialValue: this.adConfig.ldapIdAttribute,\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tlabel: this.$locale.baseText('settings.ldap.form.ldapId.label'),\n\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tcapitalize: true,\n\t\t\t\t\t\t\tplaceholder: this.$locale.baseText('settings.ldap.form.ldapId.placeholder'),\n\t\t\t\t\t\t\tinfoText: this.$locale.baseText('settings.ldap.form.ldapId.infoText'),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tshouldDisplay: whenLoginEnabled,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'loginId',\n\t\t\t\t\t\tinitialValue: this.adConfig.loginIdAttribute,\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tlabel: this.$locale.baseText('settings.ldap.form.loginId.label'),\n\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\tautocomplete: 'email',\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tcapitalize: true,\n\t\t\t\t\t\t\tplaceholder: this.$locale.baseText('settings.ldap.form.loginId.placeholder'),\n\t\t\t\t\t\t\tinfoText: this.$locale.baseText('settings.ldap.form.loginId.infoText'),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tshouldDisplay: whenLoginEnabled,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'email',\n\t\t\t\t\t\tinitialValue: this.adConfig.emailAttribute,\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tlabel: this.$locale.baseText('settings.ldap.form.email.label'),\n\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\tautocomplete: 'email',\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tcapitalize: true,\n\t\t\t\t\t\t\tplaceholder: this.$locale.baseText('settings.ldap.form.email.placeholder'),\n\t\t\t\t\t\t\tinfoText: this.$locale.baseText('settings.ldap.form.email.infoText'),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tshouldDisplay: whenLoginEnabled,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'firstName',\n\t\t\t\t\t\tinitialValue: this.adConfig.firstNameAttribute,\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tlabel: this.$locale.baseText('settings.ldap.form.firstName.label'),\n\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\tautocomplete: 'email',\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tcapitalize: true,\n\t\t\t\t\t\t\tplaceholder: this.$locale.baseText('settings.ldap.form.firstName.placeholder'),\n\t\t\t\t\t\t\tinfoText: this.$locale.baseText('settings.ldap.form.firstName.infoText'),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tshouldDisplay: whenLoginEnabled,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'lastName',\n\t\t\t\t\t\tinitialValue: this.adConfig.lastNameAttribute,\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\tlabel: this.$locale.baseText('settings.ldap.form.lastName.label'),\n\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\tautocomplete: 'email',\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\tcapitalize: true,\n\t\t\t\t\t\t\tplaceholder: this.$locale.baseText('settings.ldap.form.lastName.placeholder'),\n\t\t\t\t\t\t\tinfoText: this.$locale.baseText('settings.ldap.form.lastName.infoText'),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tshouldDisplay: whenLoginEnabled,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'synchronizationEnabled',\n\t\t\t\t\t\tinitialValue: this.adConfig.synchronizationEnabled,\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\ttype: 'toggle',\n\t\t\t\t\t\t\tlabel: this.$locale.baseText('settings.ldap.form.synchronizationEnabled.label'),\n\t\t\t\t\t\t\ttooltipText: this.$locale.baseText(\n\t\t\t\t\t\t\t\t'settings.ldap.form.synchronizationEnabled.tooltip',\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tshouldDisplay: whenLoginEnabled,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'synchronizationInterval',\n\t\t\t\t\t\tinitialValue: this.adConfig.synchronizationInterval,\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\ttype: 'number',\n\t\t\t\t\t\t\tlabel: this.$locale.baseText('settings.ldap.form.synchronizationInterval.label'),\n\t\t\t\t\t\t\tinfoText: this.$locale.baseText(\n\t\t\t\t\t\t\t\t'settings.ldap.form.synchronizationInterval.infoText',\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tshouldDisplay: whenSyncAndLoginEnabled,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'pageSize',\n\t\t\t\t\t\tinitialValue: this.adConfig.searchPageSize,\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\ttype: 'number',\n\t\t\t\t\t\t\tlabel: this.$locale.baseText('settings.ldap.form.pageSize.label'),\n\t\t\t\t\t\t\tinfoText: this.$locale.baseText('settings.ldap.form.pageSize.infoText'),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tshouldDisplay: whenSyncAndLoginEnabled,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'searchTimeout',\n\t\t\t\t\t\tinitialValue: this.adConfig.searchTimeout,\n\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\ttype: 'number',\n\t\t\t\t\t\t\tlabel: this.$locale.baseText('settings.ldap.form.searchTimeout.label'),\n\t\t\t\t\t\t\tinfoText: this.$locale.baseText('settings.ldap.form.searchTimeout.infoText'),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tshouldDisplay: whenSyncAndLoginEnabled,\n\t\t\t\t\t},\n\t\t\t\t];\n\t\t\t} catch (error) {\n\t\t\t\tthis.showError(error, this.$locale.baseText('settings.ldap.configurationError'));\n\t\t\t}\n\t\t},\n\t\tasync getLdapSynchronizations(state: Parameters<Events['infinite']>[0]) {\n\t\t\ttry {\n\t\t\t\tthis.loadingTable = true;\n\t\t\t\tconst data = await this.settingsStore.getLdapSynchronizations({\n\t\t\t\t\tpage: this.page,\n\t\t\t\t});\n\n\t\t\t\tif (data.length !== 0) {\n\t\t\t\t\tthis.dataTable.push(...data.map(this.syncDataMapper));\n\t\t\t\t\tthis.page += 1;\n\t\t\t\t\tstate.loaded();\n\t\t\t\t} else {\n\t\t\t\t\tstate.complete();\n\t\t\t\t}\n\t\t\t\tthis.loadingTable = false;\n\t\t\t} catch (error) {\n\t\t\t\tthis.showError(error, this.$locale.baseText('settings.ldap.synchronizationError'));\n\t\t\t}\n\t\t},\n\t\tasync reloadLdapSynchronizations() {\n\t\t\ttry {\n\t\t\t\tthis.page = 0;\n\t\t\t\tthis.tableKey += 1;\n\t\t\t\tthis.dataTable = [];\n\t\t\t} catch (error) {\n\t\t\t\tthis.showError(error, this.$locale.baseText('settings.ldap.synchronizationError'));\n\t\t\t}\n\t\t},\n\t},\n});\n</script>\n\n<style lang=\"scss\" module>\n.container {\n\t> * {\n\t\tmargin-bottom: var(--spacing-2xl);\n\t}\n}\n\n.syncTable {\n\tmargin-bottom: var(--spacing-2xl);\n}\n\n.header {\n\tdisplay: flex;\n\talign-items: center;\n\twhite-space: nowrap;\n\n\t*:first-child {\n\t\tflex-grow: 1;\n\t}\n}\n\n.enableFeatureContainer {\n\tmargin-bottom: var(--spacing-1xl);\n}\n\n.enableFeatureContainer > span {\n\tfont-size: var(--font-size-s);\n\tfont-weight: var(--font-weight-bold);\n\tpadding: 0;\n}\n\n.enableFeatureContainer {\n\t> * {\n\t\tpadding: 0.5em;\n\t}\n}\n\n.sectionHeader {\n\tmargin-bottom: var(--spacing-s);\n}\n\n.settingsForm {\n\t:global(.form-text) {\n\t\tmargin-top: var(--spacing-xl);\n\t}\n}\n\n.docsInfoTip {\n\t&,\n\t& > div {\n\t\tmargin-bottom: var(--spacing-xl);\n\t}\n}\n</style>\n"],"names":["_sfc_main","defineComponent","InfiniteLoading","ElTable","ElTableColumn","useToast","useMessage","createEventBus","mapStores","useUsersStore","useSettingsStore","useUIStore","data","row","column","input","ready","sync","startedAt","endedAt","runTimeInMinutes","humanizeDuration","capitalizeFirstLetter","convertToDisplayDate","formInputsRef","newConfiguration","saveForm","MODAL_CONFIRM","error","whenLoginEnabled","values","whenSyncAndLoginEnabled","whenAdminBindingAndLoginEnabled","state","_hoisted_1","_hoisted_2","_hoisted_3","isLDAPFeatureEnabled","_ctx","_openBlock","_createElementBlock","$style","_createElementVNode","_normalizeClass","_createVNode","_component_n8n_heading","$locale","_withCtx","_createTextVNode","_toDisplayString","_component_n8n_info_tip","formInputs","_createBlock","_component_n8n_form_inputs","onInput","onReadyToSubmit","onSubmit","_createCommentVNode","loginEnabled","_component_n8n_button","loadingTestConnection","onTestConnectionClick","hasAnyChanges","readyToSubmit","_hoisted_4","_withDirectives","_component_ElTable","dataTable","_component_InfiniteLoading","getLdapSynchronizations","_hoisted_5","onDryRunClick","onLiveRunClick","_component_n8n_action_box","goToUpgrade"],"mappings":"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"}