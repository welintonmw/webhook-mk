import{ao as z,db as v,d9 as W,da as V}from"./index-1OxaEeO3.js";import{G as g,ag as r,l as o,m as t,F as y,a7 as _,I as l,T as u,R as n,U as a,O as p,S as w,M as k,a2 as M,p as q}from"./vendor-Dv5OeN6t.js";import{_ as $}from"./n8n-4UEsHtUL.js";const E=g({name:"NodeList",components:{NodeIcon:z},props:{nodes:{type:Array},limit:{type:Number,default:4},size:{type:String,default:"sm"}},computed:{filteredCoreNodes(){return v(this.nodes)},hiddenNodes(){return this.filteredCoreNodes.length-this.countNodesToBeSliced(this.filteredCoreNodes)},slicedNodes(){return this.filteredCoreNodes.slice(0,this.countNodesToBeSliced(this.filteredCoreNodes))}},methods:{countNodesToBeSliced(e){return e.length>this.limit?this.limit-1:this.limit}}}),I="_list_10uzg_1",L="_container_10uzg_9",U="_sm_10uzg_14",A="_md_10uzg_18",H="_button_10uzg_22",O="_buttonSm_10uzg_36",R="_buttonMd_10uzg_43",F={list:I,container:L,sm:U,md:A,button:H,buttonSm:O,buttonMd:R};function j(e,s,h,C,b,B){const c=r("NodeIcon");return o(),t("div",{class:l(e.$style.list)},[(o(!0),t(y,null,_(e.slicedNodes,d=>(o(),t("div",{key:d.name,class:l([e.$style.container,e.$style[e.size]])},[a(c,{"node-type":d,size:e.size==="md"?24:18,"show-tooltip":!0},null,8,["node-type","size"])],2))),128)),e.filteredCoreNodes.length>e.limit+1?(o(),t("div",{key:0,class:l([e.$style.button,e.size==="md"?e.$style.buttonMd:e.$style.buttonSm])}," +"+u(e.hiddenNodes),3)):n("",!0)],2)}const D={$style:F},G=$(E,[["render",j],["__cssModules",D]]),J=g({name:"TemplateCard",components:{TimeAgo:W,NodeList:G},props:{workflow:{type:Object},lastItem:{type:Boolean,default:!1},firstItem:{type:Boolean,default:!1},useWorkflowButton:{type:Boolean},loading:{type:Boolean},simpleView:{type:Boolean,default:!1}},data(){return{nodesToBeShown:5}},methods:{filterTemplateNodes:v,abbreviateNumber:V,countNodesToBeSliced(e){return e.length>this.nodesToBeShown?this.nodesToBeShown-1:this.nodesToBeShown},onUseWorkflowClick(e){this.$emit("useWorkflow",e)},onCardClick(e){this.$emit("click",e)}}}),K="_nodes_psqnp_1",P="_icon_psqnp_8",Q="_card_psqnp_12",X="_hideOnHover_psqnp_24",Y="_buttonContainer_psqnp_27",Z="_loaded_psqnp_38",x="_first_psqnp_42",ee="_last_psqnp_48",oe="_content_psqnp_53",te="_line_psqnp_58",ne="_loading_psqnp_64",se="_nodesContainer_psqnp_69",le={nodes:K,icon:P,card:Q,hideOnHover:X,buttonContainer:Y,loaded:Z,first:x,last:ee,content:oe,line:te,loading:ne,nodesContainer:se},ie={key:1},re={key:0};function ae(e,s,h,C,b,B){const c=r("n8n-loading"),d=r("n8n-heading"),i=r("font-awesome-icon"),m=r("n8n-text"),f=r("TimeAgo"),N=r("NodeList"),T=r("n8n-button");return o(),t("div",{class:l([e.$style.card,e.lastItem&&e.$style.last,e.firstItem&&e.$style.first,!e.loading&&e.$style.loaded]),"data-test-id":"template-card",onClick:s[0]||(s[0]=(...S)=>e.onCardClick&&e.onCardClick(...S))},[e.loading?(o(),t("div",{key:0,class:l(e.$style.loading)},[a(c,{rows:2,"shrink-last":!1,loading:e.loading},null,8,["loading"])],2)):e.workflow?(o(),t("div",ie,[a(d,{bold:!0,size:"small"},{default:p(()=>[w(u(e.workflow.name),1)]),_:1}),e.simpleView?n("",!0):(o(),t("div",{key:0,class:l(e.$style.content)},[e.workflow.totalViews?(o(),t("span",re,[a(m,{size:"small",color:"text-light"},{default:p(()=>[a(i,{icon:"eye"}),w(" "+u(e.abbreviateNumber(e.workflow.totalViews)),1)]),_:1})])):n("",!0),e.workflow.totalViews?(o(),t("div",{key:1,class:l(e.$style.line),textContent:"|"},null,2)):n("",!0),a(m,{size:"small",color:"text-light"},{default:p(()=>[a(f,{date:e.workflow.createdAt},null,8,["date"])]),_:1}),e.workflow.user?(o(),t("div",{key:2,class:l(e.$style.line),textContent:"|"},null,2)):n("",!0),e.workflow.user?(o(),k(m,{key:3,size:"small",color:"text-light"},{default:p(()=>[w("By "+u(e.workflow.user.username),1)]),_:1})):n("",!0)],2))])):n("",!0),!e.loading&&e.workflow?(o(),t("div",{key:2,class:l([e.$style.nodesContainer,e.useWorkflowButton&&e.$style.hideOnHover])},[e.workflow.nodes?(o(),k(N,{key:0,nodes:e.workflow.nodes,limit:e.nodesToBeShown,size:"md"},null,8,["nodes","limit"])):n("",!0)],2)):n("",!0),e.useWorkflowButton?(o(),t("div",{key:3,class:l(e.$style.buttonContainer)},[e.useWorkflowButton?(o(),k(T,{key:0,outline:"",label:"Use workflow","data-test-id":"use-workflow-button",onClick:M(e.onUseWorkflowClick,["stop"])},null,8,["onClick"])):n("",!0)],2)):n("",!0)],2)}const de={$style:le},ue=$(J,[["render",ae],["__cssModules",de]]),me=g({name:"TemplateList",components:{TemplateCard:ue},props:{infiniteScrollEnabled:{type:Boolean,default:!1},loading:{type:Boolean},useWorkflowButton:{type:Boolean,default:!1},workflows:{type:Array,default:()=>[]},totalWorkflows:{type:Number,default:0},simpleView:{type:Boolean,default:!1},totalCount:{type:Number,default:0}},mounted(){if(this.infiniteScrollEnabled){const e=document.getElementById("content");e&&e.addEventListener("scroll",this.onScroll)}},beforeUnmount(){const e=document.getElementById("content");e&&e.removeEventListener("scroll",this.onScroll)},methods:{onScroll(){const e=this.$refs.loader;if(!e||this.loading)return;const s=e.getBoundingClientRect();s.top>=0&&s.left>=0&&s.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&s.right<=(window.innerWidth||document.documentElement.clientWidth)&&this.$emit("loadMore")},onCardClick(e,s){this.$emit("openTemplate",{event:e,id:s})},onUseWorkflow(e,s){this.$emit("useWorkflow",{event:e,id:s})}}}),ce="_header_1ivn7_1",fe="_workflowButton_1ivn7_5",pe="_button_1ivn7_5",we="_nodes_1ivn7_8",ke={header:ce,workflowButton:fe,button:pe,nodes:we},he={key:0,"data-test-id":"template-count-label"},ye=["textContent"],_e={key:0,ref:"loader"},ge={key:1,"data-test-id":"templates-loading-container"};function $e(e,s,h,C,b,B){const c=r("n8n-heading"),d=r("TemplateCard");return e.loading||e.workflows.length?(o(),t("div",{key:0,class:l(e.$style.list)},[e.simpleView?n("",!0):(o(),t("div",{key:0,class:l(e.$style.header)},[a(c,{bold:!0,size:"medium",color:"text-light"},{default:p(()=>[w(u(e.$locale.baseText("templates.workflows"))+" ",1),e.totalCount>0?(o(),t("span",he,"("+u(e.totalCount)+")",1)):n("",!0),!e.loading&&e.totalWorkflows?(o(),t("span",{key:1,textContent:u(`(${e.totalWorkflows})`)},null,8,ye)):n("",!0)]),_:1})],2)),q("div",{class:l(e.$style.container)},[(o(!0),t(y,null,_(e.workflows,(i,m)=>(o(),k(d,{key:i.id,workflow:i,"first-item":m===0,"simple-view":e.simpleView,"last-item":m===e.workflows.length-1&&!e.loading,"use-workflow-button":e.useWorkflowButton,onClick:f=>e.onCardClick(f,i.id),onUseWorkflow:f=>e.onUseWorkflow(f,i.id)},null,8,["workflow","first-item","simple-view","last-item","use-workflow-button","onClick","onUseWorkflow"]))),128)),e.infiniteScrollEnabled?(o(),t("div",_e,null,512)):n("",!0),e.loading?(o(),t("div",ge,[(o(),t(y,null,_(4,i=>a(d,{key:"index-"+i,loading:!0,"first-item":e.workflows.length===0&&i===1,"last-item":i===4},null,8,["first-item","last-item"])),64))])):n("",!0)],2)],2)):n("",!0)}const Ce={$style:ke},Ne=$(me,[["render",$e],["__cssModules",Ce]]);export{G as N,Ne as T};
//# sourceMappingURL=TemplateList-By-t2s0M.js.map
