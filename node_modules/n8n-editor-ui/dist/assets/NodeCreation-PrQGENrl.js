const __vite__fileDeps=["assets/NodeCreator-DlK1669m.js","assets/index-1OxaEeO3.js","assets/vendor-Dv5OeN6t.js","assets/pinia-sugP77Im.js","assets/n8n-4UEsHtUL.js","assets/axios-Mm4CS0gO.js","assets/esprima-next-nhoSXAeq.js","assets/luxon-CLwAIbs0.js","assets/lodash-es-CZ1inz46.js","assets/n8n-C4uNEd0H.css","assets/flatted-DN8lQ2XG.js","assets/@vueuse/core-BBHtM40w.js","assets/@n8n/permissions-BxxteU-C.js","assets/dateformat-CIxnBJXX.js","assets/vue-i18n-Delvyc9x.js","assets/uuid-SoommWqA.js","assets/@n8n/codemirror-lang-sql-DBO6T13I.js","assets/@lezer/common-B6ct0j_v.js","assets/prettier-bS6l4Vb1.js","assets/@jsplumb/util-DS-9vq_E.js","assets/@jsplumb/core-CVBraiyY.js","assets/@jsplumb/common-CF-b-6-M.js","assets/@jsplumb/connector-bezier-BGU0Ovbw.js","assets/@jsplumb/browser-ui-BVF2KoJK.js","assets/codemirror-lang-html-n8n-CWDO6_kP.js","assets/@n8n/codemirror-lang-Dl0FW_KM.js","assets/fast-json-stable-stringify-BOfzoJX1.js","assets/timeago.js-CiyKClrF.js","assets/qrcode.vue-BGkPba5A.js","assets/vue3-touch-events-mV0oX_Sl.js","assets/chart.js-343vZi4M.js","assets/index-BhLXy8h2.css","assets/nodeCreator.store-FIsc3SCx.js","assets/NodeCreator-CUn9v_Je.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{e as W,_ as $}from"./n8n-4UEsHtUL.js";import{aN as A,x as U,as as D,aV as x,eg as L,eh as K,cA as j,al as q,j as v,a3 as z,c7 as F,c9 as X,a4 as R,N as V,aU as Q,b2 as Z,ei as J,ej as ee,ek as te,el as oe,e as ne,aH as Y,em as se,en as re,eo as ae}from"./index-1OxaEeO3.js";import{u as M,t as ie,s as ce}from"./nodeCreator.store-FIsc3SCx.js";import{e as de,G as le,Z as ue,ag as pe,l as B,m as H,I as g,p as G,U as y,O as w,R as _e,M as fe,u as Ne,aM as Te,aK as ye}from"./vendor-Dv5OeN6t.js";const Ce=()=>{const m=M(),p=U(),S=[A.PLUS_ENDPOINT,A.NODE_CONNECTION_ACTION,A.NODE_CONNECTION_DROP],h=de(()=>({actions:p.baseText("nodeCreator.actionsCategory.actions")??"",triggers:p.baseText("nodeCreator.actionsCategory.triggers")??""}));function _(e){const t=[F,X];return m.mergedNodes.filter(n=>t.some(s=>s===n.name)).map(n=>{const s=ie(n,e,"action");if(s.type==="action"){const i=`nodeCreator.actionsPlaceholderNode.${n.name.replace("n8n-nodes-base.","")}`,d=p.baseText(i);d!==i&&(s.properties.displayName=d)}return s})}function f(e,t){return e.filter(o=>o.type==="action"&&o.properties.codex.categories.includes(t))}function O(e){var r,i,d,u;const t=ce([...e]),o=new Set;for(const c of t){if(c.type!=="action")continue;const N=(i=(r=c.properties)==null?void 0:r.codex)==null?void 0:i.label;o.add(N)}if(o.size<=1)return t;const n=new Map;for(let c=0;c<t.length;c++){const N=t[c];if(N.type!=="action")continue;const T=(u=(d=N.properties)==null?void 0:d.codex)==null?void 0:u.label;n.has(T)||n.set(T,c)}let s=0;for(const c of o){const N={uuid:c,type:"label",key:c,subcategory:t[0].key,properties:{key:c}},T=n.get(c);T!==void 0&&(t.splice(T+s,0,N),s++)}return t}function C(e,t,o=!0){const n=f(e,t);return o?O(n):n}function I(e){const t=e.displayOptions,o=Object.keys((t==null?void 0:t.show)??{}).reduce((n,s)=>{var r,i;return n[s]=(i=(r=t==null?void 0:t.show)==null?void 0:r[s])==null?void 0:i[0],n},{});return{name:e.displayName,key:e.name,value:{...e.values,...o}}}function b(e){return e.length===2?R().isTriggerNode(e[0].type):!1}function P(e){const{selectedView:t,openSource:o}=M(),{workflowTriggerNodes:n}=v(),s=e.some(c=>R().isTriggerNode(c.type)),r=n.length>0,i=t===Z,d=e.every(c=>c.type===V);return!S.includes(o)&&!s&&!r&&i&&!d}function E(e){const{allNodes:t}=v(),o=[J,ee,te,oe,L],n=t.find(r=>[Q,x].includes(r.type))===void 0;return e.some(r=>o.includes(r.type))&&n}function k(e){if(e.length===0)return{nodes:[],connections:[]};const t=[],o=[],n=e.find(s=>s.type!==D);return n&&(n.openDetail=!0),E(e)?(e.unshift({type:x,isAutoAdd:!0}),o.push({from:{nodeIndex:0},to:{nodeIndex:1}})):P(e)?(e.unshift({type:D,isAutoAdd:!0}),o.push({from:{nodeIndex:0},to:{nodeIndex:1}})):b(e)&&o.push({from:{nodeIndex:0},to:{nodeIndex:1}}),e.forEach((s,r)=>{switch(s.type===L&&(s.type=K),t.push(s),s.type){case j:{const i=r,d=i+1;t.push({type:q,isAutoAdd:!0,name:p.baseText("nodeView.replaceMe")}),o.push({from:{nodeIndex:i,outputIndex:1},to:{nodeIndex:d}},{from:{nodeIndex:d},to:{nodeIndex:i}});break}}}),{nodes:t,connections:o}}function a(e,t,o=""){const{$onAction:n}=v(),s=n(({name:r,after:i,store:{setLastNodeParameters:d},args:u})=>{r!=="addNode"||u[0].type!==e.key||i(()=>{d(e),t&&l(e,t,o),s()})});return s}function l(e,t,o){const n={node_type:e.key,action:e.name,source_mode:o.toLowerCase(),resource:e.value.resource||""};z().run("nodeCreateList.addAction",n),t==null||t.trackNodesPanel("nodeCreateList.addAction",n)}return{actionsCategoryLocales:h,getPlaceholderTriggerActions:_,parseCategoryActions:C,getAddedNodesAndConnections:k,getActionData:I,setAddedNodeActionParameters:a}},Ee=le({__name:"NodeCreation",props:{nodeViewScale:{},createNodeActive:{type:Boolean,default:!1}},emits:["addNodes","toggleNodeCreator"],setup(m,{emit:p}){const S=ye(async()=>await W(()=>import("./NodeCreator-DlK1669m.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33]))),h=m,_=p,f=ue({showStickyButton:!1}),O=ne(),{getAddedNodesAndConnections:C}=Ce();function I(a){const l=a.target;f.showStickyButton=!0;const e=t=>{if(l){const o=l.getBoundingClientRect(),n=o.height,s=o.width,r=o.left,i=r+s,d=o.top,u=d+n;t.pageX>r&&t.pageX<i&&t.pageY>d&&t.pageY<u||(f.showStickyButton=!1,document.removeEventListener("mousemove",e,!1))}};document.addEventListener("mousemove",e,!1)}function b(){_("toggleNodeCreator",{source:A.ADD_NODE_BUTTON,createNodeActive:!0})}function P(){document.activeElement&&document.activeElement.blur();const a=[...O.nodeViewOffsetPosition],l=se(h.nodeViewScale,a);l[0]-=re/2,l[1]-=ae/2,_("addNodes",C([{type:V,position:l}]))}function E(){_("toggleNodeCreator",{createNodeActive:!1})}function k(a){_("addNodes",C(a.map(l=>({type:l})))),E()}return(a,l)=>{const e=pe("n8n-icon-button");return B(),H("div",null,[a.createNodeActive?_e("",!0):(B(),H("div",{key:0,class:g([a.$style.nodeButtonsWrapper,f.showStickyButton?a.$style.noEvents:""]),onMouseenter:I},[G("div",{class:g(a.$style.nodeCreatorButton),"data-test-id":"node-creator-plus-button"},[y(Y,{label:a.$locale.baseText("nodeView.openNodesPanel"),shortcut:{keys:["Tab"]},placement:"left"},{default:w(()=>[y(e,{size:"xlarge",icon:"plus",type:"tertiary",class:g(a.$style.nodeCreatorPlus),onClick:b},null,8,["class"])]),_:1},8,["label"]),G("div",{class:g([a.$style.addStickyButton,f.showStickyButton?a.$style.visibleButton:""]),"data-test-id":"add-sticky-button",onClick:P},[y(Y,{label:a.$locale.baseText("nodeView.addStickyHint"),shortcut:{keys:["s"],shiftKey:!0},placement:"left"},{default:w(()=>[y(e,{type:"tertiary",icon:["far","note-sticky"]})]),_:1},8,["label"])],2)],2)],34)),(B(),fe(Te,null,{default:w(()=>[y(Ne(S),{active:a.createNodeActive,onNodeTypeSelected:k,onCloseNodeCreator:E},null,8,["active"])]),_:1}))])}}}),ge="_nodeButtonsWrapper_1hql8_1",Ae="_addStickyButton_1hql8_10",me="_visibleButton_1hql8_17",Se="_noEvents_1hql8_22",he="_nodeCreatorButton_1hql8_26",Oe="_nodeCreatorPlus_1hql8_43",Ie={nodeButtonsWrapper:ge,addStickyButton:Ae,visibleButton:me,noEvents:Se,nodeCreatorButton:he,nodeCreatorPlus:Oe},be={$style:Ie},Pe=$(Ee,[["__cssModules",be]]),De=Object.freeze(Object.defineProperty({__proto__:null,default:Pe},Symbol.toStringTag,{value:"Module"}));export{De as N,Ce as u};
//# sourceMappingURL=NodeCreation-PrQGENrl.js.map
