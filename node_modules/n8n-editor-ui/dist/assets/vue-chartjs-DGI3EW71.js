import{C as w}from"./chart.js-343vZi4M.js";import{G as R,r as I,s as L,b as M,y as S,d as q,af as K,ac as m,aF as b}from"./vendor-Dv5OeN6t.js";const U={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},A={type:{type:String,required:!0},...U};function d(t){return b(t)?m(t):t}function B(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return b(e)?new Proxy(t,{}):t}function F(t,e){const a=t.options;a&&e&&Object.assign(a,e)}function P(t,e){t.labels=e}function C(t,e,a){const u=[];t.datasets=e.map(s=>{const o=t.datasets.find(h=>h[a]===s[a]);return!o||!s.data||u.includes(o)?{...s}:(u.push(o),Object.assign(o,s),o)})}function G(t,e){const a={labels:[],datasets:[]};return P(a,t.labels),C(a,t.datasets,e),a}const k=R({props:A,setup(t,e){let{expose:a}=e;const u=I(null),s=L(null);a({chart:s});const o=()=>{if(!u.value)return;const{type:n,data:l,options:f,plugins:i,datasetIdKey:v}=t,p=G(l,v),r=B(p,l);s.value=new w(u.value,{type:n,data:r,options:{...f},plugins:i})},h=()=>{const n=m(s.value);n&&(n.destroy(),s.value=null)},O=n=>{n.update(t.updateMode)};return M(o),S(h),q([()=>t.options,()=>t.data],(n,l)=>{let[f,i]=n,[v,p]=l;const r=m(s.value);if(!r)return;let y=!1;if(f){const c=d(f),g=d(v);c&&c!==g&&(F(r,c),y=!0)}if(i){const c=d(i.labels),g=d(p.labels),x=d(i.datasets),D=d(p.datasets);c!==g&&(P(r.config.data,c),y=!0),x&&x!==D&&(C(r.config.data,x,t.datasetIdKey),y=!0)}y&&O(r)},{deep:!0}),()=>K("canvas",{ref:u})}});export{k as C};
//# sourceMappingURL=vue-chartjs-DGI3EW71.js.map
