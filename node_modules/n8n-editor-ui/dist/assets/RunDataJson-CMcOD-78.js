const __vite__fileDeps=["assets/RunDataJsonActions-BQBpmtOi.js","assets/pinia-sugP77Im.js","assets/n8n-4UEsHtUL.js","assets/axios-Mm4CS0gO.js","assets/esprima-next-nhoSXAeq.js","assets/luxon-CLwAIbs0.js","assets/vendor-Dv5OeN6t.js","assets/lodash-es-CZ1inz46.js","assets/n8n-C4uNEd0H.css","assets/jsonpath-rUxBTvsX.js","assets/index-1OxaEeO3.js","assets/flatted-DN8lQ2XG.js","assets/@vueuse/core-BBHtM40w.js","assets/@n8n/permissions-BxxteU-C.js","assets/dateformat-CIxnBJXX.js","assets/vue-i18n-Delvyc9x.js","assets/uuid-SoommWqA.js","assets/@n8n/codemirror-lang-sql-DBO6T13I.js","assets/@lezer/common-B6ct0j_v.js","assets/prettier-bS6l4Vb1.js","assets/@jsplumb/util-DS-9vq_E.js","assets/@jsplumb/core-CVBraiyY.js","assets/@jsplumb/common-CF-b-6-M.js","assets/@jsplumb/connector-bezier-BGU0Ovbw.js","assets/@jsplumb/browser-ui-BVF2KoJK.js","assets/codemirror-lang-html-n8n-CWDO6_kP.js","assets/@n8n/codemirror-lang-Dl0FW_KM.js","assets/fast-json-stable-stringify-BOfzoJX1.js","assets/timeago.js-CiyKClrF.js","assets/qrcode.vue-BGkPba5A.js","assets/vue3-touch-events-mV0oX_Sl.js","assets/chart.js-343vZi4M.js","assets/index-BhLXy8h2.css","assets/RunDataJsonActions-BAzswsWH.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{e as b,_ as P}from"./n8n-4UEsHtUL.js";import{V as v}from"./vue-json-pretty-Cqx2Hpq3.js";import{D as _}from"./NodeDetailsView-DcV7LI-g.js";import{et as J,j,K as k,dO as S,s as w,es as M,aA as N,a3 as E}from"./index-1OxaEeO3.js";import{m as $}from"./pinia-sugP77Im.js";import{M as A,T}from"./TextWithHighlights-kUoC0rXY.js";import{G as R,r as d,aK as C,ag as o,l as s,m as V,M as r,O as p,R as u,aM as H,U as l,I as m}from"./vendor-Dv5OeN6t.js";import"./axios-Mm4CS0gO.js";import"./esprima-next-nhoSXAeq.js";import"./luxon-CLwAIbs0.js";import"./lodash-es-CZ1inz46.js";import"./file-saver-By8WREO3.js";import"./dateFormatter-CfbOITvW.js";import"./dateformat-CIxnBJXX.js";import"./RunDataAi-C3XiqNZa.js";import"./flatted-DN8lQ2XG.js";import"./@vueuse/core-BBHtM40w.js";import"./@n8n/permissions-BxxteU-C.js";import"./vue-i18n-Delvyc9x.js";import"./uuid-SoommWqA.js";import"./@n8n/codemirror-lang-sql-DBO6T13I.js";import"./@lezer/common-B6ct0j_v.js";import"./prettier-bS6l4Vb1.js";import"./@jsplumb/util-DS-9vq_E.js";import"./@jsplumb/core-CVBraiyY.js";import"./@jsplumb/common-CF-b-6-M.js";import"./@jsplumb/connector-bezier-BGU0Ovbw.js";import"./@jsplumb/browser-ui-BVF2KoJK.js";import"./codemirror-lang-html-n8n-CWDO6_kP.js";import"./@n8n/codemirror-lang-Dl0FW_KM.js";import"./fast-json-stable-stringify-BOfzoJX1.js";import"./timeago.js-CiyKClrF.js";import"./qrcode.vue-BGkPba5A.js";import"./vue3-touch-events-mV0oX_Sl.js";import"./chart.js-343vZi4M.js";import"./useWorkflowActivate-npf1npdP.js";const I=C(async()=>await b(()=>import("./RunDataJsonActions-BQBpmtOi.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33]))),O=R({name:"RunDataJson",components:{VueJsonPretty:v,Draggable:_,RunDataJsonActions:I,MappingPill:A,TextWithHighlights:T},props:{editMode:{type:Object,default:()=>({})},pushRef:{type:String},paneType:{type:String},node:{type:Object,required:!0},inputData:{type:Array,required:!0},mappingEnabled:{type:Boolean},distanceFromActive:{type:Number,required:!0},runIndex:{type:Number},totalRuns:{type:Number},search:{type:String}},setup(){const e=E(),a=d(J),n=d(null),h=d("json");return{externalHooks:e,selectedJsonPath:a,draggingPath:n,displayMode:h}},computed:{...$(k,j),jsonData(){return S(this.inputData)},highlight(){return this.ndvStore.highlightDraggables}},methods:{getShortKey(e){return e?w(e.dataset.name||"",16,2):""},getJsonParameterPath(e){const a=e.replace(/^(\["?\d"?])/,"");return M({nodeName:this.node.name,distanceFromActive:this.distanceFromActive,path:a})},onDragStart(e){e!=null&&e.dataset.path&&(this.draggingPath=e.dataset.path),this.ndvStore.resetMappingTelemetry()},onDragEnd(e){this.draggingPath=null;const a=this.ndvStore.mappingTelemetry,n={src_node_type:this.node.type,src_field_name:e.dataset.name||"",src_nodes_back:this.distanceFromActive,src_run_index:this.runIndex,src_runs_total:this.totalRuns,src_field_nest_level:e.dataset.depth||0,src_view:"json",src_element:e,success:!1,...a};setTimeout(()=>{this.externalHooks.run("runDataJson.onDragEnd",n),this.$telemetry.track("User dragged data for mapping",n,{withPostHog:!0})},1e3)},getContent(e){return N(e)?`"${e}"`:JSON.stringify(e)},getListItemName(e){return e.replace(/^(\["?\d"?]\.?)/g,"")}}}),F="_jsonDisplay_uww64_1",K="_mappable_uww64_19",B="_highlight_uww64_25",W="_dragged_uww64_26",q={jsonDisplay:F,mappable:K,highlight:B,dragged:W};function L(e,a,n,h,z,G){const c=o("RunDataJsonActions"),y=o("MappingPill"),i=o("TextWithHighlights"),f=o("VueJsonPretty"),D=o("Draggable");return s(),V("div",{class:m([e.$style.jsonDisplay,{[e.$style.highlight]:e.highlight}])},[(s(),r(H,null,{default:p(()=>[e.editMode.enabled?u("",!0):(s(),r(c,{key:0,node:e.node,"push-ref":e.pushRef,"display-mode":e.displayMode,"distance-from-active":e.distanceFromActive,"selected-json-path":e.selectedJsonPath,"json-data":e.jsonData,"pane-type":e.paneType},null,8,["node","push-ref","display-mode","distance-from-active","selected-json-path","json-data","pane-type"]))]),_:1})),l(D,{type:"mapping","target-data-key":"mappable",disabled:!e.mappingEnabled,onDragstart:e.onDragStart,onDragend:e.onDragEnd},{preview:p(({canDrop:t,el:g})=>[g?(s(),r(y,{key:0,html:e.getShortKey(g),"can-drop":t},null,8,["html","can-drop"])):u("",!0)]),default:p(()=>[l(f,{data:e.jsonData,deep:10,"show-length":!0,"selected-value":e.selectedJsonPath,"root-path":"","selectable-type":"single",class:"json-data","onUpdate:selectedValue":a[0]||(a[0]=t=>e.selectedJsonPath=t)},{renderNodeKey:p(({node:t})=>[l(i,{content:e.getContent(t.key),search:e.search,"data-target":"mappable","data-value":e.getJsonParameterPath(t.path),"data-name":t.key,"data-path":t.path,"data-depth":t.level,class:m({[e.$style.mappable]:e.mappingEnabled,[e.$style.dragged]:e.draggingPath===t.path})},null,8,["content","search","data-value","data-name","data-path","data-depth","class"])]),renderNodeValue:p(({node:t})=>[isNaN(t.index)?(s(),r(i,{key:0,content:e.getContent(t.content),search:e.search},null,8,["content","search"])):(s(),r(i,{key:1,content:e.getContent(t.content),search:e.search,"data-target":"mappable","data-value":e.getJsonParameterPath(t.path),"data-name":e.getListItemName(t.path),"data-path":t.path,"data-depth":t.level,class:m([{[e.$style.mappable]:e.mappingEnabled,[e.$style.dragged]:e.draggingPath===t.path},"ph-no-capture"])},null,8,["content","search","data-value","data-name","data-path","data-depth","class"]))]),_:1},8,["data","selected-value"])]),_:1},8,["disabled","onDragstart","onDragend"])],2)}const U={$style:q},$e=P(O,[["render",L],["__cssModules",U]]);export{$e as default};
//# sourceMappingURL=RunDataJson-CMcOD-78.js.map
