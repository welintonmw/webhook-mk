import{dd as f,aC as m,V as c,b4 as u,dg as T,dh as k,di as y,b3 as E}from"./index-1OxaEeO3.js";async function I(e){const{credentialOverrides:o,nodeTypeProvider:t,rootStore:n,template:a,workflowsStore:s}=e,r=await k(n.restApiContext,{name:a.name}),l=y(t,a.workflow.nodes,o),i=E(l),w=a.workflow.connections,p={name:r.name,nodes:i,connections:w,active:!1,meta:{templateId:a.id.toString()}};return await s.createNewWorkflow(p)}async function N(e){const{router:o,templateId:t,inNewBrowserTab:n=!1,telemetry:a,source:s}=e;a.track("User opened cred setup",{source:s},{withPostHog:!0});const r={name:c.TEMPLATE_SETUP,params:{id:t}};if(n){const l=o.resolve(r);window.open(l.href,"_blank")}else await o.push(r)}async function d(e){const{externalHooks:o,templateId:t,templatesStore:n,inNewBrowserTab:a,router:s}=e,r={name:c.TEMPLATE_IMPORT,params:{id:t}},l={source:"workflow",template_id:u(t),wf_template_repo_session_id:n.currentSessionId};if(await o.run("templatesWorkflowView.openWorkflow",l),a){const i=s.resolve(r);window.open(i.href,"_blank")}else await s.push(r)}function P(e,o){return o.workflow.nodes.some(t=>T(e,t))}async function S(e,o){const t=e.getFullTemplateById(o);return t||(await e.fetchTemplateById(o),e.getFullTemplateById(o))}async function W(e){const{nodeTypesStore:o,posthogStore:t,templateId:n,templatesStore:a}=e;if(!t.isFeatureEnabled(f)){await d(e);return}const[r]=await Promise.all([S(a,n),o.loadNodeTypesIfNotLoaded()]);m(r),P(o,r)?await N(e):await d(e)}export{I as c,W as u};
//# sourceMappingURL=templateActions-w_1vSarr.js.map
