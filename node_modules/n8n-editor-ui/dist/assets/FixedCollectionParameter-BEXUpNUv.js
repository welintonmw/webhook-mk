import{au as P,h as y,_ as I}from"./n8n-4UEsHtUL.js";import{g as k}from"./lodash-es-CZ1inz46.js";import{G as S,ag as u,l,m as n,U as m,O as f,S as R,T as A,R as p,F as b,a7 as g,M as d,p as $,aM as U,I as j,a2 as B}from"./vendor-Dv5OeN6t.js";import"./axios-Mm4CS0gO.js";import"./esprima-next-nhoSXAeq.js";import"./luxon-CLwAIbs0.js";const L=S({name:"FixedCollectionParameter",props:{nodeValues:{type:Object,required:!0},parameter:{type:Object,required:!0},path:{type:String,required:!0},values:{type:Object,default:()=>({})},isReadOnly:{type:Boolean,default:!1}},data(){return{selectedOption:void 0,mutableValues:{}}},computed:{getPlaceholderText(){const e=this.$locale.nodeText().placeholder(this.parameter,this.path);return e||this.$locale.baseText("fixedCollectionParameter.choose")},getProperties(){const e=[];let t;for(const o of this.propertyNames)t=this.getOptionProperties(o),t!==void 0&&e.push(t);return e},multipleValues(){var e;return!!((e=this.parameter.typeOptions)!=null&&e.multipleValues)},parameterOptions(){return this.multipleValues&&P(this.parameter.options)?this.parameter.options:this.parameter.options.filter(e=>!this.propertyNames.includes(e.name))},propertyNames(){return Object.keys(this.mutableValues||{})},sortable(){var e;return!!((e=this.parameter.typeOptions)!=null&&e.sortable)}},watch:{values:{handler(e){this.mutableValues=y(e)},deep:!0}},created(){this.mutableValues=y(this.values)},methods:{deleteOption(e,t){const o=this.mutableValues[e];!o||o.length>1?this.$emit("valueChanged",{name:this.getPropertyPath(e,t),value:void 0}):this.$emit("valueChanged",{name:this.getPropertyPath(e),value:void 0})},getPropertyPath(e,t){return`${this.path}.${e}`+(t!==void 0?`[${t}]`:"")},getOptionProperties(e){if(P(this.parameter.options)){for(const t of this.parameter.options)if(t.name===e)return t}},moveOptionDown(e,t){Array.isArray(this.mutableValues[e])&&this.mutableValues[e].splice(t+1,0,this.mutableValues[e].splice(t,1)[0]);const o={name:this.getPropertyPath(e),value:this.mutableValues[e],type:"optionsOrderChanged"};this.$emit("valueChanged",o)},moveOptionUp(e,t){var i;Array.isArray(this.mutableValues[e])&&((i=this.mutableValues)==null||i[e].splice(t-1,0,this.mutableValues[e].splice(t,1)[0]));const o={name:this.getPropertyPath(e),value:this.mutableValues[e],type:"optionsOrderChanged"};this.$emit("valueChanged",o)},optionSelected(e){const t=this.getOptionProperties(e);if(t===void 0)return;const o=`${this.path}.${t.name}`,i={};for(const s of t.values)if(s.type==="fixedCollection"&&s.typeOptions!==void 0&&s.typeOptions.multipleValues===!0)i[s.name]={};else if(s.typeOptions!==void 0&&s.typeOptions.multipleValues===!0){const c=k(this.nodeValues,[this.path,s.name],[]);Array.isArray(s.default)?c.push(...y(s.default)):s.default!==""&&typeof s.default!="object"&&c.push(y(s.default)),i[s.name]=c}else i[s.name]=y(s.default);let h;this.multipleValues?(h=k(this.nodeValues,o,[]),h.push(i)):h=i;const V={name:o,value:h};this.$emit("valueChanged",V),this.selectedOption=void 0},valueChanged(e){this.$emit("valueChanged",e)}}}),F={key:0,class:"no-items-exist"},q={key:1},M={key:0,class:"delete-option"},E={key:2,class:"parameter-item"},N={class:"parameter-item-wrapper"},G={key:0,class:"delete-option"},K={key:1,class:"controls"},_={key:1,class:"add-option"};function H(e,t,o,i,h,V){const s=u("n8n-text"),c=u("n8n-input-label"),v=u("n8n-icon-button"),C=u("ParameterInputList"),T=u("n8n-button"),w=u("n8n-option"),D=u("n8n-select");return l(),n("div",{class:"fixed-collection-parameter",onKeydown:t[2]||(t[2]=B(()=>{},["stop"]))},[e.getProperties.length===0?(l(),n("div",F,[m(s,{size:"small"},{default:f(()=>[R(A(e.$locale.baseText("fixedCollectionParameter.currentlyNoItemsExist")),1)]),_:1})])):p("",!0),(l(!0),n(b,null,g(e.getProperties,a=>(l(),n("div",{key:a.name,class:"fixed-collection-parameter-property"},[a.displayName!==""&&e.parameter.options&&e.parameter.options.length!==1?(l(),d(c,{key:0,label:e.$locale.nodeText().inputLabelDisplayName(a,e.path),underline:!0,size:"small",color:"text-dark"},null,8,["label"])):p("",!0),e.multipleValues?(l(),n("div",q,[(l(!0),n(b,null,g(e.mutableValues[a.name],(z,r)=>(l(),n("div",{key:a.name+r,class:"parameter-item"},[$("div",{class:j(r?"border-top-dashed parameter-item-wrapper ":"parameter-item-wrapper")},[e.isReadOnly?p("",!0):(l(),n("div",M,[m(v,{type:"tertiary",text:"",size:"mini",icon:"trash",title:e.$locale.baseText("fixedCollectionParameter.deleteItem"),onClick:O=>e.deleteOption(a.name,r)},null,8,["title","onClick"]),e.sortable&&r!==0?(l(),d(v,{key:0,type:"tertiary",text:"",size:"mini",icon:"angle-up",title:e.$locale.baseText("fixedCollectionParameter.moveUp"),onClick:O=>e.moveOptionUp(a.name,r)},null,8,["title","onClick"])):p("",!0),e.sortable&&r!==e.mutableValues[a.name].length-1?(l(),d(v,{key:1,type:"tertiary",text:"",size:"mini",icon:"angle-down",title:e.$locale.baseText("fixedCollectionParameter.moveDown"),onClick:O=>e.moveOptionDown(a.name,r)},null,8,["title","onClick"])):p("",!0)])),(l(),d(U,null,{default:f(()=>[m(C,{parameters:a.values,"node-values":e.nodeValues,path:e.getPropertyPath(a.name,r),"hide-delete":!0,"is-read-only":e.isReadOnly,onValueChanged:e.valueChanged},null,8,["parameters","node-values","path","is-read-only","onValueChanged"])]),_:2},1024))],2)]))),128))])):(l(),n("div",E,[$("div",N,[e.isReadOnly?p("",!0):(l(),n("div",G,[m(v,{type:"tertiary",text:"",size:"mini",icon:"trash",title:e.$locale.baseText("fixedCollectionParameter.deleteItem"),onClick:z=>e.deleteOption(a.name)},null,8,["title","onClick"])])),m(C,{parameters:a.values,"node-values":e.nodeValues,path:e.getPropertyPath(a.name),"is-read-only":e.isReadOnly,class:"parameter-item","hide-delete":!0,onValueChanged:e.valueChanged},null,8,["parameters","node-values","path","is-read-only","onValueChanged"])])]))]))),128)),e.parameterOptions.length>0&&!e.isReadOnly?(l(),n("div",K,[e.parameter.options&&e.parameter.options.length===1?(l(),d(T,{key:0,type:"tertiary",block:"",label:e.getPlaceholderText,onClick:t[0]||(t[0]=a=>e.optionSelected(e.parameter.options[0].name))},null,8,["label"])):(l(),n("div",_,[m(D,{modelValue:e.selectedOption,"onUpdate:modelValue":[t[1]||(t[1]=a=>e.selectedOption=a),e.optionSelected],placeholder:e.getPlaceholderText,size:"small",filterable:""},{default:f(()=>[(l(!0),n(b,null,g(e.parameterOptions,a=>(l(),d(w,{key:a.name,label:e.$locale.nodeText().collectionOptionDisplayName(e.parameter,a,e.path),value:a.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","onUpdate:modelValue"])]))])):p("",!0)],32)}const x=I(L,[["render",H],["__scopeId","data-v-382a4d03"]]);export{x as default};
//# sourceMappingURL=FixedCollectionParameter-BEXUpNUv.js.map
