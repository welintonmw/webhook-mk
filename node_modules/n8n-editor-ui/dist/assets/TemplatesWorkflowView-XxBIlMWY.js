import{m as F}from"./pinia-sugP77Im.js";import{T as I}from"./TemplateDetails-BnbiWxo-.js";import{T as P}from"./TemplatesView-BbunSn-s.js";import{W as B}from"./WorkflowPreview-CVwpKdpj.js";import{bG as V,$ as k,d8 as T,a4 as W,a3 as C}from"./index-1OxaEeO3.js";import{u as H}from"./templateActions-w_1vSarr.js";import{G as E,ag as t,l as a,M as l,a9 as N,O as r,p as n,R as p,I as o,U as i,m as h,S as d,T as u}from"./vendor-Dv5OeN6t.js";import{_ as z}from"./n8n-4UEsHtUL.js";import"./axios-Mm4CS0gO.js";import"./flatted-DN8lQ2XG.js";import"./@vueuse/core-BBHtM40w.js";import"./lodash-es-CZ1inz46.js";import"./@n8n/permissions-BxxteU-C.js";import"./dateformat-CIxnBJXX.js";import"./vue-i18n-Delvyc9x.js";import"./uuid-SoommWqA.js";import"./luxon-CLwAIbs0.js";import"./@n8n/codemirror-lang-sql-DBO6T13I.js";import"./@lezer/common-B6ct0j_v.js";import"./prettier-bS6l4Vb1.js";import"./@jsplumb/util-DS-9vq_E.js";import"./@jsplumb/core-CVBraiyY.js";import"./@jsplumb/common-CF-b-6-M.js";import"./@jsplumb/connector-bezier-BGU0Ovbw.js";import"./@jsplumb/browser-ui-BVF2KoJK.js";import"./codemirror-lang-html-n8n-CWDO6_kP.js";import"./@n8n/codemirror-lang-Dl0FW_KM.js";import"./esprima-next-nhoSXAeq.js";import"./fast-json-stable-stringify-BOfzoJX1.js";import"./timeago.js-CiyKClrF.js";import"./qrcode.vue-BGkPba5A.js";import"./vue3-touch-events-mV0oX_Sl.js";import"./chart.js-343vZi4M.js";const D=E({name:"TemplatesWorkflowView",components:{TemplateDetails:I,TemplatesView:P,WorkflowPreview:B},setup(){return{externalHooks:C()}},computed:{...F(k,V),template(){return this.templatesStore.getFullTemplateById(this.templateId)},templateId(){return Array.isArray(this.$route.params.id)?this.$route.params.id[0]:this.$route.params.id}},data(){return{loading:!0,showPreview:!0,notFoundError:!1}},watch:{template(e){e?T(`n8n - Template template: ${e.name}`):T("n8n - Templates")}},async mounted(){if(this.scrollToTop(),this.template&&this.template.full){this.loading=!1;return}try{await this.templatesStore.fetchTemplateById(this.templateId)}catch{this.notFoundError=!0}this.loading=!1},methods:{async openTemplateSetup(e,s){await H({posthogStore:this.posthogStore,router:this.$router,templateId:e,inNewBrowserTab:s.metaKey||s.ctrlKey,externalHooks:this.externalHooks,nodeTypesStore:W(),telemetry:this.$telemetry,templatesStore:k(),source:"template_preview"})},onHidePreview(){this.showPreview=!1},scrollToTop(){const e=document.getElementById("content");e&&e.scrollTo({top:0})}}}),A="_wrapper_trbdo_1",M="_notFound_trbdo_6",G="_title_trbdo_10",K="_button_trbdo_14",O="_image_trbdo_18",R="_content_trbdo_29",U="_markdown_trbdo_40",j="_details_trbdo_51",q={wrapper:A,notFound:M,title:G,button:K,image:O,content:R,markdown:U,details:j};function J(e,s,Q,X,Y,Z){const y=t("n8n-heading"),c=t("n8n-text"),w=t("n8n-loading"),b=t("n8n-button"),_=t("WorkflowPreview"),$=t("n8n-markdown"),v=t("TemplateDetails"),S=t("TemplatesView");return a(),l(S,{"go-back-enabled":!0},N({header:r(()=>[e.notFoundError?(a(),h("div",{key:1,class:o(e.$style.notFound)},[i(c,{color:"text-base"},{default:r(()=>[d(u(e.$locale.baseText("templates.workflowsNotFound")),1)]),_:1})],2)):(a(),h("div",{key:0,class:o(e.$style.wrapper)},[n("div",{class:o(e.$style.title)},[e.template&&e.template.name?(a(),l(y,{key:0,tag:"h1",size:"2xlarge"},{default:r(()=>[d(u(e.template.name),1)]),_:1})):p("",!0),e.template&&e.template.name?(a(),l(c,{key:1,color:"text-base",size:"small"},{default:r(()=>[d(u(e.$locale.baseText("generic.workflow")),1)]),_:1})):p("",!0),i(w,{loading:!e.template||!e.template.name,rows:2,variant:"h1"},null,8,["loading"])],2),n("div",{class:o(e.$style.button)},[e.template?(a(),l(b,{key:0,"data-test-id":"use-template-button",label:e.$locale.baseText("template.buttons.useThisWorkflowButton"),size:"large",onClick:s[0]||(s[0]=m=>e.openTemplateSetup(e.templateId,m))},null,8,["label"])):p("",!0),i(w,{loading:!e.template,rows:1,variant:"button"},null,8,["loading"])],2)],2))]),_:2},[e.notFoundError?void 0:{name:"content",fn:r(()=>{var m,f,g;return[n("div",{class:o(e.$style.image)},[e.showPreview?(a(),l(_,{key:0,loading:e.loading,workflow:(m=e.template)==null?void 0:m.workflow,onClose:e.onHidePreview},null,8,["loading","workflow","onClose"])):p("",!0)],2),n("div",{class:o(e.$style.content)},[n("div",{class:o(e.$style.markdown),"data-test-id":"template-description"},[i($,{content:(f=e.template)==null?void 0:f.description,images:(g=e.template)==null?void 0:g.image,loading:e.loading},null,8,["content","images","loading"])],2),n("div",{class:o(e.$style.details)},[i(v,{"block-title":e.$locale.baseText("template.details.appsInTheWorkflow"),loading:e.loading,template:e.template},null,8,["block-title","loading","template"])],2)],2)]}),key:"0"}]),1024)}const L={$style:q},Ce=z(D,[["render",J],["__cssModules",L]]);export{Ce as default};
//# sourceMappingURL=TemplatesWorkflowView-XxBIlMWY.js.map
