{"version":3,"file":"v3-infinite-loading-X6A7v07E.js","sources":["../../../../node_modules/.pnpm/v3-infinite-loading@1.2.2/node_modules/v3-infinite-loading/lib/v3-infinite-loading.mjs"],"sourcesContent":["import { openBlock as b, createElementBlock as h, pushScopeId as L, popScopeId as $, createElementVNode as a, ref as v, toRefs as w, onMounted as H, onUnmounted as N, renderSlot as u, createVNode as O, createCommentVNode as p, toDisplayString as m, watch as g, nextTick as R } from \"vue\";\nconst E = (e, o) => {\n  const t = e.__vccOpts || e;\n  for (const [n, s] of o)\n    t[n] = s;\n  return t;\n}, C = {}, j = (e) => (L(\"data-v-259be2b2\"), e = e(), $(), e), M = { class: \"container\" }, T = /* @__PURE__ */ j(() => /* @__PURE__ */ a(\"div\", { class: \"spinner\" }, null, -1)), V = [\n  T\n];\nfunction W(e, o) {\n  return b(), h(\"div\", M, V);\n}\nconst D = /* @__PURE__ */ E(C, [[\"render\", W], [\"__scopeId\", \"data-v-259be2b2\"], [\"__file\", \"/home/oumoussa/side-projects/infinite/src/components/Spinner.vue\"]]), U = (e) => ({\n  loading() {\n    e.value = \"loading\";\n  },\n  loaded() {\n    e.value = \"loaded\";\n  },\n  complete() {\n    e.value = \"complete\";\n  },\n  error() {\n    e.value = \"error\";\n  }\n}), z = (e, o, t) => () => {\n  const n = t.parentEl || document.documentElement;\n  t.prevHeight = n.scrollHeight, o.loading(), e(\"infinite\", o);\n}, A = (e, o) => {\n  const t = e.getBoundingClientRect();\n  if (!o)\n    return t.top >= 0 && t.bottom <= window.innerHeight;\n  const n = o.getBoundingClientRect();\n  return t.top >= n.top && t.bottom <= n.bottom;\n}, y = (e) => {\n  e.parentEl = document.querySelector(e.target) || null;\n  let o = `0px 0px ${e.distance}px 0px`;\n  e.top && (o = `${e.distance}px 0px 0px 0px`);\n  const t = new IntersectionObserver(\n    (n) => {\n      n[0].isIntersecting && (e.firstload && e.emit(), e.firstload = !0);\n    },\n    { root: e.parentEl, rootMargin: o }\n  );\n  return t.observe(e.infiniteLoading.value), t;\n};\nconst F = { class: \"state-error\" }, G = {\n  __name: \"InfiniteLoading\",\n  props: {\n    top: { type: Boolean, required: !1 },\n    target: { type: [String, Boolean], required: !1 },\n    distance: { type: Number, required: !1, default: 0 },\n    identifier: { required: !1 },\n    firstload: { type: Boolean, required: !1, default: !0 },\n    slots: { type: Object, required: !1 }\n  },\n  emits: [\"infinite\"],\n  setup(e, { emit: o }) {\n    const t = e;\n    let n = null;\n    const s = v(null), l = v(\"ready\"), { top: f, firstload: x, target: I, distance: S } = t, { identifier: _ } = w(t), i = {\n      infiniteLoading: s,\n      target: I,\n      top: f,\n      firstload: x,\n      distance: S,\n      prevHeight: 0,\n      parentEl: null\n    };\n    i.emit = z(o, U(l), i);\n    const k = () => g(l, async (r) => {\n      const c = i.parentEl || document.documentElement;\n      await R(), r == \"loaded\" && f && (c.scrollTop = c.scrollHeight - i.prevHeight), r == \"loaded\" && A(s.value, i.parentEl) && i.emit(), r == \"complete\" && n.disconnect();\n    }), q = () => g(_, () => {\n      l.value = \"ready\", n.disconnect(), n = y(i);\n    });\n    return H(() => {\n      n = y(i), k(), _ && q();\n    }), N(() => {\n      n.disconnect();\n    }), (r, c) => (b(), h(\"div\", {\n      ref_key: \"infiniteLoading\",\n      ref: s\n    }, [\n      l.value == \"loading\" ? u(r.$slots, \"spinner\", { key: 0 }, () => [\n        O(D)\n      ], !0) : p(\"v-if\", !0),\n      l.value == \"complete\" ? u(r.$slots, \"complete\", { key: 1 }, () => {\n        var d;\n        return [\n          a(\"span\", null, m(((d = e.slots) == null ? void 0 : d.complete) || \"No more results!\"), 1)\n        ];\n      }, !0) : p(\"v-if\", !0),\n      l.value == \"error\" ? u(r.$slots, \"error\", {\n        key: 2,\n        retry: i.emit\n      }, () => {\n        var d;\n        return [\n          a(\"span\", F, [\n            a(\"span\", null, m(((d = e.slots) == null ? void 0 : d.error) || \"Oops something went wrong!\"), 1),\n            a(\"button\", {\n              class: \"retry\",\n              onClick: c[0] || (c[0] = (...B) => i.emit && i.emit(...B))\n            }, \" retry \")\n          ])\n        ];\n      }, !0) : p(\"v-if\", !0)\n    ], 512));\n  }\n}, K = /* @__PURE__ */ E(G, [[\"__scopeId\", \"data-v-9d82030b\"], [\"__file\", \"/home/oumoussa/side-projects/infinite/src/components/InfiniteLoading.vue\"]]);\nexport {\n  K as default\n};\n"],"names":["E","s","C","j","L","$","M","T","a","V","W","b","h","U","z","A","y","F","G","v","l","f","x","I","S","_","w","i","k","g","r","c","R","q","H","N","u","O","p","m","K"],"mappings":"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","x_google_ignoreList":[0]}