import{m as _}from"./pinia-sugP77Im.js";import{T as C,i as S}from"./TemplateDetails-BnbiWxo-.js";import{T as F}from"./TemplateList-By-t2s0M.js";import{T as I}from"./TemplatesView-BbunSn-s.js";import{bG as V,$ as h,d8 as w,V as E,a4 as B,a3 as W}from"./index-1OxaEeO3.js";import{u as q}from"./templateActions-w_1vSarr.js";import{G as N,ag as t,l as n,M as m,a9 as H,O as s,p as i,I as l,m as p,U as a,R as c,S as d,T as u}from"./vendor-Dv5OeN6t.js";import{_ as O}from"./n8n-4UEsHtUL.js";import"./axios-Mm4CS0gO.js";import"./flatted-DN8lQ2XG.js";import"./@vueuse/core-BBHtM40w.js";import"./lodash-es-CZ1inz46.js";import"./@n8n/permissions-BxxteU-C.js";import"./dateformat-CIxnBJXX.js";import"./vue-i18n-Delvyc9x.js";import"./uuid-SoommWqA.js";import"./luxon-CLwAIbs0.js";import"./@n8n/codemirror-lang-sql-DBO6T13I.js";import"./@lezer/common-B6ct0j_v.js";import"./prettier-bS6l4Vb1.js";import"./@jsplumb/util-DS-9vq_E.js";import"./@jsplumb/core-CVBraiyY.js";import"./@jsplumb/common-CF-b-6-M.js";import"./@jsplumb/connector-bezier-BGU0Ovbw.js";import"./@jsplumb/browser-ui-BVF2KoJK.js";import"./codemirror-lang-html-n8n-CWDO6_kP.js";import"./@n8n/codemirror-lang-Dl0FW_KM.js";import"./esprima-next-nhoSXAeq.js";import"./fast-json-stable-stringify-BOfzoJX1.js";import"./timeago.js-CiyKClrF.js";import"./qrcode.vue-BGkPba5A.js";import"./vue3-touch-events-mV0oX_Sl.js";import"./chart.js-343vZi4M.js";const U=N({name:"TemplatesCollectionView",components:{TemplateDetails:C,TemplateList:F,TemplatesView:I},setup(){return{externalHooks:W()}},computed:{..._(h,V),collection(){return this.templatesStore.getCollectionById(this.collectionId)},collectionId(){return Array.isArray(this.$route.params.id)?this.$route.params.id[0]:this.$route.params.id},collectionWorkflows(){return!this.collection||this.loading?[]:this.collection.workflows.map(({id:e})=>this.templatesStore.getTemplateById(e.toString())).filter(e=>!!e)}},data(){return{loading:!0,notFoundError:!1}},watch:{collection(e){e?w(`n8n - Template collection: ${e.name}`):w("n8n - Templates")}},async mounted(){if(this.scrollToTop(),this.collection&&"full"in this.collection&&this.collection.full){this.loading=!1;return}try{await this.templatesStore.fetchCollectionById(this.collectionId)}catch{this.notFoundError=!0}this.loading=!1},methods:{scrollToTop(){setTimeout(()=>{const e=document.getElementById("content");e&&e.scrollTo({top:0,behavior:"smooth"})},50)},onOpenTemplate({event:e,id:o}){this.navigateTo(e,E.TEMPLATE,o)},async onUseWorkflow({event:e,id:o}){await q({posthogStore:this.posthogStore,router:this.$router,templateId:o,inNewBrowserTab:e.metaKey||e.ctrlKey,templatesStore:h(),externalHooks:this.externalHooks,nodeTypesStore:B(),telemetry:this.$telemetry,source:"template_list"})},navigateTo(e,o,r){if(e.metaKey||e.ctrlKey){const T=this.$router.resolve({name:o,params:{id:r}});window.open(T.href,"_blank");return}else this.$router.push({name:o,params:{id:r}})},isFullTemplatesCollection:S}}),A="_wrapper_b0vqe_1",D="_notFound_b0vqe_11",K="_title_b0vqe_15",L="_button_b0vqe_19",M="_mainContent_b0vqe_23",z="_markdown_b0vqe_34",P="_details_b0vqe_38",G={wrapper:A,notFound:D,title:K,button:L,mainContent:M,markdown:z,details:P};function R(e,o,r,T,J,Q){const g=t("n8n-heading"),f=t("n8n-text"),k=t("n8n-loading"),y=t("n8n-markdown"),b=t("TemplateList"),$=t("TemplateDetails"),v=t("TemplatesView");return n(),m(v,{"go-back-enabled":!0},H({header:s(()=>[e.notFoundError?(n(),p("div",{key:1,class:l(e.$style.notFound)},[a(f,{color:"text-base"},{default:s(()=>[d(u(e.$locale.baseText("templates.collectionsNotFound")),1)]),_:1})],2)):(n(),p("div",{key:0,class:l(e.$style.wrapper)},[i("div",{class:l(e.$style.title)},[e.collection&&e.collection.name?(n(),m(g,{key:0,tag:"h1",size:"2xlarge"},{default:s(()=>[d(u(e.collection.name),1)]),_:1})):c("",!0),e.collection&&e.collection.name?(n(),m(f,{key:1,color:"text-base",size:"small"},{default:s(()=>[d(u(e.$locale.baseText("templates.collection")),1)]),_:1})):c("",!0),a(k,{loading:!e.collection||!e.collection.name,rows:2,variant:"h1"},null,8,["loading"])],2)],2))]),_:2},[e.notFoundError?void 0:{name:"content",fn:s(()=>[i("div",{class:l(e.$style.wrapper)},[i("div",{class:l(e.$style.mainContent)},[e.loading||e.isFullTemplatesCollection(e.collection)?(n(),p("div",{key:0,class:l(e.$style.markdown)},[a(y,{content:e.isFullTemplatesCollection(e.collection)&&e.collection.description,images:e.isFullTemplatesCollection(e.collection)&&e.collection.image,loading:e.loading},null,8,["content","images","loading"])],2)):c("",!0),a(b,{"infinite-scroll-enabled":!1,loading:e.loading,"use-workflow-button":!0,workflows:e.collectionWorkflows,onUseWorkflow:e.onUseWorkflow,onOpenTemplate:e.onOpenTemplate},null,8,["loading","workflows","onUseWorkflow","onOpenTemplate"])],2),i("div",{class:l(e.$style.details)},[a($,{"block-title":e.$locale.baseText("template.details.appsInTheCollection"),loading:e.loading,template:e.collection},null,8,["block-title","loading","template"])],2)],2)]),key:"0"}]),1024)}const j={$style:G},Ve=O(U,[["render",R],["__cssModules",j]]);export{Ve as default};
//# sourceMappingURL=TemplatesCollectionView-D2L1fmSc.js.map
