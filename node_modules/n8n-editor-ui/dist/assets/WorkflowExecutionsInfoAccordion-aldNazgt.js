import{m as k}from"./pinia-sugP77Im.js";import{G as h,aH as v,ag as a,l as x,M as E,O as t,p as u,S as n,T as i,U as r,a2 as d,I as f}from"./vendor-Dv5OeN6t.js";import{q as g,p as m,j as T,e as y,b as W,l as C,P as p,C as c}from"./index-1OxaEeO3.js";import{h as I,_}from"./n8n-4UEsHtUL.js";const b=h({name:"WorkflowExecutionsInfoAccordion",props:{initiallyExpanded:{type:Boolean,default:!1}},setup(){const e=v();return{workflowHelpers:g({router:e})}},data(){return{defaultValues:{saveFailedExecutions:"all",saveSuccessfulExecutions:"all",saveManualExecutions:!1},workflowSaveSettings:{saveFailedExecutions:!1,saveSuccessfulExecutions:!1,saveTestExecutions:!1}}},computed:{...k(C,W,y,T,m),accordionItems(){return[{id:"productionExecutions",label:this.$locale.baseText("executionsLandingPage.emptyState.accordion.productionExecutions"),icon:this.productionExecutionsIcon.icon,iconColor:this.productionExecutionsIcon.color,tooltip:this.productionExecutionsStatus==="unknown"?this.$locale.baseText("executionsLandingPage.emptyState.accordion.productionExecutionsWarningTooltip"):null},{id:"manualExecutions",label:this.$locale.baseText("executionsLandingPage.emptyState.accordion.testExecutions"),icon:this.workflowSaveSettings.saveTestExecutions?"check":"times",iconColor:this.workflowSaveSettings.saveTestExecutions?"success":"danger"}]},shouldExpandAccordion(){return this.initiallyExpanded?!this.workflowSaveSettings.saveFailedExecutions||!this.workflowSaveSettings.saveSuccessfulExecutions||!this.workflowSaveSettings.saveTestExecutions:!1},productionExecutionsIcon(){return this.productionExecutionsStatus==="saving"?{icon:"check",color:"success"}:this.productionExecutionsStatus==="not-saving"?{icon:"times",color:"danger"}:{icon:"exclamation-triangle",color:"warning"}},productionExecutionsStatus(){return this.workflowSaveSettings.saveSuccessfulExecutions===this.workflowSaveSettings.saveFailedExecutions?this.workflowSaveSettings.saveSuccessfulExecutions?"saving":"not-saving":"unknown"},workflowSettings(){return I(this.workflowsStore.workflowSettings)},accordionIcon(){return!this.workflowSaveSettings.saveTestExecutions||this.productionExecutionsStatus!=="saving"?{icon:"exclamation-triangle",color:"warning"}:null},currentWorkflowId(){return this.workflowsStore.workflowId},isNewWorkflow(){return!this.currentWorkflowId||this.currentWorkflowId===p||this.currentWorkflowId==="new"},workflowName(){return this.workflowsStore.workflowName},currentWorkflowTagIds(){return this.workflowsStore.workflowTags}},watch:{workflowSettings(e){this.updateSettings(e)}},mounted(){this.defaultValues.saveFailedExecutions=this.settingsStore.saveDataErrorExecution,this.defaultValues.saveSuccessfulExecutions=this.settingsStore.saveDataSuccessExecution,this.defaultValues.saveManualExecutions=this.settingsStore.saveManualExecutions,this.updateSettings(this.workflowSettings)},methods:{updateSettings(e){this.workflowSaveSettings.saveFailedExecutions=e.saveDataErrorExecution===void 0?this.defaultValues.saveFailedExecutions==="all":e.saveDataErrorExecution==="all",this.workflowSaveSettings.saveSuccessfulExecutions=e.saveDataSuccessExecution===void 0?this.defaultValues.saveSuccessfulExecutions==="all":e.saveDataSuccessExecution==="all",this.workflowSaveSettings.saveTestExecutions=e.saveManualExecutions===void 0?this.defaultValues.saveManualExecutions:e.saveManualExecutions},onAccordionClick(e){e.target instanceof HTMLAnchorElement&&(e.preventDefault(),this.uiStore.openModal(c))},onItemTooltipClick(e,o){e==="productionExecutions"&&o.target instanceof HTMLAnchorElement&&(o.preventDefault(),this.uiStore.openModal(c))},openWorkflowSettings(){this.uiStore.openModal(c)},async onSaveWorkflowClick(){let e;if(this.currentWorkflowId!==p)e=this.currentWorkflowId;else if(this.$route.params.name&&this.$route.params.name!=="new"){const s=this.$route.params.name;e=Array.isArray(s)?s[0]:s}if(!e)return;await this.workflowHelpers.saveCurrentWorkflow({id:e,name:this.workflowName,tags:this.currentWorkflowTagIds})&&await this.npsSurveyStore.fetchPromptsData()}}}),$="_accordion_14pzb_1",L="_disabled_14pzb_27",M={accordion:$,disabled:L},D={class:"mt-2xs"};function A(e,o,s,P,V,F){const l=a("n8n-link"),w=a("n8n-tooltip"),S=a("n8n-info-accordion");return x(),E(S,{class:f([e.$style.accordion,"mt-2xl"]),title:e.$locale.baseText("executionsLandingPage.emptyState.accordion.title"),items:e.accordionItems,"initially-expanded":e.shouldExpandAccordion,"header-icon":e.accordionIcon,"onClick:body":e.onAccordionClick,onTooltipClick:e.onItemTooltipClick},{customContent:t(()=>[u("footer",D,[n(i(e.$locale.baseText("executionsLandingPage.emptyState.accordion.footer"))+" ",1),r(w,{disabled:!e.isNewWorkflow},{content:t(()=>[u("div",null,[r(l,{onClick:d(e.onSaveWorkflowClick,["prevent"])},{default:t(()=>[n(i(e.$locale.baseText("executionsLandingPage.emptyState.accordion.footer.tooltipLink")),1)]),_:1},8,["onClick"]),n(" "+i(e.$locale.baseText("executionsLandingPage.emptyState.accordion.footer.tooltipText")),1)])]),default:t(()=>[r(l,{class:f({[e.$style.disabled]:e.isNewWorkflow}),size:"small",onClick:d(e.openWorkflowSettings,["prevent"])},{default:t(()=>[n(i(e.$locale.baseText("executionsLandingPage.emptyState.accordion.footer.settingsLink")),1)]),_:1},8,["class","onClick"])]),_:1},8,["disabled"])])]),_:1},8,["class","title","items","initially-expanded","header-icon","onClick:body","onTooltipClick"])}const N={$style:M},B=_(b,[["render",A],["__cssModules",N]]);export{B as W};
//# sourceMappingURL=WorkflowExecutionsInfoAccordion-aldNazgt.js.map
