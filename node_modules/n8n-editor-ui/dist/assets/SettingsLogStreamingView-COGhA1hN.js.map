{"version":3,"file":"SettingsLogStreamingView-COGhA1hN.js","sources":["../../src/components/SettingsLogStreaming/EventDestinationCard.ee.vue","../../src/views/SettingsLogStreamingView.vue"],"sourcesContent":["<template>\n\t<n8n-card :class=\"$style.cardLink\" data-test-id=\"destination-card\" @click=\"onClick\">\n\t\t<template #header>\n\t\t\t<div>\n\t\t\t\t<n8n-heading tag=\"h2\" bold :class=\"$style.cardHeading\">\n\t\t\t\t\t{{ destination.label }}\n\t\t\t\t</n8n-heading>\n\t\t\t\t<div :class=\"$style.cardDescription\">\n\t\t\t\t\t<n8n-text color=\"text-light\" size=\"small\">\n\t\t\t\t\t\t<span>{{ $locale.baseText(typeLabelName) }}</span>\n\t\t\t\t\t</n8n-text>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t\t<template #append>\n\t\t\t<div ref=\"cardActions\" :class=\"$style.cardActions\">\n\t\t\t\t<div :class=\"$style.activeStatusText\" data-test-id=\"destination-activator-status\">\n\t\t\t\t\t<n8n-text v-if=\"nodeParameters.enabled\" :color=\"'success'\" size=\"small\" bold>\n\t\t\t\t\t\t{{ $locale.baseText('workflowActivator.active') }}\n\t\t\t\t\t</n8n-text>\n\t\t\t\t\t<n8n-text v-else color=\"text-base\" size=\"small\" bold>\n\t\t\t\t\t\t{{ $locale.baseText('workflowActivator.inactive') }}\n\t\t\t\t\t</n8n-text>\n\t\t\t\t</div>\n\n\t\t\t\t<el-switch\n\t\t\t\t\tclass=\"mr-s\"\n\t\t\t\t\t:disabled=\"readonly\"\n\t\t\t\t\t:model-value=\"nodeParameters.enabled\"\n\t\t\t\t\t:title=\"\n\t\t\t\t\t\tnodeParameters.enabled\n\t\t\t\t\t\t\t? $locale.baseText('workflowActivator.deactivateWorkflow')\n\t\t\t\t\t\t\t: $locale.baseText('workflowActivator.activateWorkflow')\n\t\t\t\t\t\"\n\t\t\t\t\tactive-color=\"#13ce66\"\n\t\t\t\t\tinactive-color=\"#8899AA\"\n\t\t\t\t\tdata-test-id=\"workflow-activate-switch\"\n\t\t\t\t\t@update:model-value=\"onEnabledSwitched($event)\"\n\t\t\t\t>\n\t\t\t\t</el-switch>\n\n\t\t\t\t<n8n-action-toggle :actions=\"actions\" theme=\"dark\" @action=\"onAction\" />\n\t\t\t</div>\n\t\t</template>\n\t</n8n-card>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport { EnterpriseEditionFeature, MODAL_CONFIRM } from '@/constants';\nimport { useMessage } from '@/composables/useMessage';\nimport { useLogStreamingStore } from '@/stores/logStreaming.store';\nimport type { PropType } from 'vue';\nimport { mapStores } from 'pinia';\nimport type { MessageEventBusDestinationOptions } from 'n8n-workflow';\nimport { deepCopy, defaultMessageEventBusDestinationOptions } from 'n8n-workflow';\nimport type { BaseTextKey } from '@/plugins/i18n';\nimport type { EventBus } from 'n8n-design-system';\n\nexport const DESTINATION_LIST_ITEM_ACTIONS = {\n\tOPEN: 'open',\n\tDELETE: 'delete',\n};\n\nexport default defineComponent({\n\tcomponents: {},\n\tsetup() {\n\t\treturn {\n\t\t\t...useMessage(),\n\t\t};\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tEnterpriseEditionFeature,\n\t\t\tnodeParameters: {} as MessageEventBusDestinationOptions,\n\t\t};\n\t},\n\tprops: {\n\t\teventBus: {\n\t\t\ttype: Object as PropType<EventBus>,\n\t\t},\n\t\tdestination: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t\tdefault: deepCopy(defaultMessageEventBusDestinationOptions),\n\t\t},\n\t\treadonly: Boolean,\n\t},\n\tmounted() {\n\t\tthis.nodeParameters = Object.assign(\n\t\t\tdeepCopy(defaultMessageEventBusDestinationOptions),\n\t\t\tthis.destination,\n\t\t);\n\t\tthis.eventBus?.on('destinationWasSaved', this.onDestinationWasSaved);\n\t},\n\tbeforeUnmount() {\n\t\tthis.eventBus?.off('destinationWasSaved', this.onDestinationWasSaved);\n\t},\n\tcomputed: {\n\t\t...mapStores(useLogStreamingStore),\n\t\tactions(): Array<{ label: string; value: string }> {\n\t\t\tconst actions = [\n\t\t\t\t{\n\t\t\t\t\tlabel: this.$locale.baseText('workflows.item.open'),\n\t\t\t\t\tvalue: DESTINATION_LIST_ITEM_ACTIONS.OPEN,\n\t\t\t\t},\n\t\t\t];\n\t\t\tif (!this.readonly) {\n\t\t\t\tactions.push({\n\t\t\t\t\tlabel: this.$locale.baseText('workflows.item.delete'),\n\t\t\t\t\tvalue: DESTINATION_LIST_ITEM_ACTIONS.DELETE,\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn actions;\n\t\t},\n\t\ttypeLabelName(): BaseTextKey {\n\t\t\treturn `settings.log-streaming.${this.destination.__type}` as BaseTextKey;\n\t\t},\n\t},\n\tmethods: {\n\t\tonDestinationWasSaved() {\n\t\t\tconst updatedDestination = this.logStreamingStore.getDestination(this.destination.id);\n\t\t\tif (updatedDestination) {\n\t\t\t\tthis.nodeParameters = Object.assign(\n\t\t\t\t\tdeepCopy(defaultMessageEventBusDestinationOptions),\n\t\t\t\t\tthis.destination,\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\tasync onClick(event: Event) {\n\t\t\tconst cardActions = this.$refs.cardActions as HTMLDivElement | null;\n\t\t\tconst target = event.target as HTMLDivElement | null;\n\t\t\tif (\n\t\t\t\tcardActions === target ||\n\t\t\t\tcardActions?.contains(target) ||\n\t\t\t\ttarget?.contains(cardActions)\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('edit', this.destination.id);\n\t\t},\n\t\tonEnabledSwitched(state: boolean) {\n\t\t\tthis.nodeParameters.enabled = state;\n\t\t\tvoid this.saveDestination();\n\t\t},\n\t\tasync saveDestination() {\n\t\t\tawait this.logStreamingStore.saveDestination(this.nodeParameters);\n\t\t},\n\t\tasync onAction(action: string) {\n\t\t\tif (action === DESTINATION_LIST_ITEM_ACTIONS.OPEN) {\n\t\t\t\tthis.$emit('edit', this.destination.id);\n\t\t\t} else if (action === DESTINATION_LIST_ITEM_ACTIONS.DELETE) {\n\t\t\t\tconst deleteConfirmed = await this.confirm(\n\t\t\t\t\tthis.$locale.baseText('settings.log-streaming.destinationDelete.message', {\n\t\t\t\t\t\tinterpolate: { destinationName: this.destination.label },\n\t\t\t\t\t}),\n\t\t\t\t\tthis.$locale.baseText('settings.log-streaming.destinationDelete.headline'),\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'warning',\n\t\t\t\t\t\tconfirmButtonText: this.$locale.baseText(\n\t\t\t\t\t\t\t'settings.log-streaming.destinationDelete.confirmButtonText',\n\t\t\t\t\t\t),\n\t\t\t\t\t\tcancelButtonText: this.$locale.baseText(\n\t\t\t\t\t\t\t'settings.log-streaming.destinationDelete.cancelButtonText',\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t);\n\n\t\t\t\tif (deleteConfirmed !== MODAL_CONFIRM) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.$emit('remove', this.destination.id);\n\t\t\t}\n\t\t},\n\t},\n});\n</script>\n\n<style lang=\"scss\" module>\n.cardLink {\n\ttransition: box-shadow 0.3s ease;\n\tcursor: pointer;\n\tpadding: 0 0 0 var(--spacing-s);\n\talign-items: stretch;\n\n\t&:hover {\n\t\tbox-shadow: 0 2px 8px rgba(#441c17, 0.1);\n\t}\n}\n\n.activeStatusText {\n\twidth: 64px; // Required to avoid jumping when changing active state\n\tpadding-right: var(--spacing-2xs);\n\tbox-sizing: border-box;\n\tdisplay: inline-block;\n\ttext-align: right;\n}\n\n.cardHeading {\n\tfont-size: var(--font-size-s);\n\tword-break: break-word;\n\tpadding: var(--spacing-s) 0 0 var(--spacing-s);\n}\n\n.cardDescription {\n\tmin-height: 19px;\n\tdisplay: flex;\n\talign-items: center;\n\tpadding: 0 0 var(--spacing-s) var(--spacing-s);\n}\n\n.cardActions {\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: center;\n\talign-items: center;\n\tpadding: 0 var(--spacing-s) 0 0;\n\tcursor: default;\n}\n</style>\n","<template>\n\t<div>\n\t\t<div :class=\"$style.header\">\n\t\t\t<div class=\"mb-2xl\">\n\t\t\t\t<n8n-heading size=\"2xlarge\">\n\t\t\t\t\t{{ $locale.baseText(`settings.log-streaming.heading`) }}\n\t\t\t\t</n8n-heading>\n\t\t\t\t<template v-if=\"environment !== 'production'\">\n\t\t\t\t\t<strong class=\"ml-m\">Disable License ({{ environment }})&nbsp;</strong>\n\t\t\t\t\t<el-switch v-model=\"disableLicense\" size=\"large\" data-test-id=\"disable-license-toggle\" />\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t\t<template v-if=\"isLicensed\">\n\t\t\t<div class=\"mb-l\">\n\t\t\t\t<n8n-info-tip theme=\"info\" type=\"note\">\n\t\t\t\t\t<span v-html=\"$locale.baseText('settings.log-streaming.infoText')\"></span>\n\t\t\t\t</n8n-info-tip>\n\t\t\t</div>\n\t\t\t<template v-if=\"storeHasItems()\">\n\t\t\t\t<el-row\n\t\t\t\t\tv-for=\"item in sortedItemKeysByLabel\"\n\t\t\t\t\t:key=\"item.key\"\n\t\t\t\t\t:gutter=\"10\"\n\t\t\t\t\t:class=\"$style.destinationItem\"\n\t\t\t\t>\n\t\t\t\t\t<el-col v-if=\"logStreamingStore.items[item.key]?.destination\">\n\t\t\t\t\t\t<EventDestinationCard\n\t\t\t\t\t\t\t:destination=\"logStreamingStore.items[item.key]?.destination\"\n\t\t\t\t\t\t\t:event-bus=\"eventBus\"\n\t\t\t\t\t\t\t:readonly=\"!canManageLogStreaming\"\n\t\t\t\t\t\t\t@remove=\"onRemove(logStreamingStore.items[item.key]?.destination?.id)\"\n\t\t\t\t\t\t\t@edit=\"onEdit(logStreamingStore.items[item.key]?.destination?.id)\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</el-col>\n\t\t\t\t</el-row>\n\t\t\t\t<div class=\"mt-m text-right\">\n\t\t\t\t\t<n8n-button v-if=\"canManageLogStreaming\" size=\"large\" @click=\"addDestination\">\n\t\t\t\t\t\t{{ $locale.baseText(`settings.log-streaming.add`) }}\n\t\t\t\t\t</n8n-button>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<div v-else data-test-id=\"action-box-licensed\">\n\t\t\t\t<n8n-action-box\n\t\t\t\t\t:button-text=\"$locale.baseText(`settings.log-streaming.add`)\"\n\t\t\t\t\t@click:button=\"addDestination\"\n\t\t\t\t>\n\t\t\t\t\t<template #heading>\n\t\t\t\t\t\t<span v-html=\"$locale.baseText(`settings.log-streaming.addFirstTitle`)\" />\n\t\t\t\t\t</template>\n\t\t\t\t</n8n-action-box>\n\t\t\t</div>\n\t\t</template>\n\t\t<template v-else>\n\t\t\t<div v-if=\"$locale.baseText('settings.log-streaming.infoText')\" class=\"mb-l\">\n\t\t\t\t<n8n-info-tip theme=\"info\" type=\"note\">\n\t\t\t\t\t<span v-html=\"$locale.baseText('settings.log-streaming.infoText')\"></span>\n\t\t\t\t</n8n-info-tip>\n\t\t\t</div>\n\t\t\t<div data-test-id=\"action-box-unlicensed\">\n\t\t\t\t<n8n-action-box\n\t\t\t\t\t:description=\"$locale.baseText('settings.log-streaming.actionBox.description')\"\n\t\t\t\t\t:button-text=\"$locale.baseText('settings.log-streaming.actionBox.button')\"\n\t\t\t\t\t@click:button=\"goToUpgrade\"\n\t\t\t\t>\n\t\t\t\t\t<template #heading>\n\t\t\t\t\t\t<span v-html=\"$locale.baseText('settings.log-streaming.actionBox.title')\" />\n\t\t\t\t\t</template>\n\t\t\t\t</n8n-action-box>\n\t\t\t</div>\n\t\t</template>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, nextTick } from 'vue';\nimport { mapStores } from 'pinia';\nimport { v4 as uuid } from 'uuid';\nimport { useWorkflowsStore } from '@/stores/workflows.store';\nimport { hasPermission } from '@/utils/rbac/permissions';\nimport { useCredentialsStore } from '@/stores/credentials.store';\nimport { useLogStreamingStore } from '@/stores/logStreaming.store';\nimport { useSettingsStore } from '@/stores/settings.store';\nimport { useUIStore } from '@/stores/ui.store';\nimport { LOG_STREAM_MODAL_KEY, EnterpriseEditionFeature } from '@/constants';\nimport type { MessageEventBusDestinationOptions } from 'n8n-workflow';\nimport { deepCopy, defaultMessageEventBusDestinationOptions } from 'n8n-workflow';\nimport EventDestinationCard from '@/components/SettingsLogStreaming/EventDestinationCard.ee.vue';\nimport { createEventBus } from 'n8n-design-system/utils';\n\nexport default defineComponent({\n\tname: 'SettingsLogStreamingView',\n\tcomponents: {\n\t\tEventDestinationCard,\n\t},\n\tprops: {},\n\tdata() {\n\t\treturn {\n\t\t\teventBus: createEventBus(),\n\t\t\tdestinations: Array<MessageEventBusDestinationOptions>,\n\t\t\tdisableLicense: false,\n\t\t\tallDestinations: [] as MessageEventBusDestinationOptions[],\n\t\t};\n\t},\n\tasync mounted() {\n\t\tif (!this.isLicensed) return;\n\n\t\t// Prepare credentialsStore so modals can pick up credentials\n\t\tawait this.credentialsStore.fetchCredentialTypes(false);\n\t\tawait this.credentialsStore.fetchAllCredentials();\n\t\tthis.uiStore.nodeViewInitialized = false;\n\n\t\t// fetch Destination data from the backend\n\t\tawait this.getDestinationDataFromBackend();\n\n\t\t// since we are not really integrated into the hooks, we listen to the store and refresh the destinations\n\t\tthis.logStreamingStore.$onAction(({ name, after }) => {\n\t\t\tif (name === 'removeDestination' || name === 'updateDestination') {\n\t\t\t\tafter(async () => {\n\t\t\t\t\tthis.$forceUpdate();\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t// refresh when a modal closes\n\t\tthis.eventBus.on('destinationWasSaved', this.onDestinationWasSaved);\n\t\t// listen to remove emission\n\t\tthis.eventBus.on('remove', this.onRemove);\n\t\t// listen to modal closing and remove nodes from store\n\t\tthis.eventBus.on('closing', this.onBusClosing);\n\t},\n\tbeforeUnmount() {\n\t\tthis.eventBus.off('destinationWasSaved', this.onDestinationWasSaved);\n\t\tthis.eventBus.off('remove', this.onRemove);\n\t\tthis.eventBus.off('closing', this.onBusClosing);\n\t},\n\tcomputed: {\n\t\t...mapStores(\n\t\t\tuseSettingsStore,\n\t\t\tuseLogStreamingStore,\n\t\t\tuseWorkflowsStore,\n\t\t\tuseUIStore,\n\t\t\tuseCredentialsStore,\n\t\t),\n\t\tsortedItemKeysByLabel() {\n\t\t\tconst sortedKeys: Array<{ label: string; key: string }> = [];\n\t\t\tfor (const [key, value] of Object.entries(this.logStreamingStore.items)) {\n\t\t\t\tsortedKeys.push({ key, label: value.destination?.label ?? 'Destination' });\n\t\t\t}\n\t\t\treturn sortedKeys.sort((a, b) => a.label.localeCompare(b.label));\n\t\t},\n\t\tenvironment() {\n\t\t\treturn process.env.NODE_ENV;\n\t\t},\n\t\tisLicensed(): boolean {\n\t\t\tif (this.disableLicense) return false;\n\t\t\treturn this.settingsStore.isEnterpriseFeatureEnabled(EnterpriseEditionFeature.LogStreaming);\n\t\t},\n\t\tcanManageLogStreaming(): boolean {\n\t\t\treturn hasPermission(['rbac'], { rbac: { scope: 'logStreaming:manage' } });\n\t\t},\n\t},\n\tmethods: {\n\t\tonDestinationWasSaved() {\n\t\t\tthis.$forceUpdate();\n\t\t},\n\t\tonBusClosing() {\n\t\t\tthis.workflowsStore.removeAllNodes({ setStateDirty: false, removePinData: true });\n\t\t\tthis.uiStore.stateIsDirty = false;\n\t\t},\n\t\tasync getDestinationDataFromBackend(): Promise<void> {\n\t\t\tthis.logStreamingStore.clearEventNames();\n\t\t\tthis.logStreamingStore.clearDestinationItemTrees();\n\t\t\tthis.allDestinations = [];\n\t\t\tconst eventNamesData = await this.logStreamingStore.fetchEventNames();\n\t\t\tif (eventNamesData) {\n\t\t\t\tfor (const eventName of eventNamesData) {\n\t\t\t\t\tthis.logStreamingStore.addEventName(eventName);\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst destinationData: MessageEventBusDestinationOptions[] =\n\t\t\t\tawait this.logStreamingStore.fetchDestinations();\n\t\t\tif (destinationData) {\n\t\t\t\tfor (const destination of destinationData) {\n\t\t\t\t\tthis.logStreamingStore.addDestination(destination);\n\t\t\t\t\tthis.allDestinations.push(destination);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.$forceUpdate();\n\t\t},\n\t\tgoToUpgrade() {\n\t\t\tvoid this.uiStore.goToUpgrade('log-streaming', 'upgrade-log-streaming');\n\t\t},\n\t\tstoreHasItems(): boolean {\n\t\t\treturn this.logStreamingStore.items && Object.keys(this.logStreamingStore.items).length > 0;\n\t\t},\n\t\tasync addDestination() {\n\t\t\tconst newDestination = deepCopy(defaultMessageEventBusDestinationOptions);\n\t\t\tnewDestination.id = uuid();\n\t\t\tthis.logStreamingStore.addDestination(newDestination);\n\t\t\tawait nextTick();\n\t\t\tthis.uiStore.openModalWithData({\n\t\t\t\tname: LOG_STREAM_MODAL_KEY,\n\t\t\t\tdata: {\n\t\t\t\t\tdestination: newDestination,\n\t\t\t\t\tisNew: true,\n\t\t\t\t\teventBus: this.eventBus,\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\tasync onRemove(destinationId?: string) {\n\t\t\tif (!destinationId) return;\n\t\t\tawait this.logStreamingStore.deleteDestination(destinationId);\n\t\t\tconst foundNode = this.workflowsStore.getNodeByName(destinationId);\n\t\t\tif (foundNode) {\n\t\t\t\tthis.workflowsStore.removeNode(foundNode);\n\t\t\t}\n\t\t},\n\t\tasync onEdit(destinationId?: string) {\n\t\t\tif (!destinationId) return;\n\t\t\tconst editDestination = this.logStreamingStore.getDestination(destinationId);\n\t\t\tif (editDestination) {\n\t\t\t\tthis.uiStore.openModalWithData({\n\t\t\t\t\tname: LOG_STREAM_MODAL_KEY,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tdestination: editDestination,\n\t\t\t\t\t\tisNew: false,\n\t\t\t\t\t\teventBus: this.eventBus,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t},\n});\n</script>\n\n<style lang=\"scss\" module>\n.header {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: flex-start;\n\twhite-space: nowrap;\n\n\t*:first-child {\n\t\tflex-grow: 1;\n\t}\n}\n\n.destinationItem {\n\tmargin-bottom: 0.5em;\n}\n</style>\n"],"names":["DESTINATION_LIST_ITEM_ACTIONS","_sfc_main$1","defineComponent","useMessage","EnterpriseEditionFeature","deepCopy","defaultMessageEventBusDestinationOptions","_a","mapStores","useLogStreamingStore","actions","event","cardActions","target","state","action","MODAL_CONFIRM","_resolveComponent","_openBlock","_createBlock","_component_n8n_card","_normalizeClass","_ctx","_withCtx","_createElementVNode","_createVNode","_component_n8n_heading","_createTextVNode","_toDisplayString","_component_n8n_text","$style","nodeParameters","readonly","$locale","_cache","$event","_component_n8n_action_toggle","onAction","_sfc_main","EventDestinationCard","createEventBus","name","after","useSettingsStore","useWorkflowsStore","useUIStore","useCredentialsStore","sortedKeys","key","value","a","b","hasPermission","eventNamesData","eventName","destinationData","destination","newDestination","uuid","nextTick","LOG_STREAM_MODAL_KEY","destinationId","foundNode","editDestination","_hoisted_1","_hoisted_2","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","environment","_createElementBlock","_Fragment","disableLicense","_component_el_switch","_createCommentVNode","isLicensed","_hoisted_3","_component_n8n_info_tip","_hoisted_4","storeHasItems","_renderList","item","_component_el_row","_component_el_col","logStreamingStore","_component_EventDestinationCard","canManageLogStreaming","_b","_component_n8n_button","_component_n8n_action_box","_hoisted_10","goToUpgrade","_hoisted_11"],"mappings":"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"}