{"version":3,"file":"RunDataSearch-DwB8g_cE.js","sources":["../../src/components/RunDataSearch.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { computed, ref, onMounted, onUnmounted, type StyleValue } from 'vue';\nimport { useI18n } from '@/composables/useI18n';\nimport type { NodePanelType } from '@/Interface';\n\ntype Props = {\n\tmodelValue: string;\n\tpaneType?: NodePanelType;\n\tisAreaActive?: boolean;\n};\n\nconst COLLAPSED_WIDTH = '34px';\nconst OPEN_WIDTH = '200px';\nconst OPEN_MIN_WIDTH = '120px';\n\nconst emit = defineEmits<{\n\t(event: 'update:modelValue', value: Props['modelValue']): void;\n\t(event: 'focus'): void;\n}>();\n\nconst props = withDefaults(defineProps<Props>(), {\n\tpaneType: 'output',\n\tisAreaActive: false,\n});\n\nconst locale = useI18n();\n\nconst inputRef = ref<HTMLInputElement | null>(null);\nconst opened = ref(false);\nconst placeholder = computed(() =>\n\tprops.paneType === 'input'\n\t\t? locale.baseText('ndv.search.placeholder.input')\n\t\t: locale.baseText('ndv.search.placeholder.output'),\n);\n\nconst style = computed<StyleValue>(() =>\n\topened.value ? { maxWidth: OPEN_WIDTH, minWidth: OPEN_MIN_WIDTH } : { maxWidth: COLLAPSED_WIDTH },\n);\n\nconst documentKeyHandler = (event: KeyboardEvent) => {\n\tconst isTargetFormElementOrEditable =\n\t\tevent.target instanceof HTMLInputElement ||\n\t\tevent.target instanceof HTMLTextAreaElement ||\n\t\tevent.target instanceof HTMLSelectElement ||\n\t\t(event.target as HTMLElement)?.getAttribute?.('contentEditable') === 'true';\n\n\tif (event.key === '/' && props.isAreaActive && !isTargetFormElementOrEditable) {\n\t\tinputRef.value?.focus();\n\t\tinputRef.value?.select();\n\t}\n};\n\nconst onSearchUpdate = (value: string) => {\n\temit('update:modelValue', value);\n};\nconst onFocus = () => {\n\topened.value = true;\n\tinputRef.value?.select();\n\temit('focus');\n};\nconst onBlur = () => {\n\tif (!props.modelValue) {\n\t\topened.value = false;\n\t}\n};\nonMounted(() => {\n\tdocument.addEventListener('keyup', documentKeyHandler);\n});\nonUnmounted(() => {\n\tdocument.removeEventListener('keyup', documentKeyHandler);\n});\n</script>\n\n<template>\n\t<n8n-input\n\t\tref=\"inputRef\"\n\t\tdata-test-id=\"ndv-search\"\n\t\t:class=\"{\n\t\t\t[$style.ioSearch]: true,\n\t\t\t[$style.ioSearchOpened]: opened,\n\t\t}\"\n\t\t:style=\"style\"\n\t\t:model-value=\"modelValue\"\n\t\t:placeholder=\"placeholder\"\n\t\tsize=\"small\"\n\t\t@update:model-value=\"onSearchUpdate\"\n\t\t@focus=\"onFocus\"\n\t\t@blur=\"onBlur\"\n\t>\n\t\t<template #prefix>\n\t\t\t<n8n-icon :class=\"$style.ioSearchIcon\" icon=\"search\" />\n\t\t</template>\n\t</n8n-input>\n</template>\n\n<style lang=\"scss\" module>\n@import '@/styles/variables';\n\n.ioSearch {\n\ttransition: max-width 0.3s $ease-out-expo;\n\n\t.ioSearchIcon {\n\t\tcolor: var(--color-foreground-xdark);\n\t\tcursor: pointer;\n\t}\n\n\tinput {\n\t\tborder: 0;\n\t\tbackground: transparent;\n\t\tcursor: pointer;\n\t}\n}\n\n.ioSearchOpened {\n\t.ioSearchIcon {\n\t\tcursor: default;\n\t}\n\tinput {\n\t\tborder: var(--input-border-color, var(--border-color-base))\n\t\t\tvar(--input-border-style, var(--border-style-base)) var(--border-width-base);\n\t\tbackground: var(--input-background-color, var(--color-foreground-xlight));\n\t\tcursor: text;\n\t}\n}\n</style>\n"],"names":["COLLAPSED_WIDTH","OPEN_WIDTH","OPEN_MIN_WIDTH","emit","__emit","props","__props","locale","useI18n","inputRef","ref","opened","placeholder","computed","style","documentKeyHandler","event","isTargetFormElementOrEditable","_b","_a","_c","_d","onSearchUpdate","value","onFocus","onBlur","onMounted","onUnmounted"],"mappings":"wmCAWA,MAAMA,EAAkB,OAClBC,EAAa,QACbC,EAAiB,mLAEvB,MAAMC,EAAOC,EAKPC,EAAQC,EAKRC,EAASC,IAETC,EAAWC,EAA6B,IAAI,EAC5CC,EAASD,EAAI,EAAK,EAClBE,EAAcC,EAAS,IAC5BR,EAAM,WAAa,QAChBE,EAAO,SAAS,8BAA8B,EAC9CA,EAAO,SAAS,+BAA+B,CAAA,EAG7CO,EAAQD,EAAqB,IAClCF,EAAO,MAAQ,CAAE,SAAUV,EAAY,SAAUC,CAAe,EAAI,CAAE,SAAUF,CAAgB,CAAA,EAG3Fe,EAAsBC,GAAyB,aACpD,MAAMC,EACLD,EAAM,kBAAkB,kBACxBA,EAAM,kBAAkB,qBACxBA,EAAM,kBAAkB,qBACvBE,GAAAC,EAAAH,EAAM,SAAN,YAAAG,EAA8B,eAA9B,YAAAD,EAAA,KAAAC,EAA6C,sBAAuB,OAElEH,EAAM,MAAQ,KAAOX,EAAM,cAAgB,CAACY,KAC/CG,EAAAX,EAAS,QAAT,MAAAW,EAAgB,SAChBC,EAAAZ,EAAS,QAAT,MAAAY,EAAgB,SACjB,EAGKC,EAAkBC,GAAkB,CACzCpB,EAAK,oBAAqBoB,CAAK,CAAA,EAE1BC,EAAU,IAAM,OACrBb,EAAO,MAAQ,IACfQ,EAAAV,EAAS,QAAT,MAAAU,EAAgB,SAChBhB,EAAK,OAAO,CAAA,EAEPsB,EAAS,IAAM,CACfpB,EAAM,aACVM,EAAO,MAAQ,GAChB,EAED,OAAAe,EAAU,IAAM,CACN,SAAA,iBAAiB,QAASX,CAAkB,CAAA,CACrD,EACDY,EAAY,IAAM,CACR,SAAA,oBAAoB,QAASZ,CAAkB,CAAA,CACxD"}