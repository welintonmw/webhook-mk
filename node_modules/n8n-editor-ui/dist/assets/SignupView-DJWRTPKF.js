import{A as x}from"./AuthView-B_jZMnGj.js";import{e as I,a as T,u as w,V as d,x as E}from"./index-1OxaEeO3.js";import{G as S,aH as N,az as _,r as n,e as y,b as A,l as R,M as q}from"./vendor-Dv5OeN6t.js";import"./pinia-sugP77Im.js";import"./n8n-4UEsHtUL.js";import"./axios-Mm4CS0gO.js";import"./esprima-next-nhoSXAeq.js";import"./luxon-CLwAIbs0.js";import"./lodash-es-CZ1inz46.js";import"./flatted-DN8lQ2XG.js";import"./@vueuse/core-BBHtM40w.js";import"./@n8n/permissions-BxxteU-C.js";import"./dateformat-CIxnBJXX.js";import"./vue-i18n-Delvyc9x.js";import"./uuid-SoommWqA.js";import"./@n8n/codemirror-lang-sql-DBO6T13I.js";import"./@lezer/common-B6ct0j_v.js";import"./prettier-bS6l4Vb1.js";import"./@jsplumb/util-DS-9vq_E.js";import"./@jsplumb/core-CVBraiyY.js";import"./@jsplumb/common-CF-b-6-M.js";import"./@jsplumb/connector-bezier-BGU0Ovbw.js";import"./@jsplumb/browser-ui-BVF2KoJK.js";import"./codemirror-lang-html-n8n-CWDO6_kP.js";import"./@n8n/codemirror-lang-Dl0FW_KM.js";import"./fast-json-stable-stringify-BOfzoJX1.js";import"./timeago.js-CiyKClrF.js";import"./qrcode.vue-BGkPba5A.js";import"./vue3-touch-events-mV0oX_Sl.js";import"./chart.js-343vZi4M.js";const ue=S({__name:"SignupView",setup(V){const f=I(),l=T(),s=w(),e=E(),c=N(),u=_(),g={title:e.baseText("auth.signup.setupYourAccount"),buttonText:e.baseText("auth.signup.finishAccountSetup"),inputs:[{name:"firstName",properties:{label:e.baseText("auth.firstName"),maxlength:32,required:!0,autocomplete:"given-name",capitalize:!0}},{name:"lastName",properties:{label:e.baseText("auth.lastName"),maxlength:32,required:!0,autocomplete:"family-name",capitalize:!0}},{name:"password",properties:{label:e.baseText("auth.password"),type:"password",validationRules:[{name:"DEFAULT_PASSWORD_RULES"}],required:!0,infoText:e.baseText("auth.defaultPasswordRequirements"),autocomplete:"new-password",capitalize:!0}},{name:"agree",properties:{label:e.baseText("auth.agreement.label"),type:"checkbox"}}]},p=n(!1),a=n(null),i=n(null),o=n(null),h=y(()=>a.value?e.baseText("settings.signup.signUpInviterInfo",{interpolate:{firstName:a.value.firstName,lastName:a.value.lastName}}):"");A(async()=>{const t=v("inviterId"),r=v("inviteeId");try{if(!t||!r)throw new Error(e.baseText("auth.signup.missingTokenError"));i.value=t,o.value=r;const m=await l.validateSignupToken({inviteeId:o.value,inviterId:i.value});a.value=m.inviter}catch(m){s.showError(m,e.baseText("auth.signup.tokenValidationError")),c.replace({name:d.SIGNIN})}});async function b(t){if(!i.value||!o.value){s.showError(new Error(e.baseText("auth.signup.tokenValidationError")),e.baseText("auth.signup.setupYourAccountError"));return}try{if(p.value=!0,await l.acceptInvitation({...t,inviterId:i.value,inviteeId:o.value}),t.agree===!0)try{await f.submitContactEmail(t.email.toString(),t.agree)}catch{}await c.push({name:d.NEW_WORKFLOW})}catch(r){s.showError(r,e.baseText("auth.signup.setupYourAccountError"))}p.value=!1}function v(t){return!u.query[t]||typeof u.query[t]!="string"?null:u.query[t]}return(t,r)=>(R(),q(x,{form:g,"form-loading":p.value,subtitle:h.value,onSubmit:b},null,8,["form-loading","subtitle"]))}});export{ue as default};
//# sourceMappingURL=SignupView-DJWRTPKF.js.map
