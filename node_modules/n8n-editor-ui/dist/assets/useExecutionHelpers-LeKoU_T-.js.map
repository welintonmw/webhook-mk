{"version":3,"file":"useExecutionHelpers-LeKoU_T-.js","sources":["../../src/composables/useExecutionHelpers.ts"],"sourcesContent":["import type { ExecutionSummary } from 'n8n-workflow';\nimport { convertToDisplayDate } from '@/utils/formatters/dateFormatter';\nimport { useI18n } from '@/composables/useI18n';\n\nexport interface IExecutionUIData {\n\tname: string;\n\tlabel: string;\n\tstartTime: string;\n\trunningTime: string;\n}\n\nexport function useExecutionHelpers() {\n\tconst i18n = useI18n();\n\n\tfunction getUIDetails(execution: ExecutionSummary): IExecutionUIData {\n\t\tconst status = {\n\t\t\tname: 'unknown',\n\t\t\tstartTime: formatDate(execution.startedAt),\n\t\t\tlabel: 'Status unknown',\n\t\t\trunningTime: '',\n\t\t};\n\n\t\tif (execution.status === 'waiting') {\n\t\t\tstatus.name = 'waiting';\n\t\t\tstatus.label = i18n.baseText('executionsList.waiting');\n\t\t} else if (execution.status === 'canceled') {\n\t\t\tstatus.label = i18n.baseText('executionsList.canceled');\n\t\t} else if (execution.status === 'running' || execution.status === 'new') {\n\t\t\tstatus.name = 'running';\n\t\t\tstatus.label = i18n.baseText('executionsList.running');\n\t\t} else if (execution.status === 'success') {\n\t\t\tstatus.name = 'success';\n\t\t\tstatus.label = i18n.baseText('executionsList.succeeded');\n\t\t} else if (execution.status === 'error' || execution.status === 'crashed') {\n\t\t\tstatus.name = 'error';\n\t\t\tstatus.label = i18n.baseText('executionsList.error');\n\t\t}\n\n\t\tif (!execution.status) execution.status = 'unknown';\n\n\t\tif (execution.startedAt && execution.stoppedAt) {\n\t\t\tconst stoppedAt = execution.stoppedAt ? new Date(execution.stoppedAt).getTime() : Date.now();\n\t\t\tstatus.runningTime = i18n.displayTimer(\n\t\t\t\tstoppedAt - new Date(execution.startedAt).getTime(),\n\t\t\t\ttrue,\n\t\t\t);\n\t\t}\n\n\t\treturn status;\n\t}\n\n\tfunction formatDate(fullDate: Date | string | number) {\n\t\tconst { date, time } = convertToDisplayDate(fullDate);\n\t\treturn i18n.baseText('executionsList.started', { interpolate: { time, date } });\n\t}\n\n\tfunction isExecutionRetriable(execution: ExecutionSummary): boolean {\n\t\treturn (\n\t\t\t['crashed', 'error'].includes(execution.status) &&\n\t\t\t!execution.retryOf &&\n\t\t\t!execution.retrySuccessId\n\t\t);\n\t}\n\n\treturn {\n\t\tgetUIDetails,\n\t\tformatDate,\n\t\tisExecutionRetriable,\n\t};\n}\n"],"names":["useExecutionHelpers","i18n","useI18n","getUIDetails","execution","status","formatDate","stoppedAt","fullDate","date","time","convertToDisplayDate","isExecutionRetriable"],"mappings":"wFAWO,SAASA,GAAsB,CACrC,MAAMC,EAAOC,IAEb,SAASC,EAAaC,EAA+C,CACpE,MAAMC,EAAS,CACd,KAAM,UACN,UAAWC,EAAWF,EAAU,SAAS,EACzC,MAAO,iBACP,YAAa,EAAA,EAqBV,GAlBAA,EAAU,SAAW,WACxBC,EAAO,KAAO,UACPA,EAAA,MAAQJ,EAAK,SAAS,wBAAwB,GAC3CG,EAAU,SAAW,WACxBC,EAAA,MAAQJ,EAAK,SAAS,yBAAyB,EAC5CG,EAAU,SAAW,WAAaA,EAAU,SAAW,OACjEC,EAAO,KAAO,UACPA,EAAA,MAAQJ,EAAK,SAAS,wBAAwB,GAC3CG,EAAU,SAAW,WAC/BC,EAAO,KAAO,UACPA,EAAA,MAAQJ,EAAK,SAAS,0BAA0B,IAC7CG,EAAU,SAAW,SAAWA,EAAU,SAAW,aAC/DC,EAAO,KAAO,QACPA,EAAA,MAAQJ,EAAK,SAAS,sBAAsB,GAG/CG,EAAU,SAAQA,EAAU,OAAS,WAEtCA,EAAU,WAAaA,EAAU,UAAW,CACzC,MAAAG,EAAYH,EAAU,UAAY,IAAI,KAAKA,EAAU,SAAS,EAAE,QAAA,EAAY,KAAK,IAAI,EAC3FC,EAAO,YAAcJ,EAAK,aACzBM,EAAY,IAAI,KAAKH,EAAU,SAAS,EAAE,QAAQ,EAClD,EAAA,CAEF,CAEO,OAAAC,CACR,CAEA,SAASC,EAAWE,EAAkC,CACrD,KAAM,CAAE,KAAAC,EAAM,KAAAC,CAAK,EAAIC,EAAqBH,CAAQ,EAC7C,OAAAP,EAAK,SAAS,yBAA0B,CAAE,YAAa,CAAE,KAAAS,EAAM,KAAAD,CAAK,CAAA,CAAG,CAC/E,CAEA,SAASG,EAAqBR,EAAsC,CACnE,MACC,CAAC,UAAW,OAAO,EAAE,SAASA,EAAU,MAAM,GAC9C,CAACA,EAAU,SACX,CAACA,EAAU,cAEb,CAEO,MAAA,CACN,aAAAD,EACA,WAAAG,EACA,qBAAAM,CAAA,CAEF"}