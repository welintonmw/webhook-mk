import{_ as L,b as Z}from"./n8n-4UEsHtUL.js";import{ag as m,l as h,m as T,U as l,p as b,I as a,G as R,e as x,O as i,S as E,T as _,u as n,R as $,r as j,aH as W,M as I,J as ee,n as q,b as te,F as se,a7 as oe,az as ae,a9 as ne}from"./vendor-Dv5OeN6t.js";import{O as U,e as O,Q as re,R as le,U as G,l as F,X as ie,x as V,G as ce,Y as ue,n as Y,u as K,t as z,D as de,Z as pe,_ as me,o as ge,V as M,d as be,H as he,$ as _e,j as fe,a0 as Ce,a as Se,b as ve,a1 as ye,a2 as Te,a3 as ke}from"./index-1OxaEeO3.js";import{u as xe}from"./useUserHelpers-DZtbUAMm.js";import{d as Ee,m as $e}from"./pinia-sugP77Im.js";import{D}from"./luxon-CLwAIbs0.js";import"./axios-Mm4CS0gO.js";import"./esprima-next-nhoSXAeq.js";import"./lodash-es-CZ1inz46.js";import"./flatted-DN8lQ2XG.js";import"./@vueuse/core-BBHtM40w.js";import"./@n8n/permissions-BxxteU-C.js";import"./dateformat-CIxnBJXX.js";import"./vue-i18n-Delvyc9x.js";import"./uuid-SoommWqA.js";import"./@n8n/codemirror-lang-sql-DBO6T13I.js";import"./@lezer/common-B6ct0j_v.js";import"./prettier-bS6l4Vb1.js";import"./@jsplumb/util-DS-9vq_E.js";import"./@jsplumb/core-CVBraiyY.js";import"./@jsplumb/common-CF-b-6-M.js";import"./@jsplumb/connector-bezier-BGU0Ovbw.js";import"./@jsplumb/browser-ui-BVF2KoJK.js";import"./codemirror-lang-html-n8n-CWDO6_kP.js";import"./@n8n/codemirror-lang-Dl0FW_KM.js";import"./fast-json-stable-stringify-BOfzoJX1.js";import"./timeago.js-CiyKClrF.js";import"./qrcode.vue-BGkPba5A.js";import"./vue3-touch-events-mV0oX_Sl.js";import"./chart.js-343vZi4M.js";const we="_notification_197jx_8",Me={"gift-icon":"_gift-icon_197jx_1",notification:we},Pe={},Ie=b("div",null,null,-1),Ae=[Ie];function Be(e,t){const c=m("font-awesome-icon");return h(),T("div",{class:a(e.$style["gift-icon"])},[l(c,{icon:"gift"}),b("div",{class:a(e.$style.notification)},Ae,2)],2)}const Ne={$style:Me},Ue=L(Pe,[["render",Be],["__cssModules",Ne]]),De=["value","max"],Le=8,je=R({__name:"ExecutionsUsage",props:{cloudPlanData:{}},setup(e){const t=e,c=D.utc(),d=x(()=>{const{days:o=0}=r().diff(c,["days"]).toObject();return Math.ceil(o)}),p=x(()=>{var f;if(!((f=t.cloudPlanData)!=null&&f.expirationDate))return!1;const o=D.fromISO(t.cloudPlanData.expirationDate);return c.toMillis()>o.toMillis()}),r=()=>{var o;return D.fromISO(((o=t==null?void 0:t.cloudPlanData)==null?void 0:o.expirationDate)??"")},u=x(()=>{var o;return(o=t.cloudPlanData)!=null&&o.usage?t.cloudPlanData.usage.executions<t.cloudPlanData.monthlyExecutionsLimit:0}),y=x(()=>{var s;if(!((s=t.cloudPlanData)!=null&&s.usage))return 0;const o=t.cloudPlanData.usage.executions,f=t.cloudPlanData.monthlyExecutionsLimit;return o>f?f:o}),k=x(()=>{var C;if(!((C=t.cloudPlanData)!=null&&C.usage))return 0;const o=t.cloudPlanData.usage.executions,f=t.cloudPlanData.monthlyExecutionsLimit,s=Le*f/100;return o<s?s:o}),w=x(()=>{var o;return(o=t.cloudPlanData)!=null&&o.monthlyExecutionsLimit?t.cloudPlanData.monthlyExecutionsLimit:0}),P=()=>{O().goToUpgrade("canvas-nav","upgrade-canvas-nav","redirect")};return(o,f)=>{const s=m("n8n-text"),C=m("i18n-t"),S=m("n8n-button");return h(),T("div",{class:a(o.$style.container)},[p.value?(h(),T("div",{key:0,class:a(o.$style.usageText)},[l(s,{size:"small",color:"danger"},{default:i(()=>[E(_(n(U).baseText("executionUsage.expired.text")),1)]),_:1})],2)):!p.value&&u.value?(h(),T("div",{key:1,class:a(o.$style.usageText)},[l(C,{tag:"span",keypath:"executionUsage.currentUsage"},{text:i(()=>[l(s,{size:"small",color:"text-dark"},{default:i(()=>[E(_(n(U).baseText("executionUsage.currentUsage.text")),1)]),_:1})]),count:i(()=>[l(s,{size:"small",bold:!0,color:"warning"},{default:i(()=>[E(_(n(U).baseText("executionUsage.currentUsage.count",{adjustToNumber:d.value||0})),1)]),_:1})]),_:1})],2)):u.value?$("",!0):(h(),T("div",{key:2,class:a(o.$style.usageText)},[l(s,{size:"small"},{default:i(()=>[E(_(n(U).baseText("executionUsage.ranOutOfExecutions.text")),1)]),_:1})],2)),p.value?$("",!0):(h(),T("div",{key:3,class:a(o.$style.usageCounter)},[b("div",{class:a(o.$style.progressBarDiv)},[b("progress",{class:a([u.value?o.$style.progressBarSuccess:o.$style.progressBarDanger,o.$style.progressBar]),value:k.value,max:w.value},null,10,De)],2),b("div",{class:a(o.$style.executionsCountSection)},[l(s,{size:"xsmall",color:u.value?"text-dark":"danger"},{default:i(()=>[E(_(y.value)+"/"+_(w.value),1)]),_:1},8,["color"]),l(s,{size:"xsmall",color:u.value?"text-dark":"danger"},{default:i(()=>[E(_(n(U).baseText("executionUsage.label.executions")),1)]),_:1},8,["color"])],2)],2)),b("div",{class:a(o.$style.upgradeButtonSection)},[l(S,{label:n(U).baseText("executionUsage.button.upgrade"),size:"xmini",icon:"gem",type:"success",block:!0,onClick:P},null,8,["label"])],2)],2)}}}),Re="_container_19ive_1",Oe="_progressBarDiv_19ive_9",ze="_progressBar_19ive_9",We="_progressBarSuccess_19ive_38",Ve="_progressBarDanger_19ive_48",He="_usageText_19ive_57",qe="_usageCounter_19ive_64",Ge="_danger_19ive_73",Fe="_executionsCountSection_19ive_77",Ye="_upgradeButtonSection_19ive_81",Ke={container:Re,progressBarDiv:Oe,progressBar:ze,progressBarSuccess:We,progressBarDanger:Ve,usageText:He,usageCounter:qe,danger:Ge,executionsCountSection:Fe,upgradeButtonSection:Ye},Je={$style:Ke},Qe=L(je,[["__cssModules",Je]]);async function Xe(e){return await re(e.baseUrl,"/cta/become-creator")}const Ze="N8N_BECOME_TEMPLATE_CREATOR_CTA_DISMISSED_AT",et=30,tt=15*60*1e3,J=Ee(le.BECOME_TEMPLATE_CREATOR,()=>{const e=G(),t=F(),c=ie(Ze),d=j(!1),p=j(null),r=x(()=>c.value?!st(c.value):!1),u=x(()=>d.value&&!e.userIsTrialing&&!r.value),y=()=>{c.value=D.now().toISO()},k=async()=>{const f=await Xe(t.restApiContext);d.value=f},w=async()=>{r.value||e.userIsTrialing||d.value||await k()};return{showBecomeCreatorCta:u,dismissCta:y,startMonitoringCta:()=>{p.value||(setTimeout(w,1e3),p.value=setInterval(w,tt))},stopMonitoringCta:()=>{p.value&&(clearInterval(p.value),p.value=null)}}});function st(e){return D.fromISO(e).plus({days:et})<=D.now()}const ot=R({__name:"BecomeTemplateCreatorCta",setup(e){const t=V(),c=J(),d=ce(),p=()=>{d.track("User clicked become creator CTA")};return(r,u)=>{const y=m("n8n-icon"),k=m("n8n-button");return n(c).showBecomeCreatorCta?(h(),T("div",{key:0,class:a(r.$style.container),"data-test-id":"become-template-creator-cta"},[b("div",{class:a(r.$style.textAndCloseButton)},[b("p",{class:a(r.$style.text)},_(n(t).baseText("becomeCreator.text")),3),b("button",{class:a(r.$style.closeButton),"data-test-id":"close-become-template-creator-cta",onClick:u[0]||(u[0]=w=>n(c).dismissCta())},[l(y,{icon:"times",size:"xsmall",title:n(t).baseText("generic.close")},null,8,["title"])],2)],2),l(k,{class:a(r.$style.becomeCreatorButton),label:n(t).baseText("becomeCreator.buttonText"),size:"xmini",type:"secondary",element:"a",href:"https://creators.n8n.io/hub",target:"_blank",onClick:p},null,8,["class","label"])],2)):$("",!0)}}}),at="_container_92ffs_1",nt="_textAndCloseButton_92ffs_9",rt="_text_92ffs_9",lt="_closeButton_92ffs_22",it="_becomeCreatorButton_92ffs_35",ct={container:at,textAndCloseButton:nt,text:rt,closeButton:lt,becomeCreatorButton:it},ut={$style:ct},dt=L(ot,[["__cssModules",ut]]),pt=R({__name:"MainSidebarSourceControl",props:{isCollapsed:{type:Boolean}},setup(e){const t={CONFLICT:409};W();const c=ue(),d=O(),p=Y(),r=K(),u=V(),y=Z(),k=j(300),w=x(()=>p.preferences.branchName),P=x(()=>p.isEnterpriseSourceControlEnabled&&z(["rbac"],{rbac:{scope:"sourceControl:manage"}}));async function o(){c.startLoading(),c.setLoadingText(u.baseText("settings.sourceControl.loading.checkingForChanges"));try{const s=await p.getAggregatedStatus();d.openModalWithData({name:de,data:{eventBus:y,status:s}})}catch(s){r.showError(s,u.baseText("error"))}finally{c.stopLoading(),c.setLoadingText(u.baseText("genericHelpers.loading"))}}async function f(){c.startLoading(),c.setLoadingText(u.baseText("settings.sourceControl.loading.pull"));try{const s=await p.pullWorkfolder(!1)||[];if(s.filter(S=>!(S.type==="workflow"&&S.status==="created"&&S.location==="local")).length===0)r.showMessage({title:u.baseText("settings.sourceControl.pull.upToDate.title"),message:u.baseText("settings.sourceControl.pull.upToDate.description"),type:"success"});else{r.showMessage({title:u.baseText("settings.sourceControl.pull.success.title"),type:"success"});const S=["variables","credential"];(s||[]).some(g=>S.includes(g.type))&&q(()=>{r.showMessage({message:u.baseText("settings.sourceControl.pull.oneLastStep.description"),title:u.baseText("settings.sourceControl.pull.oneLastStep.title"),type:"info",duration:0,showClose:!0,offset:0})})}pe.emit("pull")}catch(s){const C=s.response;(C==null?void 0:C.status)===t.CONFLICT?d.openModalWithData({name:me,data:{eventBus:y,status:C.data.data}}):r.showError(s,"Error")}finally{c.stopLoading(),c.setLoadingText(u.baseText("genericHelpers.loading"))}}return(s,C)=>{const S=m("n8n-icon"),A=m("n8n-button"),g=m("n8n-tooltip");return P.value?(h(),T("div",{key:0,class:a({[s.$style.sync]:!0,[s.$style.collapsed]:s.isCollapsed,[s.$style.isConnected]:n(p).isEnterpriseSourceControlEnabled}),style:ee({borderLeftColor:n(p).preferences.branchColor}),"data-test-id":"main-sidebar-source-control"},[n(p).preferences.connected&&n(p).preferences.branchName?(h(),T("div",{key:0,class:a(s.$style.connected),"data-test-id":"main-sidebar-source-control-connected"},[b("span",{class:a(s.$style.branchName)},[l(S,{icon:"code-branch"}),E(" "+_(w.value),1)],2),b("div",{class:a({"pt-xs":!s.isCollapsed})},[l(g,{disabled:!s.isCollapsed,"show-after":k.value,placement:"right"},{content:i(()=>[b("div",null,_(n(u).baseText("settings.sourceControl.button.pull")),1)]),default:i(()=>[l(A,{class:a({"mr-2xs":!s.isCollapsed,"mb-2xs":s.isCollapsed&&!n(p).preferences.branchReadOnly}),icon:"arrow-down",type:"tertiary",size:"mini",square:s.isCollapsed,label:s.isCollapsed?"":n(u).baseText("settings.sourceControl.button.pull"),onClick:f},null,8,["class","square","label"])]),_:1},8,["disabled","show-after"]),n(p).preferences.branchReadOnly?$("",!0):(h(),I(g,{key:0,disabled:!s.isCollapsed,"show-after":k.value,placement:"right"},{content:i(()=>[b("div",null,_(n(u).baseText("settings.sourceControl.button.push")),1)]),default:i(()=>[l(A,{square:s.isCollapsed,label:s.isCollapsed?"":n(u).baseText("settings.sourceControl.button.push"),icon:"arrow-up",type:"tertiary",size:"mini",onClick:o},null,8,["square","label"])]),_:1},8,["disabled","show-after"]))],2)],2)):$("",!0)],6)):$("",!0)}}}),mt="_sync_15zv3_1",gt="_isConnected_15zv3_8",bt="_collapsed_15zv3_12",ht="_branchName_15zv3_22",_t="_connected_15zv3_32",ft={sync:mt,isConnected:gt,collapsed:bt,branchName:ht,connected:_t},Ct={$style:ft},St=L(pt,[["__cssModules",Ct]]),vt={key:0,class:"mt-m mb-m"},yt={key:2,class:"mt-m mb-m"},Tt=R({__name:"ProjectNavigation",props:{collapsed:{type:Boolean},planName:{}},setup(e){const t=e,c=W(),d=V(),p=K(),r=ge(),u=O(),y=j(!1),k=j(!1),w=x(()=>({id:"home",label:d.baseText("projects.menu.home"),icon:"home",route:{to:{name:M.HOMEPAGE}}})),P=x(()=>({id:"addProject",label:d.baseText("projects.menu.addProject"),icon:"plus",disabled:!k.value||y.value||!r.canCreateProjects,isLoading:y.value})),o=g=>({id:g.id,label:g.name,route:{to:{name:M.PROJECTS_WORKFLOWS,params:{projectId:g.id}}}}),f=()=>{},s=()=>{},C=async()=>{y.value=!0;try{const g=await r.createProject({name:d.baseText("projects.settings.newProjectName")});await c.push({name:M.PROJECT_SETTINGS,params:{projectId:g.id}}),p.showMessage({title:d.baseText("projects.settings.save.successful.title",{interpolate:{projectName:g.name??""}}),type:"success"})}catch(g){p.showError(g,d.baseText("projects.error.title"))}finally{y.value=!1}},S=x(()=>r.myProjects.filter(g=>g.type==="team").toSorted((g,B)=>!g.name||!B.name?0:g.name>B.name?1:g.name<B.name?-1:0)),A=async()=>{await u.goToUpgrade("rbac","upgrade-rbac")};return te(async()=>{await q(),k.value=!0}),(g,B)=>{const v=m("N8nMenuItem"),N=m("ElMenu"),Q=m("i18n-t"),X=m("N8nTooltip");return h(),T("div",{class:a(g.$style.projects)},[l(N,{collapse:t.collapsed,class:"home"},{default:i(()=>[l(v,{item:w.value,compact:t.collapsed,"handle-select":f,"active-tab":n(r).projectNavActiveId,mode:"tabs","data-test-id":"project-home-menu-item"},null,8,["item","compact","active-tab"])]),_:1},8,["collapse"]),S.value.length||n(r).hasPermissionToCreateProjects&&n(r).teamProjectsAvailable?(h(),T("hr",vt)):$("",!0),S.value.length?(h(),I(N,{key:1,collapse:t.collapsed,class:a(g.$style.projectItems)},{default:i(()=>[(h(!0),T(se,null,oe(S.value,H=>(h(),I(v,{key:H.id,item:o(H),compact:t.collapsed,"handle-select":s,"active-tab":n(r).projectNavActiveId,mode:"tabs","data-test-id":"project-menu-item"},null,8,["item","compact","active-tab"]))),128))]),_:1},8,["collapse","class"])):$("",!0),l(X,{placement:"right",disabled:n(r).canCreateProjects},{content:i(()=>[l(Q,{keypath:"projects.create.limitReached"},{planName:i(()=>[E(_(t.planName),1)]),limit:i(()=>[E(_(n(d).baseText("projects.create.limit",{adjustToNumber:n(r).teamProjectsLimit,interpolate:{num:String(n(r).teamProjectsLimit)}})),1)]),link:i(()=>[b("a",{class:a(g.$style.upgradeLink),href:"#",onClick:A},_(n(d).baseText("projects.create.limitReached.link")),3)]),_:1})]),default:i(()=>[n(r).hasPermissionToCreateProjects&&n(r).teamProjectsAvailable?(h(),I(N,{key:0,collapse:t.collapsed,class:"pl-xs pr-xs"},{default:i(()=>[l(v,{item:P.value,compact:t.collapsed,"handle-select":C,mode:"tabs","data-test-id":"add-project-menu-item"},null,8,["item","compact"])]),_:1},8,["collapse"])):$("",!0)]),_:1},8,["disabled"]),S.value.length||n(r).hasPermissionToCreateProjects&&n(r).teamProjectsAvailable?(h(),T("hr",yt)):$("",!0)],2)}}}),kt="_projects_7ap69_1",xt="_projectItems_7ap69_9",Et="_upgradeLink_7ap69_15",$t={projects:kt,projectItems:xt,upgradeLink:Et},wt={$style:$t},Mt=L(Tt,[["__cssModules",wt],["__scopeId","data-v-94afe4bb"]]),Pt=R({name:"MainSidebar",components:{GiftNotificationIcon:Ue,ExecutionsUsage:Qe,MainSidebarSourceControl:St,BecomeTemplateCreatorCta:dt,ProjectNavigation:Mt},setup(){const e=ke(),{callDebounced:t}=be(),c=W(),d=ae();return{externalHooks:e,callDebounced:t,...he(),...xe(c,d)}},data(){return{basePath:"",fullyExpanded:!1}},computed:{...$e(F,ve,O,Se,Ce,fe,G,Y,J,_e),logoPath(){return this.basePath+(this.isCollapsed?"static/logo/collapsed.svg":this.uiStore.logo)},hasVersionUpdates(){return this.settingsStore.settings.releaseChannel==="stable"&&this.versionsStore.hasVersionUpdates},nextVersions(){return this.versionsStore.nextVersions},isCollapsed(){return this.uiStore.sidebarMenuCollapsed},canUserAccessSettings(){return this.findFirstAccessibleSettingsRoute()!==null},showUserArea(){return z(["authenticated"])},workflowExecution(){return this.workflowsStore.getWorkflowExecution},userMenuItems(){return[{id:"settings",label:this.$locale.baseText("settings")},{id:"logout",label:this.$locale.baseText("auth.signout")}]},mainMenuItems(){const e=[],t=this.findFirstAccessibleSettingsRoute(),c=[{id:"cloud-admin",position:"bottom",label:"Admin Panel",icon:"cloud",available:this.settingsStore.isCloudDeployment&&z(["instanceOwner"])},{id:"templates",icon:"box-open",label:this.$locale.baseText("mainSidebar.templates"),position:"bottom",available:this.settingsStore.isTemplatesEnabled&&this.templatesStore.hasCustomTemplatesHost,route:{to:{name:M.TEMPLATES}}},{id:"templates",icon:"box-open",label:this.$locale.baseText("mainSidebar.templates"),position:"bottom",available:this.settingsStore.isTemplatesEnabled&&!this.templatesStore.hasCustomTemplatesHost,link:{href:this.templatesStore.websiteTemplateRepositoryURL,target:"_blank"}},{id:"variables",icon:"variable",label:this.$locale.baseText("mainSidebar.variables"),customIconSize:"medium",position:"bottom",route:{to:{name:M.VARIABLES}}},{id:"executions",icon:"tasks",label:this.$locale.baseText("mainSidebar.executions"),position:"bottom",route:{to:{name:M.EXECUTIONS}}},{id:"settings",icon:"cog",label:this.$locale.baseText("settings"),position:"bottom",available:this.canUserAccessSettings&&this.usersStore.currentUser!==null,activateOnRouteNames:[M.USERS_SETTINGS,M.API_SETTINGS,M.PERSONAL_SETTINGS],route:{to:t}},{id:"help",icon:"question",label:this.$locale.baseText("mainSidebar.help"),position:"bottom",children:[{id:"quickstart",icon:"video",label:this.$locale.baseText("mainSidebar.helpMenuItems.quickstart"),link:{href:"https://www.youtube.com/watch?v=1MwSoB0gnM4",target:"_blank"}},{id:"docs",icon:"book",label:this.$locale.baseText("mainSidebar.helpMenuItems.documentation"),link:{href:"https://docs.n8n.io?utm_source=n8n_app&utm_medium=app_sidebar",target:"_blank"}},{id:"forum",icon:"users",label:this.$locale.baseText("mainSidebar.helpMenuItems.forum"),link:{href:"https://community.n8n.io?utm_source=n8n_app&utm_medium=app_sidebar",target:"_blank"}},{id:"examples",icon:"graduation-cap",label:this.$locale.baseText("mainSidebar.helpMenuItems.course"),link:{href:"https://www.youtube.com/watch?v=1MwSoB0gnM4",target:"_blank"}},{id:"about",icon:"info",label:this.$locale.baseText("mainSidebar.aboutN8n"),position:"bottom"}]}];return[...e,...c]},userIsTrialing(){return this.cloudPlanStore.userIsTrialing},currentPlanAndUsageData(){const e=this.cloudPlanStore.currentPlanData,t=this.cloudPlanStore.currentUsageData;return!e||!t?null:{...e,usage:t}}},async mounted(){this.basePath=this.rootStore.baseUrl,this.$refs.user&&this.externalHooks.run("mainSidebar.mounted",{userRef:this.$refs.user}),this.$nextTick(()=>{window.innerWidth<900||this.uiStore.isNodeView?this.uiStore.sidebarMenuCollapsed=!0:this.uiStore.sidebarMenuCollapsed=!1,this.fullyExpanded=!this.isCollapsed}),this.becomeTemplateCreatorStore.startMonitoringCta()},created(){window.addEventListener("resize",this.onResize)},beforeUnmount(){this.becomeTemplateCreatorStore.stopMonitoringCta(),window.removeEventListener("resize",this.onResize)},methods:{trackHelpItemClick(e){this.$telemetry.track("User clicked help resource",{type:e,workflow_id:this.workflowsStore.workflowId})},trackTemplatesClick(){var e;this.$telemetry.track("User clicked on templates",{role:(e=this.usersStore.currentUserCloudInfo)==null?void 0:e.role,active_workflow_count:this.workflowsStore.activeWorkflows.length})},async onUserActionToggle(e){switch(e){case"logout":this.onLogout();break;case"settings":this.$router.push({name:M.PERSONAL_SETTINGS});break}},onLogout(){this.$router.push({name:M.SIGNOUT})},toggleCollapse(){this.uiStore.toggleSidebarMenuCollapse(),this.isCollapsed?this.fullyExpanded=!this.isCollapsed:setTimeout(()=>{this.fullyExpanded=!this.isCollapsed},300)},openUpdatesPanel(){this.uiStore.openModal(ye)},async handleSelect(e){switch(e){case"templates":this.settingsStore.isTemplatesEnabled&&!this.templatesStore.hasCustomTemplatesHost&&this.trackTemplatesClick();break;case"about":{this.trackHelpItemClick("about"),this.uiStore.openModal(Te);break}case"cloud-admin":{this.cloudPlanStore.redirectToDashboard();break}case"quickstart":case"docs":case"forum":case"examples":{this.trackHelpItemClick(e);break}}},findFirstAccessibleSettingsRoute(){var c;const e=(c=this.$router.getRoutes().find(d=>d.path==="/settings"))==null?void 0:c.children.map(d=>d.name??"");let t={name:M.USERS_SETTINGS};for(const d of e??[])if(this.canUserAccessRouteByName(d.toString())){t={name:d.toString()};break}return t},onResize(e){this.callDebounced(this.onResizeEnd,{debounceTime:100},e)},async onResizeEnd(e){const t=e.target.outerWidth;await this.checkWidthAndAdjustSidebar(t)},async checkWidthAndAdjustSidebar(e){e<900&&(this.uiStore.sidebarMenuCollapsed=!0,await this.$nextTick(),this.fullyExpanded=!this.isCollapsed)}}}),It="_sideMenu_1qnza_1",At="_logo_1qnza_8",Bt="_sideMenuCollapsed_1qnza_19",Nt="_sideMenuCollapseButton_1qnza_26",Ut="_updates_1qnza_45",Dt="_expanded_1qnza_58",Lt="_userArea_1qnza_65",jt="_userName_1qnza_72",Rt="_userActions_1qnza_86",Ot={sideMenu:It,logo:At,sideMenuCollapsed:Bt,sideMenuCollapseButton:Nt,updates:Ut,expanded:Dt,userArea:Lt,userName:jt,userActions:Rt},zt=["src"],Wt={class:"ml-3xs","data-test-id":"main-sidebar-user-menu"};function Vt(e,t,c,d,p,r){const u=m("n8n-icon"),y=m("ProjectNavigation"),k=m("BecomeTemplateCreatorCta"),w=m("ExecutionsUsage"),P=m("GiftNotificationIcon"),o=m("n8n-text"),f=m("MainSidebarSourceControl"),s=m("n8n-avatar"),C=m("el-dropdown-item"),S=m("el-dropdown-menu"),A=m("el-dropdown"),g=m("n8n-action-dropdown"),B=m("n8n-menu");return h(),T("div",{id:"side-menu",class:a({"side-menu":!0,[e.$style.sideMenu]:!0,[e.$style.sideMenuCollapsed]:e.isCollapsed})},[b("div",{id:"collapse-change-button",class:a(["clickable",e.$style.sideMenuCollapseButton]),onClick:t[0]||(t[0]=(...v)=>e.toggleCollapse&&e.toggleCollapse(...v))},[e.isCollapsed?(h(),I(u,{key:0,icon:"chevron-right",size:"xsmall",class:"ml-5xs"})):(h(),I(u,{key:1,icon:"chevron-left",size:"xsmall",class:"mr-5xs"}))],2),l(B,{items:e.mainMenuItems,collapsed:e.isCollapsed,onSelect:e.handleSelect},ne({header:i(()=>{var v;return[b("div",{class:a(e.$style.logo)},[b("img",{src:e.logoPath,"data-test-id":"n8n-logo",class:a(e.$style.icon),alt:"n8n"},null,10,zt)],2),l(y,{collapsed:e.isCollapsed,"plan-name":(v=e.cloudPlanStore.currentPlanData)==null?void 0:v.displayName},null,8,["collapsed","plan-name"])]}),beforeLowerMenu:i(()=>[e.fullyExpanded&&!e.userIsTrialing?(h(),I(k,{key:0})):$("",!0),e.fullyExpanded&&e.userIsTrialing?(h(),I(w,{key:1,"cloud-plan-data":e.currentPlanAndUsageData},null,8,["cloud-plan-data"])):$("",!0)]),menuSuffix:i(()=>[b("div",null,[e.hasVersionUpdates?(h(),T("div",{key:0,"data-test-id":"version-updates-panel-button",class:a(e.$style.updates),onClick:t[1]||(t[1]=(...v)=>e.openUpdatesPanel&&e.openUpdatesPanel(...v))},[b("div",{class:a(e.$style.giftContainer)},[l(P)],2),l(o,{class:a({"ml-xs":!0,[e.$style.expanded]:e.fullyExpanded}),color:"text-base"},{default:i(()=>[E(_(e.nextVersions.length>99?"99+":e.nextVersions.length)+" update"+_(e.nextVersions.length>1?"s":""),1)]),_:1},8,["class"])],2)):$("",!0),l(f,{"is-collapsed":e.isCollapsed},null,8,["is-collapsed"])])]),_:2},[e.showUserArea?{name:"footer",fn:i(()=>[b("div",{class:a(e.$style.userArea)},[b("div",Wt,[l(A,{disabled:!e.isCollapsed,placement:"right-end",trigger:"click",onCommand:e.onUserActionToggle},{dropdown:i(()=>[l(S,null,{default:i(()=>[l(C,{command:"settings"},{default:i(()=>[E(_(e.$locale.baseText("settings")),1)]),_:1}),l(C,{command:"logout"},{default:i(()=>[E(_(e.$locale.baseText("auth.signout")),1)]),_:1})]),_:1})]),default:i(()=>{var v,N;return[b("div",{class:a({[e.$style.avatar]:!0,clickable:e.isCollapsed})},[l(s,{"first-name":(v=e.usersStore.currentUser)==null?void 0:v.firstName,"last-name":(N=e.usersStore.currentUser)==null?void 0:N.lastName,size:"small"},null,8,["first-name","last-name"])],2)]}),_:1},8,["disabled","onCommand"])]),b("div",{class:a({"ml-2xs":!0,[e.$style.userName]:!0,[e.$style.expanded]:e.fullyExpanded})},[l(o,{size:"small",bold:!0,color:"text-dark"},{default:i(()=>{var v;return[E(_((v=e.usersStore.currentUser)==null?void 0:v.fullName),1)]}),_:1})],2),b("div",{class:a({[e.$style.userActions]:!0,[e.$style.expanded]:e.fullyExpanded})},[l(g,{items:e.userMenuItems,placement:"top-start","data-test-id":"user-menu",onSelect:e.onUserActionToggle},null,8,["items","onSelect"])],2)],2)]),key:"0"}:void 0]),1032,["items","collapsed","onSelect"])],2)}const Ht={$style:Ot},vs=L(Pt,[["render",Vt],["__cssModules",Ht]]);export{vs as default};
//# sourceMappingURL=MainSidebar-3ee-tTgz.js.map
