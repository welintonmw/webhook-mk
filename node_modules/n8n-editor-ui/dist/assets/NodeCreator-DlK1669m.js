import{O as Je,cC as ie,ev as Qe,aw as le,a3 as ke,dU as xe,bT as et,ew as tt,dw as ot,cX as nt,ao as ce,x as ge,b8 as $e,b7 as Le,b9 as de,G as ae,c7 as Ee,j as st,a as at,b2 as oe,eh as rt,eg as it,bL as ye,ex as lt,e as Re,l as Ae,ey as ct,ez as dt,eA as ut,bC as Ve,bW as Me,aE as pt,aR as gt,a4 as yt}from"./index-1OxaEeO3.js";import{u as x,a as B,b as X,t as mt,f as _t,T as Oe,R as Be,A as Pe,c as De}from"./nodeCreator.store-FIsc3SCx.js";import{G as U,l as g,M as I,O as A,H as Z,W as He,Z as we,b as me,y as Ke,_ as Ce,ag as P,m as E,p as S,U as M,I as u,R,r as J,e as h,a9 as ue,u as q,P as Ue,J as Te,a2 as _e,V as ze,K as ne,T as W,d as Q,ab as qe,al as ft,Y as Ye,F as vt,a7 as ht,af as bt,aR as kt,S as te}from"./vendor-Dv5OeN6t.js";import{_ as z}from"./n8n-4UEsHtUL.js";import{m as $t,E as fe,F as We}from"./lodash-es-CZ1inz46.js";import{u as Ne}from"./NodeCreation-PrQGENrl.js";import"./pinia-sugP77Im.js";import"./axios-Mm4CS0gO.js";import"./flatted-DN8lQ2XG.js";import"./@vueuse/core-BBHtM40w.js";import"./@n8n/permissions-BxxteU-C.js";import"./dateformat-CIxnBJXX.js";import"./vue-i18n-Delvyc9x.js";import"./uuid-SoommWqA.js";import"./luxon-CLwAIbs0.js";import"./@n8n/codemirror-lang-sql-DBO6T13I.js";import"./@lezer/common-B6ct0j_v.js";import"./prettier-bS6l4Vb1.js";import"./@jsplumb/util-DS-9vq_E.js";import"./@jsplumb/core-CVBraiyY.js";import"./@jsplumb/common-CF-b-6-M.js";import"./@jsplumb/connector-bezier-BGU0Ovbw.js";import"./@jsplumb/browser-ui-BVF2KoJK.js";import"./codemirror-lang-html-n8n-CWDO6_kP.js";import"./@n8n/codemirror-lang-Dl0FW_KM.js";import"./esprima-next-nhoSXAeq.js";import"./fast-json-stable-stringify-BOfzoJX1.js";import"./timeago.js-CiyKClrF.js";import"./qrcode.vue-BGkPba5A.js";import"./vue3-touch-events-mV0oX_Sl.js";import"./chart.js-343vZi4M.js";const wt=U({name:"SlideTransition"});function Ct(r,e,p,s,o,f){return g(),I(He,{name:"slide"},{default:A(()=>[Z(r.$slots,"default",{},void 0,!0)]),_:3})}const Tt=z(wt,[["render",Ct],["__scopeId","data-v-88e2114c"]]),je="placeholder_recommended";function Nt(...r){return Je.baseText(...r)}const ee=$t(Nt,(...r)=>JSON.stringify(r)),be={"n8n-nodes-base.hubspotTrigger":(r,e)=>{var s,o,f;const p=(s=r==null?void 0:r.options)==null?void 0:s[0];return(f=(o=p==null?void 0:p.values[0])==null?void 0:o.options)==null?void 0:f.map(b=>({...se(e),actionKey:b.value,displayName:ee("nodeCreator.actionsCategory.onEvent",{interpolate:{event:fe(b.name)}}),description:b.description??"",displayOptions:r.displayOptions,values:{eventsUi:{eventValues:[{name:b.value}]}}}))}};function se(r,e){const p=r.group.includes("trigger"),s=ee(p?"nodeCreator.actionsCategory.triggers":"nodeCreator.actionsCategory.actions");return{name:r.name,group:r.group,codex:{label:e??"",categories:[s]},iconUrl:r.iconUrl,outputs:r.outputs,icon:r.icon,defaults:r.defaults}}function It(r){if(r.properties.find(o=>o.name==="resource"))return[];const e=r.properties.find(o=>{var f;return((f=o.name)==null?void 0:f.toLowerCase())==="operation"});if(!(e!=null&&e.options))return[];const s=e.options.filter(o=>!["*",""," "].includes(o.name)).map(o=>({...se(r),actionKey:o.value,displayName:o.action??fe(o.name),description:o.description??"",displayOptions:e.displayOptions,values:{[e.name]:e.type==="multiOptions"?[o.value]:o.value}}));return s.length===0?[]:s}function St(r){var y,d;const e=["event","events","trigger on"],p=(y=r.displayName)==null?void 0:y.toLowerCase().includes("trigger"),s=r.properties.find(n=>{var i;return e.includes((i=n.displayName)==null?void 0:i.toLowerCase())});if(!p)return[];if(!(s!=null&&s.options))return[{...se(r),actionKey:je,displayName:ee("nodeCreator.actionsCategory.onNewEvent",{interpolate:{event:r.displayName.replace("Trigger","").trimEnd()}}),description:""}];const o=s.options.filter(n=>!["*",""," "].includes(n.name));return((d=be[r.name])==null?void 0:d.call(be,s,r))??o.map(n=>({...se(r),actionKey:n.value,displayName:n.action??ee("nodeCreator.actionsCategory.onEvent",{interpolate:{event:fe(n.name)}}),description:n.description??"",displayOptions:s.displayOptions,values:{[s.name]:s.type==="multiOptions"?[n.value]:n.value}}))}function At(r){const e=[];return r.properties.filter(s=>{var o;return((o=s.displayName)==null?void 0:o.toLowerCase())==="resource"}).forEach(s=>{(s.options||[]).filter(o=>o.value!==le).forEach((o,f,b)=>{const y=b.length===1,d=r.properties.find(i=>{var l,L,_,D,a;const T=i.name==="operation",m=((_=(L=(l=i.displayOptions)==null?void 0:l.show)==null?void 0:L.resource)==null?void 0:_.includes(o.value))??y,t=(a=(D=i.displayOptions)==null?void 0:D.show)==null?void 0:a["@version"],v=Array.isArray(r.version)?r.version:[r.version],V=t?t.some(N=>typeof N=="number"&&v.includes(N)):!0;return T&&m&&V});if(!(d!=null&&d.options))return;const n=(d.options||[]).map(i=>{var t;const T=i.action??`${o.name} ${fe(i.name)}`,m=y?{show:{resource:[(t=b[0])==null?void 0:t.value]}}:d==null?void 0:d.displayOptions;return{...se(r,`${o.name} ${ee("nodeCreator.actionsCategory.actions")}`),actionKey:i.value,description:(i==null?void 0:i.description)??"",displayOptions:m,values:{operation:(d==null?void 0:d.type)==="multiOptions"?[i.value]:i.value},displayName:T,group:["trigger"]}});e.push(...n)})}),e}function Lt(){function r(o){return o?[...St(o),...It(o),...At(o)]:[]}function e(o){return o.length<=1?[]:o.filter((f,b,y)=>{if(f.actionKey===le)return!1;const n=f.actionKey===je;return!n||n&&y.length>1})}function p(o){const{displayName:f,defaults:b,description:y,name:d,group:n,icon:i,iconUrl:T,iconColor:m,badgeIconUrl:t,outputs:v,codex:V}=o;return{displayName:f,defaults:b,description:y,name:d,group:n,icon:i,iconColor:m,iconUrl:T,badgeIconUrl:t,outputs:v,codex:V}}function s(o,f){const b=[...o],y={},d=[];return b.filter(n=>!n.group.includes("trigger")).forEach(n=>{const i=r(n);if(y[n.name]=i,n.name===ie){const m=f.map(t=>{const v=Qe(n,t);return v?p(v):null}).filter(t=>t!==null);d.push(...m)}d.push(p(n))}),b.filter(n=>n.group.includes("trigger")).forEach(n=>{const i=n.name.replace("Trigger",""),T=r(n),m=(y==null?void 0:y[i])||[],t=d.find(v=>v.name===i);if(t&&(m==null?void 0:m.length)>0){const v=e([...m,...T]);y[i]=v,t.description=n.description}else y[n.name]=e(T),d.push(p(n))}),{actions:y,mergedNodes:d}}return{generateMergedNodesAndActions:s}}const Et=["placeholder","value"],Rt=U({__name:"SearchBar",props:{placeholder:{default:""},modelValue:{default:""}},emits:["update:modelValue"],setup(r,{expose:e,emit:p}){const s=p,o=we({inputRef:null}),f=ke();function b(){var i;(i=o.inputRef)==null||i.focus()}function y(i){const T=i.target;s("update:modelValue",T.value)}function d(){s("update:modelValue","")}me(()=>{f.run("nodeCreatorSearchBar.mount",{inputRef:o.inputRef}),setTimeout(b,0)}),Ke(()=>{var i;(i=o.inputRef)==null||i.remove()});const{inputRef:n}=Ce(o);return e({focus:b}),(i,T)=>{const m=P("font-awesome-icon");return g(),E("div",{class:u(i.$style.searchContainer),"data-test-id":"search-bar"},[S("div",{class:u({[i.$style.prefix]:!0,[i.$style.active]:i.modelValue.length>0})},[M(m,{icon:"search",size:"sm"})],2),S("div",{class:u(i.$style.text)},[S("input",{ref_key:"inputRef",ref:n,placeholder:i.placeholder,value:i.modelValue,class:u(i.$style.input),autofocus:"","data-test-id":"node-creator-search-bar",tabindex:"0",onInput:y},null,42,Et)],2),i.modelValue.length>0?(g(),E("div",{key:0,class:u(i.$style.suffix),onClick:d},[S("button",{class:u([i.$style.clear,i.$style.clickable])},[M(m,{icon:"times-circle"})],2)],2)):R("",!0)],2)}}}),Vt="_searchContainer_dci3d_1",Mt="_prefix_dci3d_17",Ot="_active_dci3d_22",Bt="_text_dci3d_26",Pt="_suffix_dci3d_42",Dt="_clear_dci3d_48",Ht={searchContainer:Vt,prefix:Mt,active:Ot,text:Bt,suffix:Pt,clear:Dt},Kt={$style:Ht},Ut=z(Rt,[["__cssModules",Kt]]),zt=["innerHTML"],qt=U({__name:"NodeItem",props:{nodeType:{},subcategory:{default:void 0},active:{type:Boolean,default:!1}},setup(r){const e=r,p=ge(),s=ae(),{actions:o}=x(),{getAddedNodesAndConnections:f}=Ne(),{isSubNodeType:b}=xe({nodeType:e.nodeType}),y=J(!1),d=J({x:-100,y:-100}),n=J(null),i=h(()=>e.subcategory===et&&!e.nodeType.name.startsWith(tt)?"":p.headerText({key:`headers.${V.value}.description`,fallback:e.nodeType.description})),T=h(()=>t.value),m=h(()=>t.value?"node-creator-action-item":"node-creator-node-item"),t=h(()=>v.value.length>1),v=h(()=>o[e.nodeType.name]||[]),V=h(()=>p.shortNodeType(e.nodeType.name)||""),l=h(()=>({top:`${d.value.y}px`,left:`${d.value.x}px`})),L=h(()=>ot(e.nodeType.name)),_=h(()=>{const c=e.nodeType.displayName.trimEnd();return p.headerText({key:`headers.${V.value}.displayName`,fallback:t.value?c.replace("Trigger",""):c})}),D=h(()=>e.nodeType.group.includes("trigger")&&!t.value);function a(c){document.body.addEventListener("dragover",N);const{pageX:w,pageY:H}=c;c.dataTransfer&&(c.dataTransfer.effectAllowed="copy",c.dataTransfer.dropEffect="copy",c.dataTransfer.setDragImage(n.value,0,0),c.dataTransfer.setData($e,JSON.stringify(f([{type:e.nodeType.name}])))),y.value=!0,d.value={x:w,y:H}}function N(c){if(!y.value||c.pageX===0&&c.pageY===0)return;const[w,H]=Le([],[c.pageX-de/2,c.pageY-de/2]);d.value={x:w,y:H}}function C(){document.body.removeEventListener("dragover",N),y.value=!1,setTimeout(()=>{d.value={x:-100,y:-100}},300)}function O(c){c.target.localName==="a"&&s.track("user clicked cnr docs link",{source:"nodes panel node"})}return(c,w)=>{const H=P("n8n-node-creator-node");return g(),I(H,{draggable:!T.value,class:u(c.$style.nodeItem),description:i.value,title:_.value,"show-action-arrow":T.value,"is-trigger":D.value,"data-test-id":m.value,tag:c.nodeType.tag,onDragstart:a,onDragend:C},ue({icon:A(()=>[q(b)?(g(),E("div",{key:0,class:u(c.$style.subNodeBackground)},null,2)):R("",!0),M(ce,{class:u(c.$style.nodeIcon),"node-type":c.nodeType},null,8,["class","node-type"])]),dragContent:A(()=>[S("div",{ref_key:"draggableDataTransfer",ref:n,class:u(c.$style.draggableDataTransfer)},null,2),Ue(S("div",{class:u(c.$style.draggable),style:Te(l.value)},[M(ce,{"node-type":c.nodeType,size:40,shrink:!1,onClickCapture:w[0]||(w[0]=_e(()=>{},["stop"]))},null,8,["node-type"])],6),[[ze,y.value]])]),_:2},[L.value?{name:"tooltip",fn:A(()=>[S("p",{class:u(c.$style.communityNodeIcon),onClick:O,innerHTML:q(p).baseText("generic.communityNode.tooltip",{interpolate:{packageName:c.nodeType.name.split(".")[0],docURL:q(nt)}})},null,10,zt)]),key:"0"}:void 0]),1032,["draggable","class","description","title","show-action-arrow","is-trigger","data-test-id","tag"])}}}),Yt="_nodeItem_124lg_1",Wt="_nodeIcon_124lg_9",jt="_subNodeBackground_124lg_13",Ft="_communityNodeIcon_124lg_23",Gt="_draggable_124lg_27",Xt="_draggableDataTransfer_124lg_41",Zt={nodeItem:Yt,nodeIcon:Wt,subNodeBackground:jt,communityNodeIcon:Ft,draggable:Gt,draggableDataTransfer:Xt},Jt={$style:Zt},Qt=z(qt,[["__cssModules",Jt]]),xt=U({__name:"SubcategoryItem",props:{item:{}},setup(r){const e=r,p=ge(),s=h(()=>We(e.item.subcategory||e.item.title));return(o,f)=>{const b=P("n8n-node-icon"),y=P("n8n-node-creator-node");return g(),I(y,{class:u(o.$style.subCategory),title:q(p).baseText(`nodeCreator.subcategoryNames.${s.value}`),"is-trigger":!1,description:q(p).baseText(`nodeCreator.subcategoryDescriptions.${s.value}`),"show-action-arrow":!0},{icon:A(()=>[M(b,ne({type:"icon",name:o.item.icon,circle:!1,"show-tooltip":!1},o.item.iconProps),null,16,["name"])]),_:1},8,["class","title","description"])}}}),eo="_subCategory_qrigt_1",to={subCategory:eo},oo={$style:to},no=z(xt,[["__cssModules",oo]]),so=["textContent"],ao=U({__name:"LabelItem",props:{item:{}},setup(r){return(e,p)=>(g(),E("div",{class:u(e.$style.label)},[S("span",{class:u(e.$style.name),textContent:W(e.item.key)},null,10,so)],2))}}),ro="_label_7jmhw_1",io={label:ro},lo={$style:io},co=z(ao,[["__cssModules",lo]]),uo=U({__name:"ActionItem",props:{nodeType:{},action:{}},setup(r){const e=r,p=ae(),{getActionData:s,getAddedNodesAndConnections:o,setAddedNodeActionParameters:f}=Ne(),{activeViewStack:b}=B(),y=we({dragging:!1,draggablePosition:{x:-100,y:-100},storeWatcher:null,draggableDataTransfer:null}),d=h(()=>({top:`${y.draggablePosition.y}px`,left:`${y.draggablePosition.x}px`})),n=h(()=>s(e.action)),i=l=>{var L;return((L=l.name)==null?void 0:L.toLowerCase().includes("trigger"))||l.name===Ee};function T(l){document.body.addEventListener("dragover",m);const{pageX:L,pageY:_}=l;l.dataTransfer&&n.value.key&&(l.dataTransfer.effectAllowed="copy",l.dataTransfer.dropEffect="copy",l.dataTransfer.setDragImage(y.draggableDataTransfer,0,0),l.dataTransfer.setData($e,JSON.stringify(o([{type:n.value.key}]))),p&&(y.storeWatcher=f(n.value,p,b.rootView)),document.body.addEventListener("dragend",t)),y.dragging=!0,y.draggablePosition={x:L,y:_}}function m(l){if(!y.dragging||l.pageX===0&&l.pageY===0)return;const[L,_]=Le([],[l.pageX-de/2,l.pageY-de/2]);y.draggablePosition={x:L,y:_}}function t(){y.storeWatcher&&y.storeWatcher(),document.body.removeEventListener("dragend",t),document.body.removeEventListener("dragover",m),y.dragging=!1,setTimeout(()=>{y.draggablePosition={x:-100,y:-100}},300)}const{draggableDataTransfer:v,dragging:V}=Ce(y);return(l,L)=>{const _=P("n8n-node-creator-node");return g(),I(_,{draggable:"",class:u(l.$style.action),title:l.action.displayName,"is-trigger":i(l.action),"data-keyboard-nav":"true",onDragstart:T,onDragend:t},{dragContent:A(()=>[S("div",{ref_key:"draggableDataTransfer",ref:v,class:u(l.$style.draggableDataTransfer)},null,2),Ue(S("div",{class:u(l.$style.draggable),style:Te(d.value)},[M(ce,{"node-type":l.nodeType,size:40,shrink:!1,onClickCapture:L[0]||(L[0]=_e(()=>{},["stop"]))},null,8,["node-type"])],6),[[ze,q(V)]])]),icon:A(()=>[M(ce,{"node-type":l.action},null,8,["node-type"])]),_:1},8,["class","title","is-trigger"])}}}),po="_action_139su_1",go="_nodeIcon_139su_13",yo="_draggable_139su_17",mo="_draggableDataTransfer_139su_31",_o={action:po,nodeIcon:go,draggable:yo,draggableDataTransfer:mo},fo={$style:_o},vo=z(uo,[["__cssModules",fo]]),ho=U({__name:"ViewItem",props:{view:{}},setup(r){return(e,p)=>{const s=P("n8n-node-icon"),o=P("n8n-node-creator-node");return g(),I(o,{class:u(e.$style.view),title:e.view.title,tag:e.view.tag,"is-trigger":!1,description:e.view.description,"show-action-arrow":!0},{icon:A(()=>[M(s,{type:"icon",name:e.view.icon,circle:!1,"show-tooltip":!1},null,8,["name"])]),_:1},8,["class","title","tag","description"])}}}),bo="_view_71tui_1",ko={view:bo},$o={$style:ko},wo=z(ho,[["__cssModules",$o]]),Co=U({__name:"LinkItem",props:{link:{}},setup(r){return(e,p)=>{const s=P("n8n-node-icon"),o=P("n8n-node-creator-node");return g(),I(o,{class:u(e.$style.creatorLink),title:e.link.title,"is-trigger":!1,description:e.link.description,tag:e.link.tag,"show-action-arrow":!0},{icon:A(()=>[M(s,{type:"icon",name:e.link.icon,circle:!1,"show-tooltip":!1},null,8,["name"])]),_:1},8,["class","title","description","tag"])}}}),To="_creatorLink_1hx0p_1",No={creatorLink:To},Io={$style:No},So=z(Co,[["__cssModules",Io]]),Ao=["textContent"],Lo=U({__name:"CategoryItem",props:{expanded:{type:Boolean,default:!0},active:{type:Boolean},count:{},name:{},isTrigger:{type:Boolean}},setup(r){const e=r,p=h(()=>{const s=e.count||0;return s>0?`${e.name} (${s})`:e.name});return(s,o)=>{const f=P("font-awesome-icon");return g(),E("div",ne({class:s.$style.categoryWrapper},s.$attrs,{"data-keyboard-nav":"true","data-test-id":"node-creator-category-item"}),[S("div",{class:u({[s.$style.category]:!0,[s.$style.active]:s.active})},[S("span",{class:u(s.$style.name)},[S("span",{textContent:W(p.value)},null,8,Ao),s.isTrigger?(g(),I(f,{key:0,icon:"bolt",size:"xs",class:u(s.$style.triggerIcon)},null,8,["class"])):R("",!0),Z(s.$slots,"default")],2),s.expanded?(g(),I(f,{key:0,icon:"chevron-down",class:u(s.$style.arrow)},null,8,["class"])):(g(),I(f,{key:1,class:u(s.$style.arrow),icon:"chevron-up"},null,8,["class"]))],2)],16)}}}),Eo="_triggerIcon_b4ocq_1",Ro="_category_b4ocq_6",Vo="_active_b4ocq_27",Mo="_name_b4ocq_31",Oo="_arrow_b4ocq_36",Bo={triggerIcon:Eo,category:Ro,active:Vo,name:Mo,arrow:Oo},Po={$style:Bo},Do=z(Lo,[["__cssModules",Po]]),Ho=["data-category-collapsed"],Ko=["innerHTML"],Uo=U({__name:"CategorizedItemsRenderer",props:{elements:{default:()=>[]},category:{},disabled:{type:Boolean},activeIndex:{},isTriggerCategory:{type:Boolean},mouseOverTooltip:{},expanded:{type:Boolean}},setup(r){const e=r,p=ae(),{popViewStack:s}=B(),{registerKeyHook:o}=X(),{workflowId:f}=st(),b=h(()=>{var t;return(t=X())==null?void 0:t.activeItemId}),y=h(()=>e.elements.filter(({type:t})=>t==="action").length),d=J(e.expanded??!1);function n(){i(!d.value)}function i(t){d.value=t,d.value&&p.trackNodesPanel("nodeCreateList.onCategoryExpanded",{category_name:e.category,workflow_id:f})}function T(){d.value||i(!0)}function m(){if(!d.value){s();return}i(!1)}return Q(()=>e.elements,()=>{i(!0)}),o(`CategoryRight_${e.category}`,{keyboardKeys:["ArrowRight"],condition:(t,v)=>t==="category"&&e.category===v,handler:T}),o(`CategoryToggle_${e.category}`,{keyboardKeys:["Enter"],condition:(t,v)=>t==="category"&&e.category===v,handler:n}),o(`CategoryLeft_${e.category}`,{keyboardKeys:["ArrowLeft"],condition:(t,v)=>t==="category"&&e.category===v,handler:m}),(t,v)=>{const V=P("n8n-icon"),l=P("n8n-tooltip");return g(),E("div",{class:u(t.$style.categorizedItemsRenderer),"data-category-collapsed":!d.value},[M(Do,{class:u(t.$style.categoryItem),name:t.category,disabled:t.disabled,active:b.value===t.category,count:y.value,expanded:d.value,"is-trigger":t.isTriggerCategory,"data-keyboard-nav-type":"category","data-keyboard-nav-id":t.category,onClick:n},{default:A(()=>[t.mouseOverTooltip?(g(),E("span",{key:0,class:u(t.$style.mouseOverTooltip)},[M(l,{placement:"top","popper-class":t.$style.tooltipPopper},{content:A(()=>[S("div",{innerHTML:t.mouseOverTooltip},null,8,Ko)]),default:A(()=>[M(V,{icon:"question-circle",size:"small"})]),_:1},8,["popper-class"])],2)):R("",!0)]),_:1},8,["class","name","disabled","active","count","expanded","is-trigger","data-keyboard-nav-id"]),d.value&&y.value>0&&t.$slots.default?(g(),E("div",{key:0,class:u(t.$style.contentSlot)},[Z(t.$slots,"default")],2)):R("",!0),d.value?(g(),I(Ie,ne({key:1},t.$attrs,{elements:t.elements,"is-trigger":t.isTriggerCategory}),{default:A(()=>[]),empty:A(()=>[Z(t.$slots,"empty",qe(ft({elements:t.elements})))]),_:3},16,["elements","is-trigger"])):R("",!0)],10,Ho)}}}),zo="_mouseOverTooltip_1smyb_1",qo="_categorizedItemsRenderer_1smyb_9",Yo="_tooltipPopper_1smyb_13",Wo="_contentSlot_1smyb_17",jo={mouseOverTooltip:zo,categorizedItemsRenderer:qo,tooltipPopper:Yo,contentSlot:Wo},Fo={$style:jo},pe=z(Uo,[["__cssModules",Fo]]),Go={key:0},Xo=["data-keyboard-nav-type","data-keyboard-nav-id","onClick"],Zo=20,Jo=5,Qo=U({__name:"ItemsRenderer",props:{elements:{default:()=>[]},activeIndex:{},disabled:{type:Boolean},lazyRender:{type:Boolean,default:!0}},emits:["selected","dragstart","dragend"],setup(r,{emit:e}){const p=r,s=e,o=J([]),f=J(0),b=h(()=>{var t;return(t=X())==null?void 0:t.activeItemId});function y(){if(p.elements.length<=Zo||!p.lazyRender){o.value=p.elements;return}o.value.length<p.elements.length&&(o.value.push(...p.elements.slice(o.value.length,o.value.length+Jo)),f.value=window.requestAnimationFrame(y))}function d(t,v,V){if(!p.disabled)switch(t){case"dragstart":case"dragend":case"selected":s("selected",v,V);break;default:s(t,v,V)}}function n(t){t.style.height="0"}function i(t){t.style.height=`${t.scrollHeight}px`}function T(t){t.style.height=`${t.scrollHeight}px`}function m(t){t.style.height="0"}return me(()=>{y()}),Ye(()=>{window.cancelAnimationFrame(f.value),o.value=[]}),Q(()=>p.elements,()=>{window.cancelAnimationFrame(f.value),o.value=[],y()}),(t,v)=>{const V=P("n8n-loading");return t.elements.length>0?(g(),E("div",{key:0,class:u(t.$style.itemsRenderer),name:"accordion",onBeforeEnter:n,onEnter:i,onBeforeLeave:T,onLeave:m},[Z(t.$slots,"default"),(g(!0),E(vt,null,ht(t.elements,l=>(g(),E("div",{key:l.uuid},[o.value.includes(l)?(g(),E("div",Go,[l.type==="section"?(g(),I(pe,{key:0,elements:l.children,expanded:"",category:l.title,onSelected:v[0]||(v[0]=L=>d("selected",L))},null,8,["elements","category"])):(g(),E("div",{key:1,ref_for:!0,ref:"iteratorItems",class:u({clickable:!t.disabled,[t.$style.active]:b.value===l.uuid,[t.$style.iteratorItem]:!0,[t.$style[l.type]]:!0,[t.$style.borderless]:l.type==="view"&&l.properties.borderless===!0}),"data-test-id":"item-iterator-item","data-keyboard-nav-type":l.type!=="label"?l.type:void 0,"data-keyboard-nav-id":l.uuid,onClick:L=>d("selected",l)},[l.type==="label"?(g(),I(co,{key:0,item:l},null,8,["item"])):R("",!0),l.type==="subcategory"?(g(),I(no,{key:1,item:l.properties},null,8,["item"])):R("",!0),l.type==="node"?(g(),I(Qt,{key:2,"node-type":l.properties,active:!0,subcategory:l.subcategory},null,8,["node-type","subcategory"])):R("",!0),l.type==="action"?(g(),I(vo,{key:3,"node-type":l.properties,action:l.properties,active:!0},null,8,["node-type","action"])):l.type==="view"?(g(),I(wo,{key:4,view:l.properties,class:u(t.$style.viewItem)},null,8,["view","class"])):l.type==="link"?(g(),I(So,{key:5,link:l.properties,class:u(t.$style.linkItem)},null,8,["link","class"])):R("",!0)],10,Xo))])):(g(),I(V,{key:1,loading:!0,rows:1,variant:"p",class:u(t.$style.itemSkeleton)},null,8,["class"]))]))),128))],34)):(g(),E("div",{key:1,class:u(t.$style.empty)},[Z(t.$slots,"empty")],2))}}}),xo="_itemSkeleton_1rgyl_1",en="_iteratorItem_1rgyl_5",tn="_label_1rgyl_17",on="_category_1rgyl_17",nn="_active_1rgyl_20",sn="_empty_1rgyl_24",an="_itemsRenderer_1rgyl_28",rn="_view_1rgyl_37",ln="_link_1rgyl_55",cn="_borderless_1rgyl_73",dn={itemSkeleton:xo,iteratorItem:en,label:tn,category:on,active:nn,empty:sn,itemsRenderer:an,view:rn,link:ln,borderless:cn},un={$style:dn},Ie=z(Qo,[["__cssModules",un]]),pn=["innerHTML"],gn=["innerHTML"],yn=["innerHTML"],mn=["innerHTML"],_n=["innerHTML"],fn=U({__name:"ActionsMode",emits:{nodeTypeSelected:r=>!0},setup(r,{emit:e}){const p=e,s=ae(),{userActivated:o}=at(),{popViewStack:f,updateCurrentViewStack:b}=B(),{registerKeyHook:y}=X(),{setAddedNodeActionParameters:d,getActionData:n,getPlaceholderTriggerActions:i,parseCategoryActions:T,actionsCategoryLocales:m}=Ne(),t=h(()=>H(_.value,m.value.triggers,!1)),v=h(()=>H(_.value,m.value.actions,!D.value)),V=h(()=>H(B().activeViewStack.baselineItems||[],m.value.triggers,!1)),l=h(()=>H(B().activeViewStack.baselineItems||[],m.value.actions,!D.value)),L=h(()=>t.value.length||D.value?m.value.triggers:`${m.value.triggers} (${C.length})`),_=h(()=>(B().activeViewStack.items||[]).filter($=>$.properties.actionKey!==le)),D=h(()=>B().activeViewStack.search),a=h(()=>B().activeViewStack.subcategory),N=h(()=>B().activeViewStack.rootView),C=i(a.value||""),O=h(()=>T(B().activeViewStack.baselineItems||[],m.value.triggers,!D.value).length===0),c=h(()=>(B().activeViewStack.baselineItems||[]).some(K=>(K.properties.actionKey??"")===le)),w=h(()=>N.value===oe);y("ActionsKeyRight",{keyboardKeys:["ArrowRight","Enter"],condition:$=>$==="action",handler:Fe}),y("ActionsKeyLeft",{keyboardKeys:["ArrowLeft"],condition:$=>$==="action",handler:ve});function H($,k,K=!1){return T($,k,K)}function ve(){f()}function Fe($){const K=[..._.value,...C].find(Y=>Y.uuid===$);K&&re(K)}function re($){var Y,j,F;if($.type!=="action")return;const k=n($.properties);if(C.some(G=>G.key===$.key)&&w.value){const G=(Y=_.value[0])==null?void 0:Y.key;G&&p("nodeTypeSelected",[k.key,G])}else(k==null?void 0:k.key)===rt&&((j=k==null?void 0:k.value)==null?void 0:j.resource)==="assistant"&&((F=k==null?void 0:k.value)==null?void 0:F.operation)==="message"?p("nodeTypeSelected",[it]):p("nodeTypeSelected",[k.key]);s&&d(k,s,N.value)}function Ge(){var j,F,G;const $=B().activeViewStack,k=(j=$.baselineItems||[])==null?void 0:j.filter(he=>he.key.toLowerCase().includes("trigger")).length,Y={app_identifier:[..._.value,...C][0].key,actions:(F=$.baselineItems||[])==null?void 0:F.map(he=>he.properties.displayName),regular_action_count:((G=$.baselineItems||[])==null?void 0:G.length)-k,trigger_action_count:k};ke().run("nodeCreateList.onViewActions",Y),s==null||s.trackNodesPanel("nodeCreateList.onViewActions",Y)}function Se(){b({search:""})}function Xe(){var K;const $={name:"",key:ie,value:{authentication:"predefinedCredentialType"}};p("nodeTypeSelected",[ie]),s&&d($);const k=(K=_.value[0])==null?void 0:K.key;k&&(ke().run("nodeCreateList.onActionsCustmAPIClicked",{app_identifier:k}),s==null||s.trackNodesPanel("nodeCreateList.onActionsCustmAPIClicked",{app_identifier:k}))}const Ze=U({props:{rootView:{type:String,required:!0}},setup($,{slots:k}){return()=>{var K,Y,j,F;return bt("div",{},$.rootView===ye?[(K=k.actions)==null?void 0:K.call(k),(Y=k.triggers)==null?void 0:Y.call(k)]:[(j=k.triggers)==null?void 0:j.call(k),(F=k.actions)==null?void 0:F.call(k)])}}});return me(()=>{Ge()}),($,k)=>{const K=P("n8n-callout"),Y=P("n8n-info-tip");return g(),E("div",{class:u($.$style.container)},[N.value?(g(),I(q(Ze),{key:0,"root-view":N.value},ue({_:2},[w.value||V.value.length!==0?{name:"triggers",fn:A(()=>[M(pe,{elements:t.value,category:L.value,"mouse-over-tooltip":$.$locale.baseText("nodeCreator.actionsTooltip.triggersStartWorkflow"),"is-trigger-category":"",expanded:w.value||v.value.length===0,onSelected:re},ue({_:2},[O.value?{name:"empty",fn:A(()=>[O.value?(g(),I(K,{key:0,theme:"info",iconless:"",slim:"","data-test-id":"actions-panel-no-triggers-callout"},{default:A(()=>[S("span",{innerHTML:$.$locale.baseText("nodeCreator.actionsCallout.noTriggerItems",{interpolate:{nodeName:a.value??""}})},null,8,pn)]),_:1})):R("",!0),M(Ie,{elements:q(C),onSelected:re},null,8,["elements"])]),key:"0"}:{name:"empty",fn:A(()=>[S("p",{class:u($.$style.resetSearch),onClick:Se,innerHTML:$.$locale.baseText("nodeCreator.actionsCategory.noMatchingTriggers")},null,10,["innerHTML"])]),key:"1"}]),1032,["elements","category","mouse-over-tooltip","expanded"])]),key:"0"}:void 0,!w.value||l.value.length!==0?{name:"actions",fn:A(()=>[M(pe,{elements:v.value,category:q(m).actions,"mouse-over-tooltip":$.$locale.baseText("nodeCreator.actionsTooltip.actionsPerformStep"),expanded:!w.value||t.value.length===0,onSelected:re},{empty:A(()=>[D.value?(g(),E("p",{key:1,class:u($.$style.resetSearch),"data-test-id":"actions-panel-no-matching-actions",onClick:Se,innerHTML:$.$locale.baseText("nodeCreator.actionsCategory.noMatchingActions")},null,10,mn)):(g(),I(Y,{key:0,theme:"info",type:"note",class:u($.$style.actionsEmpty)},{default:A(()=>[S("span",{innerHTML:$.$locale.baseText("nodeCreator.actionsCallout.noActionItems",{interpolate:{nodeName:a.value??""}})},null,8,yn)]),_:1},8,["class"]))]),default:A(()=>[!q(o)&&w.value?(g(),I(K,{key:0,theme:"info",iconless:"",slim:"","data-test-id":"actions-panel-activation-callout"},{default:A(()=>[S("span",{innerHTML:$.$locale.baseText("nodeCreator.actionsCallout.triggersStartWorkflow")},null,8,gn)]),_:1})):R("",!0)]),_:1},8,["elements","category","mouse-over-tooltip","expanded"])]),key:"1"}:void 0]),1032,["root-view"])):R("",!0),c.value?(g(),E("div",{key:1,class:u($.$style.apiHint)},[S("span",{onClick:_e(Xe,["prevent"]),innerHTML:$.$locale.baseText("nodeCreator.actionsList.apiCall",{interpolate:{node:a.value??""}})},null,8,_n)],2)):R("",!0)],2)}}}),vn="_container_25ezu_1",hn="_resetSearch_25ezu_7",bn="_actionsEmpty_25ezu_21",kn="_apiHint_25ezu_29",$n={container:vn,resetSearch:hn,actionsEmpty:bn,apiHint:kn},wn={$style:$n},Cn=z(fn,[["__cssModules",wn]]),Tn={},Nn={width:"75px",height:"75px",viewBox:"0 0 75 75",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},In=kt('<title>no-nodes-keyart</title><g id="Nodes-panel-prototype-V2.1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="nodes-panel-(component)" transform="translate(-2085.000000, -352.000000)"><g id="nodes_panel" transform="translate(1880.000000, 151.000000)"><g id="Panel" transform="translate(50.000000, 0.000000)"><g id="Group-3" transform="translate(105.000000, 171.000000)"><g id="no-nodes-keyart" transform="translate(50.000000, 30.000000)"><rect id="Rectangle" x="0" y="0" width="75" height="75"></rect><g id="Group" transform="translate(6.562500, 8.164062)" fill="#C4C8D1" fill-rule="nonzero"><polygon id="Rectangle" transform="translate(49.192016, 45.302553) rotate(-45.000000) translate(-49.192016, -45.302553) " points="44.5045606 32.0526802 53.8794707 32.0526802 53.8794707 58.5524261 44.5045606 58.5524261"></polygon><path id="Path" d="M48.125,23.0859375 C54.15625,23.0859375 59.0625,18.1796875 59.0625,12.1484375 C59.0625,10.3359375 58.5625,8.6484375 57.78125,7.1484375 L49.34375,15.5859375 L44.6875,10.9296875 L53.125,2.4921875 C51.625,1.7109375 49.9375,1.2109375 48.125,1.2109375 C42.09375,1.2109375 37.1875,6.1171875 37.1875,12.1484375 C37.1875,13.4296875 37.4375,14.6484375 37.84375,15.7734375 L32.0625,21.5546875 L26.5,15.9921875 L28.71875,13.7734375 L24.3125,9.3671875 L30.9375,2.7421875 C27.28125,-0.9140625 21.34375,-0.9140625 17.6875,2.7421875 L6.625,13.8046875 L11.03125,18.2109375 L2.21875,18.2109375 L1.38777878e-15,20.4296875 L11.0625,31.4921875 L13.28125,29.2734375 L13.28125,20.4296875 L17.6875,24.8359375 L19.90625,22.6171875 L25.46875,28.1796875 L2.3125,51.3359375 L8.9375,57.9609375 L44.5,22.4296875 C45.625,22.8359375 46.84375,23.0859375 48.125,23.0859375 Z"></path></g></g></g></g></g></g></g>',2),Sn=[In];function An(r,e){return g(),E("svg",Nn,Sn)}const Ln=z(Tn,[["render",An]]),En=["textContent"],Rn=["textContent"],Vn=U({__name:"NoResults",props:{showIcon:{type:Boolean},showRequest:{type:Boolean},rootView:{}},setup(r){return(e,p)=>{const s=P("n8n-link"),o=P("font-awesome-icon");return g(),E("div",{class:u({[e.$style.noResults]:!0,[e.$style.iconless]:!e.showIcon}),"data-test-id":"node-creator-no-results"},[e.showIcon?(g(),E("div",{key:0,class:u(e.$style.icon)},[M(Ln)],2)):R("",!0),S("div",{class:u(e.$style.title)},[Z(e.$slots,"title"),S("p",{textContent:W(e.$locale.baseText("nodeCreator.noResults.weDidntMakeThatYet"))},null,8,En),S("div",{class:u(e.$style.action)},[te(W(e.$locale.baseText("nodeCreator.noResults.dontWorryYouCanProbablyDoItWithThe"))+" ",1),e.rootView===q(ye)?(g(),I(s,{key:0,onClick:p[0]||(p[0]=f=>e.$emit("addHttpNode"))},{default:A(()=>[te(W(e.$locale.baseText("nodeCreator.noResults.httpRequest")),1)]),_:1})):R("",!0),e.rootView===q(oe)?(g(),I(s,{key:1,onClick:p[1]||(p[1]=f=>e.$emit("addWebhookNode"))},{default:A(()=>[te(W(e.$locale.baseText("nodeCreator.noResults.webhook")),1)]),_:1})):R("",!0),te(" "+W(e.$locale.baseText("nodeCreator.noResults.node")),1)],2)],2),e.showRequest?(g(),E("div",{key:1,class:u(e.$style.request)},[S("p",{textContent:W(e.$locale.baseText("nodeCreator.noResults.wantUsToMakeItFaster"))},null,8,Rn),S("div",null,[M(s,{to:q(lt)},{default:A(()=>[S("span",null,W(e.$locale.baseText("nodeCreator.noResults.requestTheNode")),1),te("  "),S("span",null,[M(o,{class:u(e.$style.external),icon:"external-link-alt",title:e.$locale.baseText("nodeCreator.noResults.requestTheNode")},null,8,["class","title"])])]),_:1},8,["to"])])],2)):R("",!0)],2)}}}),Mn="_noResults_8axui_1",On="_title_8axui_14",Bn="_action_8axui_23",Pn="_request_8axui_24",Dn="_icon_8axui_40",Hn="_external_8axui_46",Kn={noResults:Mn,title:On,action:Bn,request:Pn,icon:Dn,external:Hn},Un={$style:Kn},zn=z(Vn,[["__cssModules",Un]]),qn=U({__name:"NodesMode",emits:{nodeTypeSelected:r=>!0},setup(r,{emit:e}){const p=e,s=ge(),o=ae(),f=Re(),b=Ae(),{mergedNodes:y,actions:d}=x();Ae();const{pushViewStack:n,popViewStack:i}=B(),{registerKeyHook:T}=X(),m=h(()=>B().activeViewStack),t=h(()=>B().globalSearchItemsDiff);function v(a){p("nodeTypeSelected",a)}function V(a){var N;if(a.type==="subcategory"){const C=We(a.properties.title),O=s.baseText(`nodeCreator.subcategoryNames.${C}`);n({subcategory:a.key,title:O,mode:"nodes",...a.properties.icon?{nodeIcon:{icon:a.properties.icon,iconType:"icon"}}:{},...a.properties.panelClass?{panelClass:a.properties.panelClass}:{},rootView:m.value.rootView,forceIncludeNodes:a.properties.forceIncludeNodes,baseFilter:L,itemsMapper:l,sections:a.properties.sections}),o.trackNodesPanel("nodeCreateList.onSubcategorySelected",{subcategory:a.key})}if(a.type==="node"){const C=(d==null?void 0:d[a.key])||[];if(C.length<=1){v([a.key]);return}const O=ct(a.properties,f.appliedTheme),c=O?b.baseUrl+O:(N=dt(a.properties,f.appliedTheme))==null?void 0:N.split(":")[1],w=C==null?void 0:C.map(H=>mt(H,a.properties.displayName,"action"));n({subcategory:a.properties.displayName,title:a.properties.displayName,nodeIcon:{color:ut(a.properties),icon:c,iconType:O?"file":"icon"},rootView:m.value.rootView,hasSearch:!0,mode:"actions",items:w})}if(a.type==="view"){const C={[oe]:Oe,[ye]:Be,[Ve]:Pe,[Me]:De},O=a.key,c=C[O];if(!c){console.warn(`No view found for ${O}`);return}const w=c(y);n({title:w.title,subtitle:(w==null?void 0:w.subtitle)??"",info:(w==null?void 0:w.info)??"",items:w.items,hasSearch:!0,rootView:w.value,mode:"nodes",searchItems:y})}a.type==="link"&&(window.open(a.properties.url,"_blank"),o.trackNodesPanel("nodeCreateList.onLinkSelected",{link:a.properties.url}))}function l(a){var c,w;if(a.type!=="node")return a;const N=a.properties.group.includes("trigger"),O=((d==null?void 0:d[a.key])||[]).length>0;return N&&O&&((c=a.properties)!=null&&c.codex&&(a.properties.codex.alias=[...((w=a.properties.codex)==null?void 0:w.alias)||[],a.properties.displayName]),a.properties.displayName=a.properties.displayName.replace(" Trigger","")),a}function L(a){if(a.type==="section")return!0;if(a.type!=="node")return!1;const N=a.properties.group.includes("trigger"),O=((d==null?void 0:d[a.key])||[]).length>0;return m.value.rootView===oe?O||N:O||!N}function _(){i()}function D(a){const C=_t([...m.value.items??[],...t.value??[]]).find(O=>O.uuid===a);C&&V(C)}return T("MainViewArrowRight",{keyboardKeys:["ArrowRight","Enter"],condition:a=>["subcategory","node","link","view"].includes(a),handler:D}),T("MainViewArrowLeft",{keyboardKeys:["ArrowLeft"],condition:a=>["subcategory","node","link","view"].includes(a),handler:_}),(a,N)=>(g(),E("span",null,[M(Ie,{elements:m.value.items,class:u(a.$style.items),onSelected:V},ue({_:2},[(m.value.items||[]).length===0&&t.value.length===0?{name:"empty",fn:A(()=>[M(zn,{"root-view":m.value.rootView,"show-icon":"","show-request":"",onAddWebhookNode:N[0]||(N[0]=C=>v([q(Ee)])),onAddHttpNode:N[1]||(N[1]=C=>v([q(ie)]))},null,8,["root-view"])]),key:"0"}:void 0]),1032,["elements","class"]),t.value.length>0?(g(),I(pe,{key:0,elements:t.value,category:a.$locale.baseText("nodeCreator.categoryNames.otherCategories"),onSelected:V},null,8,["elements","category"])):R("",!0)]))}}),Yn="_items_1mzys_1",Wn={items:Yn},jn={$style:Wn},Fn=z(qn,[["__cssModules",jn]]),Gn=["textContent"],Xn=["textContent"],Zn=U({__name:"NodesListPanel",setup(r){const e=ge(),{mergedNodes:p}=x(),{pushViewStack:s,popViewStack:o,updateCurrentViewStack:f}=B(),{setActiveItemIndex:b,attachKeydownEvent:y,detachKeydownEvent:d}=X(),n=h(()=>B().activeViewStack),i=h(()=>B().viewStacks),T=h(()=>B().activeViewStackMode==="actions"),m=h(()=>T.value?e.baseText("nodeCreator.actionsCategory.searchActions",{interpolate:{node:n.value.title}}):e.baseText("nodeCreator.searchBar.searchNodes")),t=h(()=>x().selectedView);function v(_=""){return n.value.activeIndex?n.value.activeIndex:n.value.mode==="actions"?1:n.value.sections?_?0:1:0}function V(_){n.value.uuid&&(f({search:_}),b(v(_)))}function l(){b(v())}me(()=>{y(),b(v())}),Ye(()=>{d()}),Q(()=>t.value,_=>{const D={[oe]:Oe,[ye]:Be,[Ve]:Pe,[Me]:De},a=_,N=D[a];if(!N){console.warn(`No view found for ${a}`);return}const C=N(p);s({title:C.title,subtitle:(C==null?void 0:C.subtitle)??"",items:C.items,info:C.info,hasSearch:!0,mode:"nodes",rootView:_,searchItems:p})},{immediate:!0});function L(){o()}return(_,D)=>{const a=P("font-awesome-icon"),N=P("n8n-node-icon"),C=P("n8n-notice");return i.value.length>0?(g(),I(He,{key:0,name:`panel-slide-${n.value.transitionDirection}`,onAfterLeave:l},{default:A(()=>[(g(),E("aside",{key:`${n.value.uuid}`,class:u([_.$style.nodesListPanel,n.value.panelClass]),onKeydownCapture:D[0]||(D[0]=_e(()=>{},["stop"]))},[S("header",{class:u({[_.$style.header]:!0,[_.$style.hasBg]:!n.value.subtitle,"nodes-list-panel-header":!0}),"data-test-id":"nodes-list-header"},[S("div",{class:u(_.$style.top)},[i.value.length>1&&!n.value.preventBack?(g(),E("button",{key:0,class:u(_.$style.backButton),onClick:L},[M(a,{class:u(_.$style.backButtonIcon),icon:"arrow-left",size:"2x"},null,8,["class"])],2)):R("",!0),n.value.nodeIcon?(g(),I(N,{key:1,class:u(_.$style.nodeIcon),type:n.value.nodeIcon.iconType||"unknown",src:n.value.nodeIcon.icon,name:n.value.nodeIcon.icon,color:n.value.nodeIcon.color,circle:!1,"show-tooltip":!1,size:20},null,8,["class","type","src","name","color"])):R("",!0),n.value.title?(g(),E("p",{key:2,class:u(_.$style.title),textContent:W(n.value.title)},null,10,Gn)):R("",!0)],2),n.value.subtitle?(g(),E("p",{key:0,class:u({[_.$style.subtitle]:!0,[_.$style.offsetSubtitle]:i.value.length>1}),textContent:W(n.value.subtitle)},null,10,Xn)):R("",!0)],2),n.value.hasSearch?(g(),I(Ut,{key:0,class:u(_.$style.searchBar),placeholder:m.value?m.value:_.$locale.baseText("nodeCreator.searchBar.searchNodes"),"model-value":n.value.search,"onUpdate:modelValue":V},null,8,["class","placeholder","model-value"])):R("",!0),S("div",{class:u(_.$style.renderedItems)},[n.value.info&&!n.value.search?(g(),I(C,{key:0,class:u(_.$style.info),content:n.value.info,theme:"warning"},null,8,["class","content"])):R("",!0),T.value&&n.value.subcategory?(g(),I(Cn,qe(ne({key:1},_.$attrs)),null,16)):(g(),I(Fn,ne({key:2,"root-view":t.value},_.$attrs),null,16,["root-view"]))],2)],34))]),_:1},8,["name"])):R("",!0)}}}),Jn="_info_vhrjt_23",Qn="_backButton_vhrjt_27",xn="_backButtonIcon_vhrjt_34",es="_nodeIcon_vhrjt_40",ts="_renderedItems_vhrjt_45",os="_searchBar_vhrjt_57",ns="_nodesListPanel_vhrjt_61",ss="_footer_vhrjt_79",as="_top_vhrjt_90",rs="_header_vhrjt_95",is="_hasBg_vhrjt_101",ls="_title_vhrjt_106",cs="_subtitle_vhrjt_116",ds="_offsetSubtitle_vhrjt_124",us={info:Jn,backButton:Qn,backButtonIcon:xn,nodeIcon:es,renderedItems:ts,searchBar:os,nodesListPanel:ns,footer:ss,top:as,header:rs,hasBg:is,title:ls,subtitle:cs,offsetSubtitle:ds},ps={$style:us},gs=z(Zn,[["__cssModules",ps]]),ys=U({__name:"NodeCreator",props:{active:{type:Boolean},onNodeTypeSelected:{type:Function}},emits:["closeNodeCreator","nodeTypeSelected"],setup(r,{emit:e}){const p=r,{resetViewStacks:s}=B(),{registerKeyHook:o}=X(),f=e,b=Re(),y=pt(),{setShowScrim:d,setActions:n,setMergeNodes:i}=x(),{generateMergedNodesAndActions:T}=Lt(),m=we({nodeCreator:null,mousedownInsideEvent:null}),t=h(()=>x().showScrim),v=h(()=>B().viewStacks.length),V=h(()=>y.assistantChatOpen),l=h(()=>({top:`${b.bannersHeight+b.headerHeight}px`}));function L(){var c;if(m.mousedownInsideEvent){const w=new MouseEvent("click",{bubbles:!0,cancelable:!0});(c=m.mousedownInsideEvent.target)==null||c.dispatchEvent(w),m.mousedownInsideEvent=null,_()}}function _(){document.removeEventListener("mouseup",L),document.removeEventListener("touchstart",L)}function D(){m.mousedownInsideEvent=null,_()}function a(c){m.mousedownInsideEvent=c,document.addEventListener("mouseup",L),document.addEventListener("touchstart",L)}function N(c){c.preventDefault()}function C(c){if(!c.dataTransfer)return;const w=c.dataTransfer.getData($e),H=m.nodeCreator.getBoundingClientRect();w&&c.pageX>=H.x&&c.pageY>=H.y&&c.stopPropagation()}Q(()=>p.active,c=>{c||(d(!1),s())}),Q(v,c=>{c===0&&(f("closeNodeCreator"),d(!1))}),o("NodeCreatorCloseEscape",{keyboardKeys:["Escape"],handler:()=>f("closeNodeCreator")}),o("NodeCreatorCloseTab",{keyboardKeys:["Tab"],handler:()=>f("closeNodeCreator")}),Q(()=>({httpOnlyCredentials:gt().httpOnlyCredentialTypes,nodeTypes:yt().visibleNodeTypes}),({nodeTypes:c,httpOnlyCredentials:w})=>{const{actions:H,mergedNodes:ve}=T(c,w);n(H),i(ve)},{immediate:!0});const{nodeCreator:O}=Ce(m);return Ke(()=>{_()}),(c,w)=>(g(),E("div",null,[S("aside",{class:u({[c.$style.nodeCreatorScrim]:!0,[c.$style.active]:t.value})},null,2),M(Tt,null,{default:A(()=>[c.active?(g(),E("div",{key:0,ref_key:"nodeCreator",ref:O,class:u({[c.$style.nodeCreator]:!0,[c.$style.chatOpened]:V.value}),style:Te(l.value),"data-test-id":"node-creator",onDragover:N,onDrop:C,onMousedown:a,onMouseup:D},[M(gs,{onNodeTypeSelected:c.onNodeTypeSelected},null,8,["onNodeTypeSelected"])],38)):R("",!0)]),_:1})]))}}),ms="_nodeCreator_1q30p_5",_s="_chatOpened_1q30p_15",fs="_nodeCreatorScrim_1q30p_19",vs="_active_1q30p_31",hs={nodeCreator:ms,chatOpened:_s,nodeCreatorScrim:fs,active:vs},bs={$style:hs},Qs=z(ys,[["__cssModules",bs]]);export{Qs as default};
//# sourceMappingURL=NodeCreator-DlK1669m.js.map
