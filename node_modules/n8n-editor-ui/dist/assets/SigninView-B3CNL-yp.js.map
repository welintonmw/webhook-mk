{"version":3,"file":"SigninView-B3CNL-yp.js","sources":["../../src/views/MfaView.vue","../../src/views/SigninView.vue"],"sourcesContent":["<template>\n\t<div :class=\"$style.container\">\n\t\t<div :class=\"$style.logoContainer\">\n\t\t\t<Logo />\n\t\t</div>\n\t\t<n8n-card>\n\t\t\t<div :class=\"$style.headerContainer\">\n\t\t\t\t<n8n-heading size=\"xlarge\" color=\"text-dark\">{{\n\t\t\t\t\tshowRecoveryCodeForm\n\t\t\t\t\t\t? i18.baseText('mfa.recovery.modal.title')\n\t\t\t\t\t\t: i18.baseText('mfa.code.modal.title')\n\t\t\t\t}}</n8n-heading>\n\t\t\t</div>\n\t\t\t<div :class=\"[$style.formContainer, reportError ? $style.formError : '']\">\n\t\t\t\t<n8n-form-inputs\n\t\t\t\t\tv-if=\"formInputs\"\n\t\t\t\t\tdata-test-id=\"mfa-login-form\"\n\t\t\t\t\t:inputs=\"formInputs\"\n\t\t\t\t\t:event-bus=\"formBus\"\n\t\t\t\t\t@input=\"onInput\"\n\t\t\t\t\t@submit=\"onSubmit\"\n\t\t\t\t/>\n\t\t\t\t<div :class=\"$style.infoBox\">\n\t\t\t\t\t<n8n-text\n\t\t\t\t\t\tv-if=\"!showRecoveryCodeForm && !reportError\"\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tcolor=\"text-base\"\n\t\t\t\t\t\t:bold=\"false\"\n\t\t\t\t\t\t>{{ i18.baseText('mfa.code.input.info') }}\n\t\t\t\t\t\t<a data-test-id=\"mfa-enter-recovery-code-button\" @click=\"onRecoveryCodeClick\">{{\n\t\t\t\t\t\t\ti18.baseText('mfa.code.input.info.action')\n\t\t\t\t\t\t}}</a></n8n-text\n\t\t\t\t\t>\n\t\t\t\t\t<n8n-text v-if=\"reportError\" color=\"danger\" size=\"small\"\n\t\t\t\t\t\t>{{ formError }}\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tv-if=\"!showRecoveryCodeForm\"\n\t\t\t\t\t\t\t:class=\"$style.recoveryCodeLink\"\n\t\t\t\t\t\t\t@click=\"onRecoveryCodeClick\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ i18.baseText('mfa.recovery.input.info.action') }}</a\n\t\t\t\t\t\t>\n\t\t\t\t\t</n8n-text>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<n8n-button\n\t\t\t\t\tfloat=\"right\"\n\t\t\t\t\t:loading=\"verifyingMfaToken\"\n\t\t\t\t\t:label=\"\n\t\t\t\t\t\tshowRecoveryCodeForm\n\t\t\t\t\t\t\t? i18.baseText('mfa.recovery.button.verify')\n\t\t\t\t\t\t\t: i18.baseText('mfa.code.button.continue')\n\t\t\t\t\t\"\n\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t:disabled=\"!hasAnyChanges\"\n\t\t\t\t\t@click=\"onSaveClick\"\n\t\t\t\t/>\n\t\t\t\t<n8n-button\n\t\t\t\t\tfloat=\"left\"\n\t\t\t\t\t:label=\"i18.baseText('mfa.button.back')\"\n\t\t\t\t\tsize=\"large\"\n\t\t\t\t\ttype=\"tertiary\"\n\t\t\t\t\t@click=\"onBackClick\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</n8n-card>\n\t</div>\n</template>\n\n<script setup lang=\"ts\">\nimport type { IFormInputs } from '@/Interface';\nimport Logo from '../components/Logo.vue';\nimport {\n\tMFA_AUTHENTICATION_RECOVERY_CODE_INPUT_MAX_LENGTH,\n\tMFA_AUTHENTICATION_TOKEN_INPUT_MAX_LENGTH,\n\tMFA_FORM,\n} from '@/constants';\nimport { mfaEventBus } from '@/event-bus';\nimport { onMounted, ref } from 'vue';\nimport { useI18n } from '@/composables/useI18n';\nimport { toRefs } from '@vueuse/core';\n\n// ---------------------------------------------------------------------------\n// #region Props\n// ---------------------------------------------------------------------------\n\nconst props = defineProps<{\n\treportError: Boolean;\n}>();\n\n// #endregion\n\n// ---------------------------------------------------------------------------\n// #region Reactive properties\n// ---------------------------------------------------------------------------\n\nconst hasAnyChanges = ref(false);\nconst formBus = ref(mfaEventBus);\nconst formInputs = ref<null | IFormInputs>(null);\nconst showRecoveryCodeForm = ref(false);\nconst verifyingMfaToken = ref(false);\nconst formError = ref('');\nconst { reportError } = toRefs(props);\n\n// ---------------------------------------------------------------------------\n// #region Composable\n// ---------------------------------------------------------------------------\n\nconst i18 = useI18n();\n\n// #endregion\n\n// ---------------------------------------------------------------------------\n// #region Emit\n// ---------------------------------------------------------------------------\n\nconst emit = defineEmits(['onFormChanged', 'onBackClick', 'submit']);\n\n// #endregion\n\n// ---------------------------------------------------------------------------\n// #region Methods\n// ---------------------------------------------------------------------------\n\nconst formField = (\n\tname: string,\n\tlabel: string,\n\tplaceholder: string,\n\tmaxlength: number,\n\tfocus = true,\n) => {\n\treturn {\n\t\tname,\n\t\tinitialValue: '',\n\t\tproperties: {\n\t\t\tlabel,\n\t\t\tplaceholder,\n\t\t\tmaxlength,\n\t\t\tcapitalize: true,\n\t\t\tvalidateOnBlur: false,\n\t\t\tfocusInitially: focus,\n\t\t},\n\t};\n};\n\nconst onRecoveryCodeClick = () => {\n\tformError.value = '';\n\tshowRecoveryCodeForm.value = true;\n\thasAnyChanges.value = false;\n\tformInputs.value = [mfaRecoveryCodeFieldWithDefaults()];\n\temit('onFormChanged', MFA_FORM.MFA_RECOVERY_CODE);\n};\n\nconst onBackClick = () => {\n\tif (!showRecoveryCodeForm.value) {\n\t\temit('onBackClick', MFA_FORM.MFA_TOKEN);\n\t\treturn;\n\t}\n\n\tshowRecoveryCodeForm.value = false;\n\thasAnyChanges.value = true;\n\tformInputs.value = [mfaTokenFieldWithDefaults()];\n\temit('onBackClick', MFA_FORM.MFA_RECOVERY_CODE);\n};\n\nconst onSubmit = async (form: { token: string; recoveryCode: string }) => {\n\tformError.value = !showRecoveryCodeForm.value\n\t\t? i18.baseText('mfa.code.invalid')\n\t\t: i18.baseText('mfa.recovery.invalid');\n\temit('submit', form);\n};\n\nconst onInput = ({ target: { value, name } }: { target: { value: string; name: string } }) => {\n\tconst isSubmittingMfaToken = name === 'token';\n\tconst inputValidLength = isSubmittingMfaToken\n\t\t? MFA_AUTHENTICATION_TOKEN_INPUT_MAX_LENGTH\n\t\t: MFA_AUTHENTICATION_RECOVERY_CODE_INPUT_MAX_LENGTH;\n\n\tif (value.length !== inputValidLength) {\n\t\thasAnyChanges.value = false;\n\t\treturn;\n\t}\n\n\tverifyingMfaToken.value = true;\n\thasAnyChanges.value = true;\n\n\tconst dataToSubmit = isSubmittingMfaToken\n\t\t? { token: value, recoveryCode: '' }\n\t\t: { token: '', recoveryCode: value };\n\n\tonSubmit(dataToSubmit)\n\t\t.catch(() => {})\n\t\t.finally(() => (verifyingMfaToken.value = false));\n};\n\nconst mfaRecoveryCodeFieldWithDefaults = () => {\n\treturn formField(\n\t\t'recoveryCode',\n\t\ti18.baseText('mfa.recovery.input.label'),\n\t\ti18.baseText('mfa.recovery.input.placeholder'),\n\t\tMFA_AUTHENTICATION_RECOVERY_CODE_INPUT_MAX_LENGTH,\n\t);\n};\n\nconst mfaTokenFieldWithDefaults = () => {\n\treturn formField(\n\t\t'token',\n\t\ti18.baseText('mfa.code.input.label'),\n\t\ti18.baseText('mfa.code.input.placeholder'),\n\t\tMFA_AUTHENTICATION_TOKEN_INPUT_MAX_LENGTH,\n\t);\n};\n\nconst onSaveClick = () => {\n\tformBus.value.emit('submit');\n};\n\n// #endregion\n\n// ---------------------------------------------------------------------------\n// #region Lifecycle hooks\n// ---------------------------------------------------------------------------\n\nonMounted(() => {\n\tformInputs.value = [mfaTokenFieldWithDefaults()];\n});\n\n// #endregion\n</script>\n\n<style lang=\"scss\" module>\nbody {\n\tbackground-color: var(--color-background-light);\n}\n\n.container {\n\tdisplay: flex;\n\talign-items: center;\n\tflex-direction: column;\n\tpadding-top: var(--spacing-2xl);\n\n\t> * {\n\t\tmargin-bottom: var(--spacing-l);\n\t\twidth: 352px;\n\t}\n}\n\n.logoContainer {\n\tdisplay: flex;\n\tjustify-content: center;\n}\n\n.formContainer {\n\tpadding-bottom: var(--spacing-xl);\n}\n\n.headerContainer {\n\ttext-align: center;\n\tmargin-bottom: var(--spacing-xl);\n}\n\n.formError input {\n\tborder-color: var(--color-danger);\n}\n\n.recoveryCodeLink {\n\ttext-decoration: underline;\n}\n\n.infoBox {\n\tpadding-top: var(--spacing-4xs);\n}\n</style>\n","<template>\n\t<div>\n\t\t<AuthView\n\t\t\tv-if=\"!showMfaView\"\n\t\t\t:form=\"FORM_CONFIG\"\n\t\t\t:form-loading=\"loading\"\n\t\t\t:with-sso=\"true\"\n\t\t\tdata-test-id=\"signin-form\"\n\t\t\t@submit=\"onEmailPasswordSubmitted\"\n\t\t/>\n\t\t<MfaView\n\t\t\tv-if=\"showMfaView\"\n\t\t\t:report-error=\"reportError\"\n\t\t\t@submit=\"onMFASubmitted\"\n\t\t\t@on-back-click=\"onBackClick\"\n\t\t\t@on-form-changed=\"onFormChanged\"\n\t\t/>\n\t</div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nimport AuthView from './AuthView.vue';\nimport MfaView from './MfaView.vue';\nimport { useToast } from '@/composables/useToast';\nimport type { IFormBoxConfig } from '@/Interface';\nimport { MFA_AUTHENTICATION_REQUIRED_ERROR_CODE, VIEWS, MFA_FORM } from '@/constants';\nimport { mapStores } from 'pinia';\nimport { useUsersStore } from '@/stores/users.store';\nimport { useSettingsStore } from '@/stores/settings.store';\nimport { useCloudPlanStore } from '@/stores/cloudPlan.store';\nimport { useUIStore } from '@/stores/ui.store';\n\nexport default defineComponent({\n\tname: 'SigninView',\n\tcomponents: {\n\t\tAuthView,\n\t\tMfaView,\n\t},\n\tsetup() {\n\t\treturn {\n\t\t\t...useToast(),\n\t\t};\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tFORM_CONFIG: {} as IFormBoxConfig,\n\t\t\tloading: false,\n\t\t\tshowMfaView: false,\n\t\t\temail: '',\n\t\t\tpassword: '',\n\t\t\treportError: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapStores(useUsersStore, useSettingsStore, useUIStore, useCloudPlanStore),\n\t\tuserHasMfaEnabled() {\n\t\t\treturn !!this.usersStore.currentUser?.mfaEnabled;\n\t\t},\n\t},\n\tmounted() {\n\t\tlet emailLabel = this.$locale.baseText('auth.email');\n\t\tconst ldapLoginLabel = this.settingsStore.ldapLoginLabel;\n\t\tconst isLdapLoginEnabled = this.settingsStore.isLdapLoginEnabled;\n\t\tif (isLdapLoginEnabled && ldapLoginLabel) {\n\t\t\temailLabel = ldapLoginLabel;\n\t\t}\n\t\tthis.FORM_CONFIG = {\n\t\t\ttitle: this.$locale.baseText('auth.signin'),\n\t\t\tbuttonText: this.$locale.baseText('auth.signin'),\n\t\t\tredirectText: this.$locale.baseText('forgotPassword'),\n\t\t\tinputs: [\n\t\t\t\t{\n\t\t\t\t\tname: 'email',\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tlabel: emailLabel,\n\t\t\t\t\t\ttype: 'email',\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t...(!isLdapLoginEnabled && { validationRules: [{ name: 'VALID_EMAIL' }] }),\n\t\t\t\t\t\tshowRequiredAsterisk: false,\n\t\t\t\t\t\tvalidateOnBlur: false,\n\t\t\t\t\t\tautocomplete: 'email',\n\t\t\t\t\t\tcapitalize: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'password',\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tlabel: this.$locale.baseText('auth.password'),\n\t\t\t\t\t\ttype: 'password',\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tshowRequiredAsterisk: false,\n\t\t\t\t\t\tvalidateOnBlur: false,\n\t\t\t\t\t\tautocomplete: 'current-password',\n\t\t\t\t\t\tcapitalize: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\tif (!this.settingsStore.isDesktopDeployment) {\n\t\t\tthis.FORM_CONFIG.redirectLink = '/forgot-password';\n\t\t}\n\t},\n\tmethods: {\n\t\tasync onMFASubmitted(form: { token?: string; recoveryCode?: string }) {\n\t\t\tawait this.login({\n\t\t\t\temail: this.email,\n\t\t\t\tpassword: this.password,\n\t\t\t\ttoken: form.token,\n\t\t\t\trecoveryCode: form.recoveryCode,\n\t\t\t});\n\t\t},\n\t\tasync onEmailPasswordSubmitted(form: { email: string; password: string }) {\n\t\t\tawait this.login(form);\n\t\t},\n\t\tisRedirectSafe() {\n\t\t\tconst redirect = this.getRedirectQueryParameter();\n\t\t\treturn redirect.startsWith('/') || redirect.startsWith(window.location.origin);\n\t\t},\n\t\tgetRedirectQueryParameter() {\n\t\t\tlet redirect = '';\n\t\t\tif (typeof this.$route.query?.redirect === 'string') {\n\t\t\t\tredirect = decodeURIComponent(this.$route.query?.redirect);\n\t\t\t}\n\t\t\treturn redirect;\n\t\t},\n\t\tasync login(form: { email: string; password: string; token?: string; recoveryCode?: string }) {\n\t\t\ttry {\n\t\t\t\tthis.loading = true;\n\t\t\t\tawait this.usersStore.loginWithCreds({\n\t\t\t\t\temail: form.email,\n\t\t\t\t\tpassword: form.password,\n\t\t\t\t\tmfaToken: form.token,\n\t\t\t\t\tmfaRecoveryCode: form.recoveryCode,\n\t\t\t\t});\n\t\t\t\tthis.loading = false;\n\t\t\t\tif (this.settingsStore.isCloudDeployment) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait this.cloudPlanStore.checkForCloudPlanData();\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.warn('Failed to check for cloud plan data', error);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tawait this.settingsStore.getSettings();\n\t\t\t\tthis.clearAllStickyNotifications();\n\n\t\t\t\tthis.$telemetry.track('User attempted to login', {\n\t\t\t\t\tresult: this.showMfaView ? 'mfa_success' : 'success',\n\t\t\t\t});\n\n\t\t\t\tif (this.isRedirectSafe()) {\n\t\t\t\t\tconst redirect = this.getRedirectQueryParameter();\n\t\t\t\t\tif (redirect.startsWith('http')) {\n\t\t\t\t\t\twindow.location.href = redirect;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tvoid this.$router.push(redirect);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tawait this.$router.push({ name: VIEWS.HOMEPAGE });\n\t\t\t} catch (error) {\n\t\t\t\tif (error.errorCode === MFA_AUTHENTICATION_REQUIRED_ERROR_CODE) {\n\t\t\t\t\tthis.showMfaView = true;\n\t\t\t\t\tthis.cacheCredentials(form);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.$telemetry.track('User attempted to login', {\n\t\t\t\t\tresult: this.showMfaView ? 'mfa_token_rejected' : 'credentials_error',\n\t\t\t\t});\n\n\t\t\t\tif (!this.showMfaView) {\n\t\t\t\t\tthis.showError(error, this.$locale.baseText('auth.signin.error'));\n\t\t\t\t\tthis.loading = false;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.reportError = true;\n\t\t\t}\n\t\t},\n\t\tonBackClick(fromForm: string) {\n\t\t\tthis.reportError = false;\n\t\t\tif (fromForm === MFA_FORM.MFA_TOKEN) {\n\t\t\t\tthis.showMfaView = false;\n\t\t\t\tthis.loading = false;\n\t\t\t}\n\t\t},\n\t\tonFormChanged(toForm: string) {\n\t\t\tif (toForm === MFA_FORM.MFA_RECOVERY_CODE) {\n\t\t\t\tthis.reportError = false;\n\t\t\t}\n\t\t},\n\t\tcacheCredentials(form: { email: string; password: string }) {\n\t\t\tthis.email = form.email;\n\t\t\tthis.password = form.password;\n\t\t},\n\t},\n});\n</script>\n"],"names":["props","__props","hasAnyChanges","ref","formBus","mfaEventBus","formInputs","showRecoveryCodeForm","verifyingMfaToken","formError","reportError","toRefs","i18","useI18n","emit","__emit","formField","name","label","placeholder","maxlength","focus","onRecoveryCodeClick","mfaRecoveryCodeFieldWithDefaults","MFA_FORM","onBackClick","mfaTokenFieldWithDefaults","onSubmit","form","onInput","value","isSubmittingMfaToken","inputValidLength","MFA_AUTHENTICATION_TOKEN_INPUT_MAX_LENGTH","MFA_AUTHENTICATION_RECOVERY_CODE_INPUT_MAX_LENGTH","onSaveClick","onMounted","_sfc_main","defineComponent","AuthView","MfaView","useToast","mapStores","useUsersStore","useSettingsStore","useUIStore","useCloudPlanStore","_a","emailLabel","ldapLoginLabel","isLdapLoginEnabled","redirect","_b","error","VIEWS","MFA_AUTHENTICATION_REQUIRED_ERROR_CODE","fromForm","toForm","_resolveComponent","_createElementBlock","_ctx","_createBlock","_component_AuthView","onEmailPasswordSubmitted","showMfaView","_openBlock","_createCommentVNode"],"mappings":"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"}